!function(n,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i(require("vue"),require("bootstrap-vue")):"function"==typeof define&&define.amd?define(["vue","bootstrap-vue"],i):(n="undefined"!=typeof globalThis?globalThis:n||self).calendar=i(n.Vue,n["bootstrap-vue"])}(this,(function(n,i){"use strict";function _interopDefaultLegacy(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var a=_interopDefaultLegacy(n),s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getDefaultExportFromNamespaceIfPresent(n){return n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getDefaultExportFromNamespaceIfNotNamed(n){return n&&Object.prototype.hasOwnProperty.call(n,"default")&&1===Object.keys(n).length?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var i=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach((function(a){var s=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(i,a,s.get?s:{enumerable:!0,get:function(){return n[a]}})})),i}function createCommonjsModule(n){var i={exports:{}};return n(i,i.exports),i.exports}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var o=createCommonjsModule((function(n,i){var a,o;a=s,o=function(){var n=1e3,i=6e4,a=36e5,s="millisecond",o="second",r="minute",d="hour",u="day",f="week",v="month",g="quarter",S="year",b="date",k="Invalid Date",C=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,D=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var i=["th","st","nd","rd"],a=n%100;return"["+n+(i[(a-20)%10]||i[a]||i[0])+"]"}},m=function(n,i,a){var s=String(n);return!s||s.length>=i?n:""+Array(i+1-s.length).join(a)+n},H={s:m,z:function(n){var i=-n.utcOffset(),a=Math.abs(i),s=Math.floor(a/60),o=a%60;return(i<=0?"+":"-")+m(s,2,"0")+":"+m(o,2,"0")},m:function t(n,i){if(n.date()<i.date())return-t(i,n);var a=12*(i.year()-n.year())+(i.month()-n.month()),s=n.clone().add(a,v),o=i-s<0,r=n.clone().add(a+(o?-1:1),v);return+(-(a+(i-s)/(o?s-r:r-s))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:v,y:S,w:f,d:u,D:b,h:d,m:r,s:o,ms:s,Q:g}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return void 0===n}},A="en",L={};L[A]=z;var p=function(n){return n instanceof Y},T=function t(n,i,a){var s;if(!n)return A;if("string"==typeof n){var o=n.toLowerCase();L[o]&&(s=o),i&&(L[o]=i,s=o);var r=n.split("-");if(!s&&r.length>1)return t(r[0])}else{var d=n.name;L[d]=n,s=d}return!a&&s&&(A=s),s||!a&&A},w=function(n,i){if(p(n))return n.clone();var a="object"==typeof i?i:{};return a.date=n,a.args=arguments,new Y(a)},E=H;E.l=T,E.i=p,E.w=function(n,i){return w(n,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var Y=function(){function M(n){this.$L=T(n.locale,null,!0),this.parse(n)}var z=M.prototype;return z.parse=function(n){this.$d=function(n){var i=n.date,a=n.utc;if(null===i)return new Date(NaN);if(E.u(i))return new Date;if(i instanceof Date)return new Date(i);if("string"==typeof i&&!/Z$/i.test(i)){var s=i.match(C);if(s){var o=s[2]-1||0,r=(s[7]||"0").substring(0,3);return a?new Date(Date.UTC(s[1],o,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)):new Date(s[1],o,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)}}return new Date(i)}(n),this.$x=n.x||{},this.init()},z.init=function(){var n=this.$d;this.$y=n.getFullYear(),this.$M=n.getMonth(),this.$D=n.getDate(),this.$W=n.getDay(),this.$H=n.getHours(),this.$m=n.getMinutes(),this.$s=n.getSeconds(),this.$ms=n.getMilliseconds()},z.$utils=function(){return E},z.isValid=function(){return!(this.$d.toString()===k)},z.isSame=function(n,i){var a=w(n);return this.startOf(i)<=a&&a<=this.endOf(i)},z.isAfter=function(n,i){return w(n)<this.startOf(i)},z.isBefore=function(n,i){return this.endOf(i)<w(n)},z.$g=function(n,i,a){return E.u(n)?this[i]:this.set(a,n)},z.unix=function(){return Math.floor(this.valueOf()/1e3)},z.valueOf=function(){return this.$d.getTime()},z.startOf=function(n,i){var a=this,s=!!E.u(i)||i,g=E.p(n),l=function(n,i){var o=E.w(a.$u?Date.UTC(a.$y,i,n):new Date(a.$y,i,n),a);return s?o:o.endOf(u)},$=function(n,i){return E.w(a.toDate()[n].apply(a.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(i)),a)},k=this.$W,C=this.$M,D=this.$D,z="set"+(this.$u?"UTC":"");switch(g){case S:return s?l(1,0):l(31,11);case v:return s?l(1,C):l(0,C+1);case f:var H=this.$locale().weekStart||0,A=(k<H?k+7:k)-H;return l(s?D-A:D+(6-A),C);case u:case b:return $(z+"Hours",0);case d:return $(z+"Minutes",1);case r:return $(z+"Seconds",2);case o:return $(z+"Milliseconds",3);default:return this.clone()}},z.endOf=function(n){return this.startOf(n,!1)},z.$set=function(n,i){var a,f=E.p(n),g="set"+(this.$u?"UTC":""),k=(a={},a[u]=g+"Date",a[b]=g+"Date",a[v]=g+"Month",a[S]=g+"FullYear",a[d]=g+"Hours",a[r]=g+"Minutes",a[o]=g+"Seconds",a[s]=g+"Milliseconds",a)[f],C=f===u?this.$D+(i-this.$W):i;if(f===v||f===S){var D=this.clone().set(b,1);D.$d[k](C),D.init(),this.$d=D.set(b,Math.min(this.$D,D.daysInMonth())).$d}else k&&this.$d[k](C);return this.init(),this},z.set=function(n,i){return this.clone().$set(n,i)},z.get=function(n){return this[E.p(n)]()},z.add=function(s,g){var b,k=this;s=Number(s);var C=E.p(g),y=function(n){var i=w(k);return E.w(i.date(i.date()+Math.round(n*s)),k)};if(C===v)return this.set(v,this.$M+s);if(C===S)return this.set(S,this.$y+s);if(C===u)return y(1);if(C===f)return y(7);var D=(b={},b[r]=i,b[d]=a,b[o]=n,b)[C]||1,z=this.$d.getTime()+s*D;return E.w(z,this)},z.subtract=function(n,i){return this.add(-1*n,i)},z.format=function(n){var i=this,a=this.$locale();if(!this.isValid())return a.invalidDate||k;var s=n||"YYYY-MM-DDTHH:mm:ssZ",o=E.z(this),r=this.$H,d=this.$m,u=this.$M,f=a.weekdays,v=a.months,h=function(n,a,o,r){return n&&(n[a]||n(i,s))||o[a].slice(0,r)},c=function(n){return E.s(r%12||12,n,"0")},g=a.meridiem||function(n,i,a){var s=n<12?"AM":"PM";return a?s.toLowerCase():s},S={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:E.s(u+1,2,"0"),MMM:h(a.monthsShort,u,v,3),MMMM:h(v,u),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:h(a.weekdaysMin,this.$W,f,2),ddd:h(a.weekdaysShort,this.$W,f,3),dddd:f[this.$W],H:String(r),HH:E.s(r,2,"0"),h:c(1),hh:c(2),a:g(r,d,!0),A:g(r,d,!1),m:String(d),mm:E.s(d,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:o};return s.replace(D,(function(n,i){return i||S[n]||o.replace(":","")}))},z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},z.diff=function(s,b,k){var C,D=E.p(b),z=w(s),H=(z.utcOffset()-this.utcOffset())*i,A=this-z,L=E.m(this,z);return L=(C={},C[S]=L/12,C[v]=L,C[g]=L/3,C[f]=(A-H)/6048e5,C[u]=(A-H)/864e5,C[d]=A/a,C[r]=A/i,C[o]=A/n,C)[D]||A,k?L:E.a(L)},z.daysInMonth=function(){return this.endOf(v).$D},z.$locale=function(){return L[this.$L]},z.locale=function(n,i){if(!n)return this.$L;var a=this.clone(),s=T(n,i,!0);return s&&(a.$L=s),a},z.clone=function(){return E.w(this.$d,this)},z.toDate=function(){return new Date(this.valueOf())},z.toJSON=function(){return this.isValid()?this.toISOString():null},z.toISOString=function(){return this.$d.toISOString()},z.toString=function(){return this.$d.toUTCString()},M}(),O=Y.prototype;return w.prototype=O,[["$ms",s],["$s",o],["$m",r],["$H",d],["$W",u],["$M",v],["$y",S],["$D",b]].forEach((function(n){O[n[1]]=function(i){return this.$g(i,n[0],n[1])}})),w.extend=function(n,i){return n.$i||(n(i,Y,w),n.$i=!0),w},w.locale=T,w.isDayjs=p,w.unix=function(n){return w(1e3*n)},w.en=L[A],w.Ls=L,w.p={},w},n.exports=o()})),r=createCommonjsModule((function(n,i){var a,o;a=s,o=function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var i=["th","st","nd","rd"],a=n%100;return"["+n+(i[(a-20)%10]||i[a]||i[0])+"]"}}},n.exports=o()})),d=createCommonjsModule((function(n,i){var a,r;a=s,r=function(n){function e(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var i=e(n),a={name:"zh-tw",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(n,i){return"W"===i?n+"週":n+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"},meridiem:function(n,i){var a=100*n+i;return a<600?"凌晨":a<900?"早上":a<1100?"上午":a<1300?"中午":a<1800?"下午":"晚上"}};return i.default.locale(a,null,!0),a},n.exports=r(o)})),u=createCommonjsModule((function(n,i){var a,r;a=s,r=function(n){function _(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var i=_(n),a={name:"ja",weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(n){return n+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiem:function(n){return n<12?"午前":"午後"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}};return i.default.locale(a,null,!0),a},n.exports=r(o)})),f="undefined"!=typeof window?window:null,v=null===f,g=v?void 0:f.document,S="addEventListener",b="removeEventListener",k="getBoundingClientRect",C="_a",D="_b",z="_c",H="horizontal",NOOP=function(){return!1},A=v?"calc":["","-webkit-","-moz-","-o-"].filter((function(n){var i=g.createElement("div");return i.style.cssText="width:"+n+"calc(9px)",!!i.style.length})).shift()+"calc",isString=function(n){return"string"==typeof n||n instanceof String},elementOrSelector=function(n){if(isString(n)){var i=g.querySelector(n);if(!i)throw new Error("Selector "+n+" did not match a DOM element");return i}return n},getOption=function(n,i,a){var s=n[i];return void 0!==s?s:a},getGutterSize=function(n,i,a,s){if(i){if("end"===s)return 0;if("center"===s)return n/2}else if(a){if("start"===s)return 0;if("center"===s)return n/2}return n},defaultGutterFn=function(n,i){var a=g.createElement("div");return a.className="gutter gutter-"+i,a},defaultElementStyleFn=function(n,i,a){var s={};return isString(i)?s[n]=i:s[n]=A+"("+i+"% - "+a+"px)",s},defaultGutterStyleFn=function(n,i){var a;return(a={})[n]=i+"px",a},Split=function(n,i){if(void 0===i&&(i={}),v)return{};var a=n,s,o,r,d,u,A;Array.from&&(a=Array.from(a));var L,T=elementOrSelector(a[0]).parentNode,E=getComputedStyle?getComputedStyle(T):null,Y=E?E.flexDirection:null,O=getOption(i,"sizes")||a.map((function(){return 100/a.length})),x=getOption(i,"minSize",100),j=Array.isArray(x)?x:a.map((function(){return x})),R=getOption(i,"maxSize",1/0),N=Array.isArray(R)?R:a.map((function(){return R})),I=getOption(i,"expandToMin",!1),U=getOption(i,"gutterSize",10),F=getOption(i,"gutterAlign","center"),J=getOption(i,"snapOffset",30),B=Array.isArray(J)?J:a.map((function(){return J})),P=getOption(i,"dragInterval",1),W=getOption(i,"direction",H),q=getOption(i,"cursor",W===H?"col-resize":"row-resize"),V=getOption(i,"gutter",defaultGutterFn),X=getOption(i,"elementStyle",defaultElementStyleFn),Z=getOption(i,"gutterStyle",defaultGutterStyleFn);function setElementSize(n,i,a,o){var r=X(s,i,a,o);Object.keys(r).forEach((function(i){n.style[i]=r[i]}))}function setGutterSize(n,i,a){var o=Z(s,i,a);Object.keys(o).forEach((function(i){n.style[i]=o[i]}))}function getSizes(){return A.map((function(n){return n.size}))}function getMousePosition(n){return"touches"in n?n.touches[0][o]:n[o]}function adjust(n){var i=A[this.a],a=A[this.b],s=i.size+a.size;i.size=n/this.size*s,a.size=s-n/this.size*s,setElementSize(i.element,i.size,this[D],i.i),setElementSize(a.element,a.size,this[z],a.i)}function drag(n){var a,s=A[this.a],o=A[this.b];this.dragging&&(a=getMousePosition(n)-this.start+(this[D]-this.dragOffset),P>1&&(a=Math.round(a/P)*P),a<=s.minSize+s.snapOffset+this[D]?a=s.minSize+this[D]:a>=this.size-(o.minSize+o.snapOffset+this[z])&&(a=this.size-(o.minSize+this[z])),a>=s.maxSize-s.snapOffset+this[D]?a=s.maxSize+this[D]:a<=this.size-(o.maxSize-o.snapOffset+this[z])&&(a=this.size-(o.maxSize+this[z])),adjust.call(this,a),getOption(i,"onDrag",NOOP)(getSizes()))}function calculateSizes(){var n=A[this.a].element,i=A[this.b].element,a=n[k](),o=i[k]();this.size=a[s]+o[s]+this[D]+this[z],this.start=a[r],this.end=a[d]}function innerSize(n){if(!getComputedStyle)return null;var i=getComputedStyle(n);if(!i)return null;var a=n[u];return 0===a?null:a-=W===H?parseFloat(i.paddingLeft)+parseFloat(i.paddingRight):parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)}function trimToMin(n){var i=innerSize(T);if(null===i)return n;if(j.reduce((function(n,i){return n+i}),0)>i)return n;var a=0,s=[],o=n.map((function(o,r){var d=i*o/100,u=getGutterSize(U,0===r,r===n.length-1,F),f=j[r]+u;return d<f?(a+=f-d,s.push(0),f):(s.push(d-f),d)}));return 0===a?n:o.map((function(n,o){var r=n;if(a>0&&s[o]-a>0){var d=Math.min(a,s[o]-a);a-=d,r=n-d}return r/i*100}))}function stopDragging(){var n=this,a=A[n.a].element,s=A[n.b].element;n.dragging&&getOption(i,"onDragEnd",NOOP)(getSizes()),n.dragging=!1,f[b]("mouseup",n.stop),f[b]("touchend",n.stop),f[b]("touchcancel",n.stop),f[b]("mousemove",n.move),f[b]("touchmove",n.move),n.stop=null,n.move=null,a[b]("selectstart",NOOP),a[b]("dragstart",NOOP),s[b]("selectstart",NOOP),s[b]("dragstart",NOOP),a.style.userSelect="",a.style.webkitUserSelect="",a.style.MozUserSelect="",a.style.pointerEvents="",s.style.userSelect="",s.style.webkitUserSelect="",s.style.MozUserSelect="",s.style.pointerEvents="",n.gutter.style.cursor="",n.parent.style.cursor="",g.body.style.cursor=""}function startDragging(n){if(!("button"in n)||0===n.button){var a=this,s=A[a.a].element,o=A[a.b].element;a.dragging||getOption(i,"onDragStart",NOOP)(getSizes()),n.preventDefault(),a.dragging=!0,a.move=drag.bind(a),a.stop=stopDragging.bind(a),f[S]("mouseup",a.stop),f[S]("touchend",a.stop),f[S]("touchcancel",a.stop),f[S]("mousemove",a.move),f[S]("touchmove",a.move),s[S]("selectstart",NOOP),s[S]("dragstart",NOOP),o[S]("selectstart",NOOP),o[S]("dragstart",NOOP),s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",a.gutter.style.cursor=q,a.parent.style.cursor=q,g.body.style.cursor=q,calculateSizes.call(a),a.dragOffset=getMousePosition(n)-a.end}}W===H?(s="width",o="clientX",r="left",d="right",u="clientWidth"):"vertical"===W&&(s="height",o="clientY",r="top",d="bottom",u="clientHeight"),O=trimToMin(O);var G=[];function adjustToMin(n){var i=n.i===G.length,a=i?G[n.i-1]:G[n.i];calculateSizes.call(a);var s=i?a.size-n.minSize-a[z]:n.minSize+a[D];adjust.call(a,s)}function setSizes(n){var i=trimToMin(n);i.forEach((function(n,a){if(a>0){var s=G[a-1],o=A[s.a],r=A[s.b];o.size=i[a-1],r.size=n,setElementSize(o.element,o.size,s[D],o.i),setElementSize(r.element,r.size,s[z],r.i)}}))}function destroy(n,i){G.forEach((function(a){if(!0!==i?a.parent.removeChild(a.gutter):(a.gutter[b]("mousedown",a[C]),a.gutter[b]("touchstart",a[C])),!0!==n){var o=X(s,a.a.size,a[D]);Object.keys(o).forEach((function(n){A[a.a].element.style[n]="",A[a.b].element.style[n]=""}))}}))}return(A=a.map((function(n,i){var s={element:elementOrSelector(n),size:O[i],minSize:j[i],maxSize:N[i],snapOffset:B[i],i:i},o;if(i>0&&((o={a:i-1,b:i,dragging:!1,direction:W,parent:T})[D]=getGutterSize(U,i-1==0,!1,F),o[z]=getGutterSize(U,!1,i===a.length-1,F),"row-reverse"===Y||"column-reverse"===Y)){var r=o.a;o.a=o.b,o.b=r}if(i>0){var d=V(i,W,s.element);setGutterSize(d,U,i),o[C]=startDragging.bind(o),d[S]("mousedown",o[C]),d[S]("touchstart",o[C]),T.insertBefore(d,s.element),o.gutter=d}return setElementSize(s.element,s.size,getGutterSize(U,0===i,i===a.length-1,F),i),i>0&&G.push(o),s}))).forEach((function(n){var i=n.element[k]()[s];i<n.minSize&&(I?adjustToMin(n):n.minSize=i)})),{setSizes:setSizes,getSizes:getSizes,collapse:function collapse(n){adjustToMin(A[n])},destroy:destroy,parent:T,pairs:G}};function splitInit(n){let{el:i,sizes:a=[20,80],minSize:s=350,gutterSize:o=2}=n;const r=Split(i,{sizes:a,minSize:s,expandToMin:!0,gutterSize:o,onDragEnd(n){n=n.filter((n=>isNaN(+n))).length?[20,80]:n.map((n=>+n))}});return r.setSizes(a),r}var L={tw:{today:"今日",day:"日",addnew_onder:"新增訂單",continuous_display:"連續顯示",autoassign_room:"自動排房",whole_building:"包棟",stock_notset:"無庫存"},en:{today:"Today",day:"Day",addnew_onder:"New Order",continuous_display:"Continuous View",autoassign_room:"Automatic Room Assignment",whole_building:"Whole Building",stock_notset:"No Inventory Setup"},ja:{today:"今日",day:"日",addnew_onder:"注文の追加",continuous_display:"続けて表示する",autoassign_room:"自動で部屋を割り当て",whole_building:"建物全体",stock_notset:"在庫なし"}};const T={guid(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return[s4()+s4(),s4(),s4(),s4(),s4(),s4()+s4()].join("-")},cookies:{get(n){const i=document.cookie.split(";"),a={};return i.map((n=>{const i=n.trim().split("=");a[i[0]]=i[1]})),void 0===n?a:void 0===a[n]?void 0:decodeURIComponent(a[n])},del(n){this.cookies.set(n,"",-1)},set(n){if(void 0!==n){void 0===n.days&&(n.days=15);let i="";const a=new Date;a.setDate(a.getDate()+n.days),i=`expires=${a.toUTCString()};`;let s="";void 0!==n.domain&&(s=`domain=${n.domain};`);let o="SameSite=Lax;";void 0!==n.SameSite&&(o=`SameSite=${n.SameSite};`),document.cookie=`${n.key}=${encodeURIComponent(n.val)};${o}path=/;${i};${s}`}}},formatLang(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=null==n?void 0:n.toLowerCase();switch(i){case"cn":case"zh_cn":case"zh-cn":i="cn";break;case"en":case"en_us":case"en-us":i="en";break;case"tw":case"zh_tw":case"zh-tw":i="tw"}return i}};var E={name:"ComponentsItem",components:{},props:{loading:{type:Boolean,default:!1},data:{type:Object,default:()=>({})},continuous:{type:Boolean,default:!1}},data:()=>({}),computed:{colSpan(){let n=null;if(this.continuous&&this.data.items.length>1){const i=this.data.items.indexOf(this.data._uid);n=["colspan-"+(this.data.items.length-i)].join(" ")}return n}},mounted(){},methods:{hasSlot(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return!!this.$slots[n]||!!this.$scopedSlots[n]},clickHandler(){this.$emit("click",this.data)},assignClickHandler(n){n.stopPropagation(),this.$emit("assign",this.data)},paymentStatusIcon(n){let i="fa-regular fa-credit-card";switch(n){case"deposit_unpaid":i="fa-solid fa-circle-exclamation fa-fw";break;case"unpaid":i="fa-regular fa-calendar-check"}return i}}},Y=void 0,O=void 0;function normalizeComponent(n,i,a,s,o,r,d,u,f,v){"boolean"!=typeof d&&(f=u,u=d,d=!1);const g="function"==typeof a?a.options:a;let S;if(n&&n.render&&(g.render=n.render,g.staticRenderFns=n.staticRenderFns,g._compiled=!0,o&&(g.functional=!0)),s&&(g._scopeId=s),r?(S=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),i&&i.call(this,f(n)),n&&n._registeredComponents&&n._registeredComponents.add(r)},g._ssrRegister=S):i&&(S=d?function(n){i.call(this,v(n,this.$root.$options.shadowRoot))}:function(n){i.call(this,u(n))}),S)if(g.functional){const n=g.render;g.render=function renderWithStyleInjection(i,a){return S.call(a),n(i,a)}}else{const n=g.beforeCreate;g.beforeCreate=n?[].concat(n,S):[S]}return a}const x=E;var __vue_render__$4=function(){var n=this,i=n.$createElement,a=n._self._c||i;return a("div",{staticClass:"components-item",class:[n.data.checked_status,{assign:n.data.assign,unassign:!n.data.assign,continuous:n.continuous},n.colSpan],attrs:{"data-type":"item","data-item-uid":n.data._uid,"data-items":n.data.items,draggable:"true","data-order":n.data.order},on:{dragstart:function(i){return n.$emit("dragstart",i)},click:n.clickHandler}},[a("b-overlay",{attrs:{"spinner-variant":"primary",show:n.loading}},[n.hasSlot("slot-item-info")?[n._t("slot-item-info",null,{scope:n.data})]:[n._v("\n      "+n._s(n.data.title)+",\n      "+n._s(n.data.start)+"-"+n._s(n.data.end)+",\n      "+n._s(n.data.assign)+"\n    ")],n._v(" "),a("div",{staticClass:"assign-button",on:{click:n.assignClickHandler}},[a("i",{staticClass:"fas fa-chevron-circle-right"})])],2)],1)},j=[];__vue_render__$4._withStripped=!0;const R=undefined,N=undefined,I=undefined,U=undefined,F=undefined;var J={name:"ComponentsScheduler",components:{orderItem:normalizeComponent({render:__vue_render__$4,staticRenderFns:j},void 0,x,"data-v-c359a138",!1,void 0,!1,void 0,void 0,void 0)},props:{loading:{type:Boolean,default:!1},locale:{type:String,default:"en"},range:{type:Object,default:()=>({})},resource:{type:Array,default:()=>[]},stock:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},holiday:{type:Array,default:()=>[]},format:{type:String,default:"YYYY-MM-DD"},defaultHoliday:{type:Array,default:()=>[6,0]},allowChangeDate:{type:Boolean,default:!1},allowChangeType:{type:Boolean,default:!1},allowEdit:{type:Boolean,default:!1},allowContinuous:{type:Boolean,default:!1},allowAutoAssign:{type:Boolean,default:!1},marginTop:{type:Number,default:0}},data:()=>({cname:"resource-item",grouping:{},mousePosition:0}),computed:{dict(){return L[this.lang]||L.en},lang(){return T.formatLang(this.locale)},now(){return o().format(this.format)},resourceList:{get(){return this.resource},set(n){this.$emit("update:resource",n)}},itemList:{get(){const n=this.deepCopy(this.items);return n.sort(((n,i)=>n.start===i.start?0:n.start>i.start?1:-1)),n},set(n){this.$emit("update:items",n)}},viewCount(){const n=o(this.range.start),i=undefined,a=undefined;return o(this.range.end).diff(n,"days")+1},dates(){const n=[...new Array(this.viewCount)].fill({}),i={};let a="";const s=n.map(((n,s)=>{const r=o(this.range.start).add(s,"days"),d=r.format(this.format),u=this.holiday.find((n=>n.date===d)),f=r.format("MM"),v=a!==f;return v&&(a=f),i[f]||(i[f]=0),i[f]++,{active:v,date:d,year:r.format("YYYY"),month:f,day:r.format("D"),week:r.format("dd"),...u?{holiday:u.display_name}:{}}}));return s.forEach((n=>{n.active&&(n.cols=i[n.month])})),s},dataResult(){const n={},i={};this.itemList.forEach((a=>{i[a.order_group]||(i[a.order_group]={}),void 0===a._uid&&(a._uid=T.guid());const s=this.grouping[a._uid],o=this.allowAutoAssign||a.assign?a.room_number_id:null;let r=[a.room_type,o,s].join();const d=i[a.order_group][r];if(d){const s=d[d.length-1].end;d.length>0&&(d[0].start===a.start||s!==a.start)&&(n[r]||(n[r]=r+a.end),r=n[r]||r,i[a.order_group][r]||(i[a.order_group][r]=[]))}else i[a.order_group][r]=[];i[a.order_group][r].push(a)}));const a=this.deepCopy(this.itemList),s=this.checkOverwrite(a),o=[],r={};this.itemList.forEach((n=>{let a=this.allowAutoAssign||n.assign?n.room_number_id:null;if(s.length){const i=[n.start,n.room_type,n.room_number_id].join(),r=undefined;s.includes(i)&&(o.includes(i)?(a=null,n.room_number_id=null,n.title=`*${n.title}`):o.push(i))}const d=[n.start,n.room_type,a].join();r[d]||(r[d]=[]);let u=[];const f=Object.entries(i[n.order_group]).findIndex((i=>{let[a,s]=i;return s.find((i=>i._uid===n._uid))}));-1!==f&&(u=Object.entries(i[n.order_group])[f][1].map((n=>n._uid))),r[d].push({...n,items:u})}));const d={};return Object.entries(r).forEach((n=>{let[i,a]=n;a.sort(((n,i)=>{const a=n.items.join(),s=i.items.join();switch(`${!!d[a]}${!!d[s]}`){case"truetrue":return 0;case"truefalse":return-1;case"falsetrue":return 1}return n.items.length===i.items.length?0:n.items.length>i.items.length?-1:1})),a.forEach(((n,i)=>{if(n.items.length){const i=n.items.join();d[i]||(d[i]=this.getMinOrder(a,d),Object.entries(r).forEach((n=>{let[a,s]=n;s.forEach(((n,a)=>{const s=undefined;n.items.join()===i&&(n.order=d[i])}))})))}}))})),r},dateOpenList(){const n={};return this.dates.forEach((i=>{n[i]=this.getStock(i.date).full})),n}},watch:{items:{handler(){setTimeout((()=>{this.updateRowspan()}))},immediate:!0,deep:!0},allowAutoAssign:{handler(){setTimeout((()=>{this.updateRowspan()}))},immediate:!1,deep:!0},range:{handler(){this.resourceList.forEach((n=>{delete n.layout})),setTimeout((()=>{this.updateRowspan()}))},immediate:!1,deep:!0}},mounted(){setTimeout((()=>{this.updateRowspan(),this.scrollEventSet()}))},methods:{hasSlot(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return!!this.$slots[n]||!!this.$scopedSlots[n]},isActive:n=>void 0===n.active||n.active,isAllActive(n){return this.isActive(n)&&(void 0===n.waitActive||n.waitActive)},updateItemPosition(){const n=this.deepCopy(this.itemList);n.forEach((n=>{const i=document.querySelector(`[data-item-uid="${n._uid}"]`);if(i){const{left:a,right:s}=i.getBoundingClientRect();n.left=a.toFixed(0),n.right=s.toFixed(0)}})),this.itemList=n},mousedownHandler(n){this.mousePosition=n.x},i18n(n){return this.dict[n]},scrollEventSet(){const n=document.querySelector(".components-resource .resource-header.stuck"),i=document.querySelector(".components-scheduler .scheduler-header.stuck");n&&i&&(window.addEventListener("scroll",(()=>{this.offsetY=i.getBoundingClientRect().top+1-this.marginTop}),{once:!0}),window.addEventListener("scroll",(()=>{const a=undefined,s=this.getScroll().top-this.offsetY;i.style.top=s>0?`${s}px`:0,n.style.top=i.style.top})))},getScroll(){const n=document.body,i=document.documentElement,a=parseFloat(window.pageYOffset||n.scrollTop||i.scrollTop);return{top:a,bottom:n.clientHeight-window.innerHeight-a}},getStock(n,i){var a;return(null===(a=this.stock[i])||void 0===a?void 0:a[n])||{}},checkStock(n,i){const a=undefined;return void 0!==this.getStock(n,i).stock},checkLock(n,i){const a=this.getStock(n,i);return void 0!==a.open&&!a.open},getAllStockFull(n){let i=!1;return Object.entries(this.stock).forEach((a=>{let[s,o]=a;var r;i||(i=!(null===(r=o[n])||void 0===r||!r.full))})),i},getMinOrder(n,i){let a=1;if(n.length>1){const s=n.map((n=>i[n.items.join()])).filter((n=>n));for(;s.includes(a);)a++}return a},waitDataResult(n){const i=this.dataResult[n]||[];return i.sort(((n,i)=>n.order===i.order?0:n.order>i.order?1:-1)),i},deepCopy:n=>JSON.parse(JSON.stringify(n)),isToday(n){return n===this.now},isWeekend(n){return this.defaultHoliday.includes(o(n).day())},isHoliday(n){const i=this.holiday.find((i=>i.date===n));return(null==i?void 0:i.display_name)||""},dateTooltip(n){const i=[n],a=this.isToday(n),s=this.isHoliday(n);return a&&i.push(`(${this.i18n("today")})`),s&&i.push(`(${s})`),i.join("")},dateClickHandler(n){this.$emit("click",{type:"date",value:n})},stockClickHandler(n){const{date:i,room:a,num:s}=n;this.$emit("click",{type:"stock",value:{...this.getStock(i,a)}})},orderClickHandler(n){this.$emit("click",{type:"order",value:n})},assignClickHandler(n){this.$emit("assign",{type:"assign",value:n})},itemClickHandler(n){const{date:i,room:a,num:s,full:o}=n;this.allowEdit&&!o&&this.$emit("click",{type:"item",value:n})},dragStartHandler(n){var i;const a=n.target.parentNode.dataset,s=null===(i=n.target)||void 0===i?void 0:i.dataset;if(null!=s&&s.itemUid){const i={...a,itemUid:s.itemUid,items:s.items};this.dragTarget=i,n.dataTransfer.setData("text/plain",JSON.stringify(i)),n.dataTransfer.effectAllowed="move"}n.target.style.background="#f2f2f2"},dragOverHandler(n){n.preventDefault()},dragLeaveHandler(n){n.preventDefault(),n.target.style.background=""},dragEnterHandler(n){n.preventDefault();const i=n.target.dataset.type,a=n.target.dataset.id,s=n.target.querySelectorAll(".components-item").length;!a||"wait"!==i&&s||(n.target.style.background="#f2f2f2"),n.target.style.pointerEvents="","item"===i&&(n.target.style.pointerEvents="none"),setTimeout((()=>{this.clearPointerEvents()}),1e3)},dropHandler(n){if(n.preventDefault(),n.target.style.background="",!this.allowChangeType)try{const i=undefined,a=(JSON.parse(n.dataTransfer.getData("text/plain")).id||"").split(",")[0],s=undefined;if(a!==(n.target.dataset.id||"").split(",")[0])return void this.updateRowspan()}catch(n){return}const i=n.target.dataset.type,a=undefined;if(n.target.dataset.id){const a=n.target.querySelectorAll(".components-item").length,s="wait"!==i;try{const r=JSON.parse(n.dataTransfer.getData("text/plain")),{itemUid:d,items:u}=r,{date:f,id:v}=n.target.dataset,[g,S]=v.split(",").map((n=>+n));if("wait"===i||!a||v===r.id){const i=this.deepCopy(this.itemList);if(this.allowContinuous){const n=u.split(",");let a=0;if(this.allowChangeDate){let s=-1,r=Number.MAX_SAFE_INTEGER;n.forEach(((n,a)=>{const o=i.findIndex((i=>i._uid===n)),d=+i[o].left,u=this.mousePosition-d;u>0&&u<r&&(r=u,s=a)}));const d=i.findIndex((i=>i._uid===n[s]));a=o(f).diff(o(i[d].start),"days")}n.forEach((n=>{const r=i.findIndex((i=>i._uid===n));i[r].assign=s,i[r].room_type=g,i[r].room_number_id=S||null,a&&(i[r].start=o(i[r].start).add(a,"days").format(this.format),i[r].end=o(i[r].end).add(a,"days").format(this.format))}))}else{const a=i.findIndex((n=>n._uid===d));i[a].assign=s,i[a].room_type=g,i[a].room_number_id=S||null;const r=o(f).diff(o(i[a].start),"days");if(!this.allowChangeDate)try{const i=JSON.parse(n.dataTransfer.getData("text/plain")),a=n.target.dataset.date;if(i.date&&i.date!==a)return void this.updateRowspan()}catch(n){return}r&&(i[a].start=f,i[a].end=o(i[a].end).add(r,"days").format(this.format))}const a=this.checkOverwrite(i);if(a.length){const n=a[0].split(","),i=document.querySelector(['[data-type="content"]',`[data-date="${n[0]}"]`,`[data-id="${[n[1],n[2]].join()}"]`].join(""));i&&(i.classList.add("easeInAnim"),setTimeout((()=>{i.classList.remove("easeInAnim")}),500))}else setTimeout((()=>{this.itemList=i,this.$emit("drop",{itemUid:d,date:f,room:g,...S?{num:S}:null,items:u})}))}}catch(n){return}}setTimeout((()=>{this.grouping={},this.updateRowspan()}))},clearPointerEvents(){document.querySelectorAll(".components-item").forEach((n=>{n.style.pointerEvents=""}))},updateRowspan(){if(this.debounceSettimeoutUpdateRowspan)return;clearTimeout(this.debounceSettimeoutUpdateRowspan),this.debounceSettimeoutUpdateRowspan=setTimeout((()=>{delete this.debounceSettimeoutUpdateRowspan}),100);const n=this.deepCopy(this.resourceList);n.forEach(((i,a)=>{delete n[a].layout}));const i=[],a=[`.${this.cname} [data-type="wait"]`,`.${this.cname} [data-type="content"]`].join();document.querySelectorAll(a).forEach((a=>{const s=a.querySelectorAll(".components-item").length,o=a.dataset.id,r=o.split(",")[0],d=o.split(",")[1],u=n.findIndex((n=>n.id===+r));if(-1!==u){const a=n[u];a.layout||(a.layout={}),a.layout[d]||(a.layout[d]={rowspan:0}),"wait"===d&&(i[r]||(i[r]=0),i[r]+=s,a.layout[d].waitRowspan=i[r]),a.layout[d].rowspan=Math.max(a.layout[d].rowspan,s),this.allowAutoAssign&&(a.waitActive=!0),n[u]=a}})),this.resourceList=n,setTimeout((()=>{this.clearPointerEvents(),this.updateItemPosition()}))},checkOverwrite(n){const i=this.deepCopy(n),a={};return this.allowAutoAssign||i.forEach((n=>{n.assign||(n.room_number_id=null)})),i.filter((n=>n.room_number_id)).forEach((n=>{const i=[n.start,n.room_type,n.room_number_id].join();a[i]||(a[i]=[]),a[i].push(n)})),[...new Set(Object.entries(a).map((n=>n[1])).filter((n=>n.length>1)).flat().map((n=>[n.start,n.room_type,n.room_number_id].join())))]},parseLayoutInfo(n,i){var a,s;return(null==n||null===(a=n.layout)||void 0===a||null===(s=a[i])||void 0===s?void 0:s.rowspan)||1}}},B=void 0;const P=J;var __vue_render__$3=function(){var n=this,i=n.$createElement,a=n._self._c||i;return a("div",{staticClass:"components-scheduler"},[a("b-overlay",{class:"view-"+n.viewCount,attrs:{"spinner-variant":"primary",show:n.loading}},[a("b-form-row",{staticClass:"scheduler-header stuck"},[a("b-col",{attrs:{cols:"12"}},[a("ul",{staticClass:"months"},n._l(n.dates,(function(i,s){return a("li",{key:"months_"+s,attrs:{title:i.year+"/"+i.month}},[a("div",{class:[{active:i.active},i.cols?"colspan-"+i.cols:""]},[n._v("\n              "+n._s(i.year)+"/"+n._s(i.month)+"\n            ")])])})),0)]),n._v(" "),a("b-col",{attrs:{cols:"12"}},[a("ul",{staticClass:"dates"},n._l(n.dates,(function(i,s){return a("li",{key:"dates_"+s,class:["cursor-pointer",{today:n.isToday(i.date),holiday:n.isHoliday(i.date),weekend:n.isWeekend(i.date)}],attrs:{id:"dates_"+s,boundary:"document"},on:{click:function(a){return n.dateClickHandler(i.date)}}},[a("div",[a("span",[n._v(n._s(i.week)+" "+n._s(i.day))]),n._v(" "),n.getAllStockFull(i.date)?a("small",{staticClass:"wb-icon"},[n._v("\n                "+n._s(n.i18n("whole_building"))+"\n              ")]):n._e()]),n._v(" "),a("b-tooltip",{attrs:{target:"dates_"+s,"custom-class":"b-tooltip-class",placement:"top",triggers:"hover",boundary:"document"}},[n._v("\n              "+n._s(n.dateTooltip(i.date))+"\n            ")])],1)})),0)])],1),n._v(" "),n._l(n.resourceList,(function(i,s){return[a("b-form-row",{key:"contents_"+s,staticClass:"contents-row stock"},[a("b-col",{class:n.cname,attrs:{cols:"12"}},[a("ul",{staticClass:"contents stock"},n._l(n.dates,(function(o,r){return a("li",{key:"contents_"+s+"_"+r,class:{full:n.getStock(o.date,i.id).full,"stock-notset":!n.checkStock(o.date,i.id)}},[a("div",{on:{click:function(a){return n.stockClickHandler({date:o.date,room:i.id})}}},[n.checkLock(o.date,i.id)?a("small",{staticClass:"lock-icon"},[a("i",{staticClass:"fa-solid fa-lock"})]):n._e(),n._v(" "),n.checkStock(o.date,i.id)?a("span",[n._v("\n                  "+n._s(n.getStock(o.date,i.id).stock)+"\n                ")]):a("small",[n._v("\n                  "+n._s(n.i18n("stock_notset"))+"\n                ")])])])})),0)])],1),n._v(" "),a("b-form-row",{key:"contents_wait_"+s,class:["contents-row collapse-wait",{active:n.isAllActive(i)}]},[a("b-col",{class:[n.cname,"rowspan-1","rowspan-"+n.parseLayoutInfo(i,"wait")],attrs:{cols:"12"}},[a("ul",{staticClass:"contents wait"},n._l(n.dates,(function(o,r){return a("li",{key:"contents_wait_"+s+"_"+r,class:{full:n.getStock(o.date,i.id).full}},[a("div",{attrs:{"data-type":"wait",droppable:"true","data-date":o.date,"data-id":[i.id,"wait"].join()},on:{dragenter:n.dragEnterHandler,dragleave:n.dragLeaveHandler,dragover:n.dragOverHandler,drop:n.dropHandler,click:function(a){if(a.target!==a.currentTarget)return null;n.itemClickHandler({date:o.date,room:i.id,num:"wait",full:n.getStock(o.date,i.id).full})},mousedown:n.mousedownHandler}},[n._l(n.waitDataResult([o.date,i.id,""].join()),(function(i,s){return[a("order-item",{key:"order-item_"+s,class:"item-order-"+i.order,attrs:{data:i,continuous:n.allowContinuous},on:{dragstart:n.dragStartHandler,click:n.orderClickHandler,assign:n.assignClickHandler},scopedSlots:n._u([n.hasSlot("slot-item-info")?{key:"slot-item-info",fn:function(i){var a=i.scope;return[n._t("slot-item-info",null,{scope:a})]}}:null],null,!0)})]}))],2)])})),0)])],1),n._v(" "),n._l(i.children,(function(o,r){return a("b-form-row",{key:"contents_"+s+"_"+r,class:["contents-row collapse",{active:n.isActive(i)}]},[a("b-col",{class:n.cname,attrs:{cols:"12"}},[a("ul",{staticClass:"contents"},n._l(n.dates,(function(d,u){return a("li",{key:"contents_"+s+"_"+r+"_"+u,class:{full:n.getStock(d.date,i.id).full}},[a("div",{attrs:{"data-type":"content","data-date":d.date,"data-id":[i.id,o.id].join()},on:{dragenter:n.dragEnterHandler,dragleave:n.dragLeaveHandler,dragover:n.dragOverHandler,drop:n.dropHandler,click:function(a){if(a.target!==a.currentTarget)return null;n.itemClickHandler({date:d.date,room:i.id,num:o.id,full:n.getStock(d.date,i.id).full})},mousedown:n.mousedownHandler}},[n._l(n.dataResult[[d.date,i.id,o.id].join()]||[],(function(i,s){return[a("order-item",{key:"order-item_"+s,attrs:{data:i,continuous:n.allowContinuous},on:{dragstart:n.dragStartHandler,click:n.orderClickHandler,assign:n.assignClickHandler},scopedSlots:n._u([n.hasSlot("slot-item-info")?{key:"slot-item-info",fn:function(i){var a=i.scope;return[n._t("slot-item-info",null,{scope:a})]}}:null],null,!0)})]}))],2)])})),0)])],1)}))]}))],2)],1)},W=[];__vue_render__$3._withStripped=!0;const q=undefined,V=undefined,X=undefined,Z=undefined,G=normalizeComponent({render:__vue_render__$3,staticRenderFns:W},void 0,P,"data-v-407631fc",!1,void 0,!1,void 0,void 0,void 0);var K={name:"ComponentsResource",components:{},props:{debug:{type:Boolean,default:!1},headerTitle:{type:String,default:"Header Title"},waitTitle:{type:String,default:"Wait Title"},data:{type:Array,default:()=>[]}},data:()=>({pageLoad:!1,expandAll:!0}),computed:{dataList:{get(){const n=undefined;return[...this.data.map((n=>({...n,active:void 0===n.active||n.active,waitActive:void 0===n.waitActive||n.waitActive})))]},set(n){this.$emit("update:data",n)}},isAllExpand(){return!this.dataList.some((n=>!n.active))},isAllCollapse(){return!this.dataList.some((n=>n.active))}},mounted(){const n=this.dataList.map((n=>({...n,active:void 0===n.active||n.active})));this.pageLoad||(this.pageLoad=!0,this.dataList=n)},methods:{hasSlot(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return!!this.$slots[n]||!!this.$scopedSlots[n]},collapseAllClickHandler(){this.expandAll=!this.expandAll,this.dataList.forEach((n=>{n.active=this.expandAll})),this.dataList=[...this.dataList]},collapseWaitClickHandler(n){const i=this.dataList;i[n].waitActive=!i[n].waitActive,this.dataList=i},collapseClickHandler(n){const i=this.dataList;i[n].active=!i[n].active,this.dataList=i,this.isAllCollapse&&(this.expandAll=!1),this.isAllExpand&&(this.expandAll=!0)},parseLayoutInfo(n,i){var a,s;return(null==n||null===(a=n.layout)||void 0===a||null===(s=a[i])||void 0===s?void 0:s.rowspan)||1}}},Q=void 0,tt=void 0;const et=K;var __vue_render__$2=function(){var n=this,i=n.$createElement,a=n._self._c||i;return a("div",{staticClass:"components-resource"},[a("div",{staticClass:"resource-header stuck"},[a("span",{staticClass:"arrow-icon",class:{active:n.expandAll},on:{click:function(i){return n.collapseAllClickHandler()}}},[a("i",{staticClass:"fa-solid fa-angles-down"}),n._v(" "+n._s(n.headerTitle)+"\n    ")])]),n._v(" "),n._l(n.dataList,(function(i,s){return[a("b-form-row",{key:s,staticClass:"resource-type"},[a("b-col",{staticClass:"resource-item",attrs:{cols:"12"}},[a("b-form-row",{staticClass:"append-item"},[a("b-col",{staticClass:"label p-0",attrs:{"data-id":i.id}},[a("span",{staticClass:"arrow-icon",class:{active:i.active},on:{click:function(i){return n.collapseClickHandler(s)}}},[a("i",{staticClass:"fa-solid fa-angle-down"}),n._v(" "),a("span",{staticClass:"pl-1"},[n._v(n._s(i.name))])]),n._v(" "),n.parseLayoutInfo(i,"wait")>1?[a("b-badge",{staticClass:"b-badge-class",attrs:{id:"badge_"+s},on:{click:function(i){return n.collapseWaitClickHandler(s)}}},[n._v("\n                "+n._s(i.layout.wait.waitRowspan)+"\n              ")]),n._v(" "),a("b-tooltip",{attrs:{target:"badge_"+s,"custom-class":"b-tooltip-class",placement:"topright",triggers:"hover",boundary:"document"}},[n._v("\n                "+n._s(n.waitTitle)+"\n              ")])]:n._e()],2),n._v(" "),i.extend?[a("b-col",{attrs:{cols:"auto"}},[n._v("\n              "+n._s(i.extend)+"\n            ")])]:n._e()],2)],1)],1),n._v(" "),a("b-form-row",{key:"contents_wait_"+s,staticClass:"contents-row collapse-wait",class:{active:i.active&&i.waitActive}},[a("b-col",{staticClass:"resource-children-item",class:["rowspan-1","rowspan-"+n.parseLayoutInfo(i,"wait")],attrs:{cols:"12"}},[a("b-form-row",{staticClass:"append-item"},[a("b-col",{staticClass:"label"},[a("span",{staticClass:"pl-3"},[n._v(n._s(n.waitTitle))])])],1)],1)],1),n._v(" "),n._l(i.children,(function(o,r){return a("b-form-row",{key:"contents_"+s+"_"+r,staticClass:"contents-row collapse",class:{active:i.active}},[a("b-col",{staticClass:"resource-children-item",attrs:{cols:"12"}},[a("b-form-row",{staticClass:"append-item"},[a("b-col",{staticClass:"label",attrs:{"data-id":o.id,"data-rowspan":n.parseLayoutInfo(i,o.id)}},[a("span",{staticClass:"pl-3"},[n._v(n._s(o.name))])]),n._v(" "),n.hasSlot("slot-resource-info")?[a("b-col",{attrs:{cols:"auto"}},[n._t("slot-resource-info",null,{scope:o})],2)]:n._e()],2)],1)],1)}))]}))],2)},nt=[];__vue_render__$2._withStripped=!0;const it=undefined,at=undefined,st=undefined,ot=undefined,rt=normalizeComponent({render:__vue_render__$2,staticRenderFns:nt},void 0,et,"data-v-6f3bd794",!1,void 0,!1,void 0,void 0,void 0);var lt=void 0,dt=void 0;a.default.use(i.FormCheckboxPlugin),a.default.use(i.OverlayPlugin);var ut,ct=void 0,ht=void 0;const ft={name:"ComponentSwitchButton",props:{value:{type:Boolean,default:!1},size:{type:String,default:"lg"},loading:{type:Boolean,default:!1}},computed:{result:{get(){return this.value},set(n){this.$emit("input",n)}}}};var __vue_render__$1=function(){var n=this,i=n.$createElement,a=n._self._c||i;return a("div",{staticClass:"component-switch-button"},[a("b-overlay",{staticClass:"d-inline-block w-100",attrs:{show:n.loading,"spinner-small":"","spinner-variant":"primary"}},[a("b-form-checkbox",{attrs:{switch:"",size:n.size},scopedSlots:n._u([{key:"default",fn:function(){return[n._t("default")]},proxy:!0}],null,!0),model:{value:n.result,callback:function(i){n.result=i},expression:"result"}})],1)],1)},pt=[];__vue_render__$1._withStripped=!0;const mt=undefined,vt=undefined,gt=undefined,yt=undefined,_t=normalizeComponent({render:__vue_render__$1,staticRenderFns:pt},void 0,ft,"data-v-564d9b1d",!1,void 0,!1,void 0,void 0,void 0),wt={};["allowEdit","allowContinuous","allowAutoAssign"].forEach((n=>{wt[`options.${n}`]=function(i){T.cookies.set({key:n,val:i})}}));var St={name:"ComponentsCalendar",components:{scheduler:G,resourceMenu:rt,SwitchButton:_t},props:{loading:{type:Boolean,default:!1},resource:{type:Array,default:()=>[]},stock:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},data(){return{isMobile:window.innerWidth<992,defaultData:{hotkey:!0,defaultDate:this.now().format(this.format),defaultView:7,previewDay:1,locale:"en",views:[3,7,15,30],format:"YYYY-MM-DD"},selected:{startDate:this.now().format(this.format),count:7},vCalendarAttrs:[{key:"today",highlight:{fillMode:"light"},dates:this.now().format(this.format)}],updateViewEvent:null}},computed:{dict(){return L[this.lang]||L.en},holiday(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.holiday},stockData:{get(){return this.stock},set(n){this.$emit("update:stock",n)}},itemList:{get(){return this.items},set(n){this.$emit("update:items",n)}},resourceData:{get(){return this.resource},set(n){this.$emit("update:resource",n)}},optionsData:{get(){return{...this.defaultData,...this.options}},set(n){this.$emit("update:options",n)}},marginTop(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.marginTop)||0)},allowChangeDate(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowChangeDate)||!1)},allowChangeType(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowChangeType)||!1)},allowEdit(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowEdit)||!1)},allowContinuous(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowContinuous)||!1)},allowAutoAssign(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowAutoAssign)||!1)},allowHotkey(){var n;return!(null===(n=this.optionsData)||void 0===n||!n.hotkey)},headerText(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.headerTitle},waitText(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.waitTitle},format(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.format},views(){var n;const i=undefined;return((null===(n=this.optionsData)||void 0===n?void 0:n.views)||[]).map((n=>({active:this.selected.count===n,value:n})))},lang(){return T.formatLang(this.locale)},locale(){var n;return(null===(n=this.optionsData)||void 0===n?void 0:n.locale)||"en"},previewDay(){var n;return-1*((null===(n=this.optionsData)||void 0===n?void 0:n.previewDay)||0)},dateRange(){const n=this.selected.startDate,i=this.selected.count||1,a=undefined,s=undefined;return{start:o(n).format(this.format),end:o(n).add(i-1,"days").format(this.format)}},vCaleLocale(){let n=this.locale||"en-US";switch(n.toLowerCase()){case"ja_jp":case"ja-jp":case"jajp":case"ja":case"jp":n="ja";break;case"zh_tw":case"zh-tw":case"zhtw":case"tw":n="zh-TW";break;default:n="en-US"}return n},schedulerRef(){var n;return(null===(n=this.$refs)||void 0===n?void 0:n.scheduler)||{}}},watch:{...wt,locale(){this.dayJsLocale(this.locale)},selected:{handler(){let{count:n,startDate:i}=this.selected;i=o(i).format(this.format);const a=undefined,s={start:i,end:o(i).add(n-1,"days").format(this.format),count:n};this.optionsData={...this.optionsData,view:s},this.debounceChangeEvent&&clearTimeout(this.debounceChangeEvent),this.debounceChangeEvent=setTimeout((()=>{this.$emit("change",s),delete this.debounceChangeEvent}),100)},immediate:!1,deep:!0},"selected.count":{handler(){T.cookies.set({key:"view-count",val:this.selected.count})},immediate:!1,deep:!0}},mounted(){this.globeEventbind(),this.getSettingCache(),this.$nextTick((()=>{this.init()}))},methods:{hasSlot(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return!!this.$slots[n]||!!this.$scopedSlots[n]},deepCopy:n=>JSON.parse(JSON.stringify(n)),init(){this.dayJsLocale(this.locale),splitInit({el:[".components-calendar-menu",".components-calendar-main"],minSize:[200,20]}),this.viewTodayClickHandler(this.optionsData.defaultDate)},globeEventbind(){window.onresize=()=>{this.isMobile=window.innerWidth<576},this.allowHotkey&&document.addEventListener("keydown",(n=>{const i=n.which||n.keyCode,a=n.ctrlKey?n.ctrlKey:17===i,s=undefined,o=undefined;switch([n.metaKey||a,i].join()){case"true,37":n.preventDefault(),null==this||this.viewShiftClickHandler();break;case"true,39":n.preventDefault(),null==this||this.viewShiftClickHandler(!0);break;case"true,38":case"true,40":n.preventDefault(),null==this||this.viewTodayClickHandler()}}))},getSettingCache(){var n,i;const a=this.deepCopy(this.optionsData);["allowEdit","allowContinuous","allowAutoAssign"].forEach((n=>{a[n]=JSON.parse(T.cookies.get(n)||!1)}));const s=+T.cookies.get("view-count")||+this.optionsData.view||+(null===(n=this.options)||void 0===n||null===(i=n.view)||void 0===i?void 0:i.count)||7;this.selected.count=s,this.optionsData=a},getSize(){return this.isMobile?"":"sm"},now:n=>o(n).isValid()?o(n):o(),dayJsLocale(n){let i=n||"en";switch(i.toLowerCase()){case"zh_tw":case"zh-tw":case"zhtw":case"tw":i="zh-tw"}o.locale(i)},i18n(n){return this.dict[n]},viewsClickHandler(n){n!==this.selected.view&&(this.selected.count=n)},viewShiftClickHandler(n){const i=undefined,a=(n?1:-1)*this.selected.count,s=this.dateRange;s.end=o(s.start).add(a,"days").format(this.format),this.selected.startDate=s.end},viewTodayClickHandler(n){const i=this.now(n).add(this.previewDay,"days").format(this.format);this.selected.startDate=i},itemClickHandler(n){this.$emit("click",n)},itemAssignClickHandler(n){this.$emit("assign",n)},dropHandler(n){this.$emit("drop",n)}}},bt=void 0,kt=void 0;const Ct=St;var __vue_render__=function(){var n=this,i=n.$createElement,a=n._self._c||i;return a("div",{staticClass:"components-calendar container-fluid"},[a("b-overlay",{attrs:{"spinner-variant":"primary",show:n.loading}},[a("div",{staticClass:"header"},[n._t("slot-toolbar-top"),n._v(" "),a("b-form-row",{class:["calendar-header-toolbar-top","pb-1",{small:!n.isMobile}]},[a("b-col",{attrs:{cols:"auto"}},[a("SwitchButton",{attrs:{size:"md"},model:{value:n.options.allowEdit,callback:function(i){n.$set(n.options,"allowEdit",i)},expression:"options.allowEdit"}},[n._v("\n            "+n._s(n.i18n("addnew_onder"))+"\n          ")])],1),n._v(" "),a("b-col",{attrs:{cols:"auto"}},[a("SwitchButton",{attrs:{size:"md"},model:{value:n.options.allowContinuous,callback:function(i){n.$set(n.options,"allowContinuous",i)},expression:"options.allowContinuous"}},[n._v("\n            "+n._s(n.i18n("continuous_display"))+"\n          ")])],1),n._v(" "),a("b-col",{attrs:{cols:"auto"}},[a("SwitchButton",{attrs:{size:"md"},model:{value:n.options.allowAutoAssign,callback:function(i){n.$set(n.options,"allowAutoAssign",i)},expression:"options.allowAutoAssign"}},[n._v("\n            "+n._s(n.i18n("autoassign_room"))+"\n          ")])],1)],1),n._v(" "),a("b-form-row",[a("b-col",{staticClass:"pb-2",attrs:{cols:"12",md:"auto"}},[a("b-form-row",[a("b-col",{attrs:{cols:"auto"}},[a("b-button",{attrs:{size:n.getSize(),variant:"outline-light"},on:{click:n.viewTodayClickHandler}},[n._v("\n                "+n._s(n.i18n("today"))+"\n              ")])],1),n._v(" "),a("b-col",[a("b-button-group",{staticClass:"w-100"},[a("v-date-picker",{attrs:{locale:n.vCaleLocale,attributes:n.vCalendarAttrs,masks:{input:"YYYY-MM-DD"},popover:{visibility:"click"}},scopedSlots:n._u([{key:"default",fn:function(i){var s=i.inputValue,o=i.inputEvents;return[a("b-form-input",n._g({attrs:{size:n.getSize(),value:s}},o))]}}]),model:{value:n.selected.startDate,callback:function(i){n.$set(n.selected,"startDate",i)},expression:"selected.startDate"}}),n._v(" "),a("b-button",{staticClass:"mxw-60px",attrs:{size:n.getSize(),variant:"outline-light"},on:{click:function(i){return n.viewShiftClickHandler()}}},[a("i",{staticClass:"fa-solid fa-angle-left"})]),n._v(" "),a("b-button",{staticClass:"mxw-60px",attrs:{size:n.getSize(),variant:"outline-light"},on:{click:function(i){return n.viewShiftClickHandler(!0)}}},[a("i",{staticClass:"fa-solid fa-angle-right"})])],1)],1)],1)],1),n._v(" "),a("b-col",{staticClass:"pb-2",attrs:{cols:"auto"}},[a("b-button-group",n._l(n.views,(function(i,s){return a("b-button",{key:s,class:{active:i.active},attrs:{size:n.getSize(),variant:"outline-primary"},on:{click:function(a){return n.viewsClickHandler(i.value)}}},[n._v("\n              "+n._s(i.value)+n._s(n.i18n("day"))+"\n            ")])})),1)],1),n._v(" "),a("b-col",{staticClass:"right-middle pb-2"},[n._t("slot-toolbar-right")],2)],1)],2),n._v(" "),a("b-row",{staticClass:"main"},[a("div",{staticClass:"components-calendar-menu"},[a("resource-menu",{attrs:{"header-title":n.headerText,"wait-title":n.waitText,data:n.resourceData},on:{"update:data":function(i){n.resourceData=i}},scopedSlots:n._u([n.hasSlot("slot-resource-info")?{key:"slot-resource-info",fn:function(i){var a=i.scope;return[n._t("slot-resource-info",null,{scope:a})]}}:null],null,!0)})],1),n._v(" "),a("div",{staticClass:"components-calendar-main"},[a("scheduler",{ref:"scheduler",attrs:{"margin-top":n.marginTop,locale:n.locale,range:n.dateRange,holiday:n.options.holiday,resource:n.resourceData,stock:n.stockData,items:n.itemList,"allow-change-date":n.allowChangeDate,"allow-change-type":n.allowChangeType,"allow-edit":n.allowEdit,"allow-continuous":n.allowContinuous,"allow-auto-assign":n.allowAutoAssign},on:{"update:resource":function(i){n.resourceData=i},"update:stock":function(i){n.stockData=i},"update:items":function(i){n.itemList=i},click:n.itemClickHandler,assign:n.itemAssignClickHandler,drop:n.dropHandler},scopedSlots:n._u([n.hasSlot("slot-item-info")?{key:"slot-item-info",fn:function(i){var a=i.scope;return[n._t("slot-item-info",null,{scope:a})]}}:null],null,!0)})],1)])],1)],1)},Dt=[];__vue_render__._withStripped=!0;const $t=undefined,Mt=undefined,zt=undefined,Ht=undefined,At=normalizeComponent({render:__vue_render__,staticRenderFns:Dt},void 0,Ct,"data-v-adadf7e8",!1,void 0,!1,void 0,void 0,void 0);var Lt={install:function(n){n.component("calendar",At)},calendar:At};const Tt=undefined,Et=undefined,Yt=undefined,Ot=undefined,xt=undefined,jt=undefined;return normalizeComponent({},void 0,Lt,void 0,void 0,void 0,!1,void 0,void 0,void 0)}));
//# sourceMappingURL=calendar.umd.js.map
