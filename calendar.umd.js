!function(n,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(n="undefined"!=typeof globalThis?globalThis:n||self).calendar=i()}(this,(function(){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getDefaultExportFromNamespaceIfPresent(n){return n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getDefaultExportFromNamespaceIfNotNamed(n){return n&&Object.prototype.hasOwnProperty.call(n,"default")&&1===Object.keys(n).length?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var i=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach((function(a){var s=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(i,a,s.get?s:{enumerable:!0,get:function(){return n[a]}})})),i}function createCommonjsModule(n){var i={exports:{}};return n(i,i.exports),i.exports}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var i=createCommonjsModule((function(i,a){var s,o;s=n,o=function(){var n=1e3,i=6e4,a=36e5,s="millisecond",o="second",r="minute",d="hour",u="day",f="week",v="month",g="quarter",b="year",k="date",S="Invalid Date",C=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,D=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var i=["th","st","nd","rd"],a=n%100;return"["+n+(i[(a-20)%10]||i[a]||i[0])+"]"}},m=function(n,i,a){var s=String(n);return!s||s.length>=i?n:""+Array(i+1-s.length).join(a)+n},H={s:m,z:function(n){var i=-n.utcOffset(),a=Math.abs(i),s=Math.floor(a/60),o=a%60;return(i<=0?"+":"-")+m(s,2,"0")+":"+m(o,2,"0")},m:function t(n,i){if(n.date()<i.date())return-t(i,n);var a=12*(i.year()-n.year())+(i.month()-n.month()),s=n.clone().add(a,v),o=i-s<0,r=n.clone().add(a+(o?-1:1),v);return+(-(a+(i-s)/(o?s-r:r-s))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:v,y:b,w:f,d:u,D:k,h:d,m:r,s:o,ms:s,Q:g}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return void 0===n}},L="en",Y={};Y[L]=z;var p=function(n){return n instanceof T},A=function t(n,i,a){var s;if(!n)return L;if("string"==typeof n){var o=n.toLowerCase();Y[o]&&(s=o),i&&(Y[o]=i,s=o);var r=n.split("-");if(!s&&r.length>1)return t(r[0])}else{var d=n.name;Y[d]=n,s=d}return!a&&s&&(L=s),s||!a&&L},w=function(n,i){if(p(n))return n.clone();var a="object"==typeof i?i:{};return a.date=n,a.args=arguments,new T(a)},E=H;E.l=A,E.i=p,E.w=function(n,i){return w(n,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var T=function(){function M(n){this.$L=A(n.locale,null,!0),this.parse(n)}var z=M.prototype;return z.parse=function(n){this.$d=function(n){var i=n.date,a=n.utc;if(null===i)return new Date(NaN);if(E.u(i))return new Date;if(i instanceof Date)return new Date(i);if("string"==typeof i&&!/Z$/i.test(i)){var s=i.match(C);if(s){var o=s[2]-1||0,r=(s[7]||"0").substring(0,3);return a?new Date(Date.UTC(s[1],o,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)):new Date(s[1],o,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)}}return new Date(i)}(n),this.$x=n.x||{},this.init()},z.init=function(){var n=this.$d;this.$y=n.getFullYear(),this.$M=n.getMonth(),this.$D=n.getDate(),this.$W=n.getDay(),this.$H=n.getHours(),this.$m=n.getMinutes(),this.$s=n.getSeconds(),this.$ms=n.getMilliseconds()},z.$utils=function(){return E},z.isValid=function(){return!(this.$d.toString()===S)},z.isSame=function(n,i){var a=w(n);return this.startOf(i)<=a&&a<=this.endOf(i)},z.isAfter=function(n,i){return w(n)<this.startOf(i)},z.isBefore=function(n,i){return this.endOf(i)<w(n)},z.$g=function(n,i,a){return E.u(n)?this[i]:this.set(a,n)},z.unix=function(){return Math.floor(this.valueOf()/1e3)},z.valueOf=function(){return this.$d.getTime()},z.startOf=function(n,i){var a=this,s=!!E.u(i)||i,g=E.p(n),l=function(n,i){var o=E.w(a.$u?Date.UTC(a.$y,i,n):new Date(a.$y,i,n),a);return s?o:o.endOf(u)},$=function(n,i){return E.w(a.toDate()[n].apply(a.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(i)),a)},S=this.$W,C=this.$M,D=this.$D,z="set"+(this.$u?"UTC":"");switch(g){case b:return s?l(1,0):l(31,11);case v:return s?l(1,C):l(0,C+1);case f:var H=this.$locale().weekStart||0,L=(S<H?S+7:S)-H;return l(s?D-L:D+(6-L),C);case u:case k:return $(z+"Hours",0);case d:return $(z+"Minutes",1);case r:return $(z+"Seconds",2);case o:return $(z+"Milliseconds",3);default:return this.clone()}},z.endOf=function(n){return this.startOf(n,!1)},z.$set=function(n,i){var a,f=E.p(n),g="set"+(this.$u?"UTC":""),S=(a={},a[u]=g+"Date",a[k]=g+"Date",a[v]=g+"Month",a[b]=g+"FullYear",a[d]=g+"Hours",a[r]=g+"Minutes",a[o]=g+"Seconds",a[s]=g+"Milliseconds",a)[f],C=f===u?this.$D+(i-this.$W):i;if(f===v||f===b){var D=this.clone().set(k,1);D.$d[S](C),D.init(),this.$d=D.set(k,Math.min(this.$D,D.daysInMonth())).$d}else S&&this.$d[S](C);return this.init(),this},z.set=function(n,i){return this.clone().$set(n,i)},z.get=function(n){return this[E.p(n)]()},z.add=function(s,g){var k,S=this;s=Number(s);var C=E.p(g),y=function(n){var i=w(S);return E.w(i.date(i.date()+Math.round(n*s)),S)};if(C===v)return this.set(v,this.$M+s);if(C===b)return this.set(b,this.$y+s);if(C===u)return y(1);if(C===f)return y(7);var D=(k={},k[r]=i,k[d]=a,k[o]=n,k)[C]||1,z=this.$d.getTime()+s*D;return E.w(z,this)},z.subtract=function(n,i){return this.add(-1*n,i)},z.format=function(n){var i=this,a=this.$locale();if(!this.isValid())return a.invalidDate||S;var s=n||"YYYY-MM-DDTHH:mm:ssZ",o=E.z(this),r=this.$H,d=this.$m,u=this.$M,f=a.weekdays,v=a.months,h=function(n,a,o,r){return n&&(n[a]||n(i,s))||o[a].slice(0,r)},c=function(n){return E.s(r%12||12,n,"0")},g=a.meridiem||function(n,i,a){var s=n<12?"AM":"PM";return a?s.toLowerCase():s},b={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:E.s(u+1,2,"0"),MMM:h(a.monthsShort,u,v,3),MMMM:h(v,u),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:h(a.weekdaysMin,this.$W,f,2),ddd:h(a.weekdaysShort,this.$W,f,3),dddd:f[this.$W],H:String(r),HH:E.s(r,2,"0"),h:c(1),hh:c(2),a:g(r,d,!0),A:g(r,d,!1),m:String(d),mm:E.s(d,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:o};return s.replace(D,(function(n,i){return i||b[n]||o.replace(":","")}))},z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},z.diff=function(s,k,S){var C,D=E.p(k),z=w(s),H=(z.utcOffset()-this.utcOffset())*i,L=this-z,Y=E.m(this,z);return Y=(C={},C[b]=Y/12,C[v]=Y,C[g]=Y/3,C[f]=(L-H)/6048e5,C[u]=(L-H)/864e5,C[d]=L/a,C[r]=L/i,C[o]=L/n,C)[D]||L,S?Y:E.a(Y)},z.daysInMonth=function(){return this.endOf(v).$D},z.$locale=function(){return Y[this.$L]},z.locale=function(n,i){if(!n)return this.$L;var a=this.clone(),s=A(n,i,!0);return s&&(a.$L=s),a},z.clone=function(){return E.w(this.$d,this)},z.toDate=function(){return new Date(this.valueOf())},z.toJSON=function(){return this.isValid()?this.toISOString():null},z.toISOString=function(){return this.$d.toISOString()},z.toString=function(){return this.$d.toUTCString()},M}(),O=T.prototype;return w.prototype=O,[["$ms",s],["$s",o],["$m",r],["$H",d],["$W",u],["$M",v],["$y",b],["$D",k]].forEach((function(n){O[n[1]]=function(i){return this.$g(i,n[0],n[1])}})),w.extend=function(n,i){return n.$i||(n(i,T,w),n.$i=!0),w},w.locale=A,w.isDayjs=p,w.unix=function(n){return w(1e3*n)},w.en=Y[L],w.Ls=Y,w.p={},w},i.exports=o()})),a=createCommonjsModule((function(i,a){var s,o;s=n,o=function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var i=["th","st","nd","rd"],a=n%100;return"["+n+(i[(a-20)%10]||i[a]||i[0])+"]"}}},i.exports=o()})),s=createCommonjsModule((function(a,s){var o,r;o=n,r=function(n){function e(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var i=e(n),a={name:"zh-tw",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(n,i){return"W"===i?n+"週":n+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"},meridiem:function(n,i){var a=100*n+i;return a<600?"凌晨":a<900?"早上":a<1100?"上午":a<1300?"中午":a<1800?"下午":"晚上"}};return i.default.locale(a,null,!0),a},a.exports=r(i)})),o=createCommonjsModule((function(a,s){var o,r;o=n,r=function(n){function _(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var i=_(n),a={name:"ja",weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(n){return n+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiem:function(n){return n<12?"午前":"午後"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}};return i.default.locale(a,null,!0),a},a.exports=r(i)})),r="undefined"!=typeof window?window:null,d=null===r,u=d?void 0:r.document,f="addEventListener",v="removeEventListener",g="getBoundingClientRect",b="_a",k="_b",S="_c",C="horizontal",NOOP=function(){return!1},D=d?"calc":["","-webkit-","-moz-","-o-"].filter((function(n){var i=u.createElement("div");return i.style.cssText="width:"+n+"calc(9px)",!!i.style.length})).shift()+"calc",isString=function(n){return"string"==typeof n||n instanceof String},elementOrSelector=function(n){if(isString(n)){var i=u.querySelector(n);if(!i)throw new Error("Selector "+n+" did not match a DOM element");return i}return n},getOption=function(n,i,a){var s=n[i];return void 0!==s?s:a},getGutterSize=function(n,i,a,s){if(i){if("end"===s)return 0;if("center"===s)return n/2}else if(a){if("start"===s)return 0;if("center"===s)return n/2}return n},defaultGutterFn=function(n,i){var a=u.createElement("div");return a.className="gutter gutter-"+i,a},defaultElementStyleFn=function(n,i,a){var s={};return isString(i)?s[n]=i:s[n]=D+"("+i+"% - "+a+"px)",s},defaultGutterStyleFn=function(n,i){var a;return(a={})[n]=i+"px",a},Split=function(n,i){if(void 0===i&&(i={}),d)return{};var a=n,s,o,D,z,H,L;Array.from&&(a=Array.from(a));var Y,A=elementOrSelector(a[0]).parentNode,E=getComputedStyle?getComputedStyle(A):null,T=E?E.flexDirection:null,O=getOption(i,"sizes")||a.map((function(){return 100/a.length})),x=getOption(i,"minSize",100),j=Array.isArray(x)?x:a.map((function(){return x})),I=getOption(i,"maxSize",1/0),R=Array.isArray(I)?I:a.map((function(){return I})),N=getOption(i,"expandToMin",!1),F=getOption(i,"gutterSize",10),J=getOption(i,"gutterAlign","center"),W=getOption(i,"snapOffset",30),P=Array.isArray(W)?W:a.map((function(){return W})),U=getOption(i,"dragInterval",1),B=getOption(i,"direction",C),q=getOption(i,"cursor",B===C?"col-resize":"row-resize"),V=getOption(i,"gutter",defaultGutterFn),X=getOption(i,"elementStyle",defaultElementStyleFn),Z=getOption(i,"gutterStyle",defaultGutterStyleFn);function setElementSize(n,i,a,o){var r=X(s,i,a,o);Object.keys(r).forEach((function(i){n.style[i]=r[i]}))}function setGutterSize(n,i,a){var o=Z(s,i,a);Object.keys(o).forEach((function(i){n.style[i]=o[i]}))}function getSizes(){return L.map((function(n){return n.size}))}function getMousePosition(n){return"touches"in n?n.touches[0][o]:n[o]}function adjust(n){var i=L[this.a],a=L[this.b],s=i.size+a.size;i.size=n/this.size*s,a.size=s-n/this.size*s,setElementSize(i.element,i.size,this[k],i.i),setElementSize(a.element,a.size,this[S],a.i)}function drag(n){var a,s=L[this.a],o=L[this.b];this.dragging&&(a=getMousePosition(n)-this.start+(this[k]-this.dragOffset),U>1&&(a=Math.round(a/U)*U),a<=s.minSize+s.snapOffset+this[k]?a=s.minSize+this[k]:a>=this.size-(o.minSize+o.snapOffset+this[S])&&(a=this.size-(o.minSize+this[S])),a>=s.maxSize-s.snapOffset+this[k]?a=s.maxSize+this[k]:a<=this.size-(o.maxSize-o.snapOffset+this[S])&&(a=this.size-(o.maxSize+this[S])),adjust.call(this,a),getOption(i,"onDrag",NOOP)(getSizes()))}function calculateSizes(){var n=L[this.a].element,i=L[this.b].element,a=n[g](),o=i[g]();this.size=a[s]+o[s]+this[k]+this[S],this.start=a[D],this.end=a[z]}function innerSize(n){if(!getComputedStyle)return null;var i=getComputedStyle(n);if(!i)return null;var a=n[H];return 0===a?null:a-=B===C?parseFloat(i.paddingLeft)+parseFloat(i.paddingRight):parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)}function trimToMin(n){var i=innerSize(A);if(null===i)return n;if(j.reduce((function(n,i){return n+i}),0)>i)return n;var a=0,s=[],o=n.map((function(o,r){var d=i*o/100,u=getGutterSize(F,0===r,r===n.length-1,J),f=j[r]+u;return d<f?(a+=f-d,s.push(0),f):(s.push(d-f),d)}));return 0===a?n:o.map((function(n,o){var r=n;if(a>0&&s[o]-a>0){var d=Math.min(a,s[o]-a);a-=d,r=n-d}return r/i*100}))}function stopDragging(){var n=this,a=L[n.a].element,s=L[n.b].element;n.dragging&&getOption(i,"onDragEnd",NOOP)(getSizes()),n.dragging=!1,r[v]("mouseup",n.stop),r[v]("touchend",n.stop),r[v]("touchcancel",n.stop),r[v]("mousemove",n.move),r[v]("touchmove",n.move),n.stop=null,n.move=null,a[v]("selectstart",NOOP),a[v]("dragstart",NOOP),s[v]("selectstart",NOOP),s[v]("dragstart",NOOP),a.style.userSelect="",a.style.webkitUserSelect="",a.style.MozUserSelect="",a.style.pointerEvents="",s.style.userSelect="",s.style.webkitUserSelect="",s.style.MozUserSelect="",s.style.pointerEvents="",n.gutter.style.cursor="",n.parent.style.cursor="",u.body.style.cursor=""}function startDragging(n){if(!("button"in n)||0===n.button){var a=this,s=L[a.a].element,o=L[a.b].element;a.dragging||getOption(i,"onDragStart",NOOP)(getSizes()),n.preventDefault(),a.dragging=!0,a.move=drag.bind(a),a.stop=stopDragging.bind(a),r[f]("mouseup",a.stop),r[f]("touchend",a.stop),r[f]("touchcancel",a.stop),r[f]("mousemove",a.move),r[f]("touchmove",a.move),s[f]("selectstart",NOOP),s[f]("dragstart",NOOP),o[f]("selectstart",NOOP),o[f]("dragstart",NOOP),s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",a.gutter.style.cursor=q,a.parent.style.cursor=q,u.body.style.cursor=q,calculateSizes.call(a),a.dragOffset=getMousePosition(n)-a.end}}B===C?(s="width",o="clientX",D="left",z="right",H="clientWidth"):"vertical"===B&&(s="height",o="clientY",D="top",z="bottom",H="clientHeight"),O=trimToMin(O);var G=[];function adjustToMin(n){var i=n.i===G.length,a=i?G[n.i-1]:G[n.i];calculateSizes.call(a);var s=i?a.size-n.minSize-a[S]:n.minSize+a[k];adjust.call(a,s)}function setSizes(n){var i=trimToMin(n);i.forEach((function(n,a){if(a>0){var s=G[a-1],o=L[s.a],r=L[s.b];o.size=i[a-1],r.size=n,setElementSize(o.element,o.size,s[k],o.i),setElementSize(r.element,r.size,s[S],r.i)}}))}function destroy(n,i){G.forEach((function(a){if(!0!==i?a.parent.removeChild(a.gutter):(a.gutter[v]("mousedown",a[b]),a.gutter[v]("touchstart",a[b])),!0!==n){var o=X(s,a.a.size,a[k]);Object.keys(o).forEach((function(n){L[a.a].element.style[n]="",L[a.b].element.style[n]=""}))}}))}return(L=a.map((function(n,i){var s={element:elementOrSelector(n),size:O[i],minSize:j[i],maxSize:R[i],snapOffset:P[i],i:i},o;if(i>0&&((o={a:i-1,b:i,dragging:!1,direction:B,parent:A})[k]=getGutterSize(F,i-1==0,!1,J),o[S]=getGutterSize(F,!1,i===a.length-1,J),"row-reverse"===T||"column-reverse"===T)){var r=o.a;o.a=o.b,o.b=r}if(i>0){var d=V(i,B,s.element);setGutterSize(d,F,i),o[b]=startDragging.bind(o),d[f]("mousedown",o[b]),d[f]("touchstart",o[b]),A.insertBefore(d,s.element),o.gutter=d}return setElementSize(s.element,s.size,getGutterSize(F,0===i,i===a.length-1,J),i),i>0&&G.push(o),s}))).forEach((function(n){var i=n.element[g]()[s];i<n.minSize&&(N?adjustToMin(n):n.minSize=i)})),{setSizes:setSizes,getSizes:getSizes,collapse:function collapse(n){adjustToMin(L[n])},destroy:destroy,parent:A,pairs:G}};function splitInit(n){let{el:i,sizes:a=[20,80],minSize:s=350,gutterSize:o=2}=n;const r=undefined;return Split(i,{sizes:a,minSize:s,expandToMin:!0,gutterSize:o,onDragEnd(n){n=n.filter((n=>isNaN(+n))).length?[20,80]:n.map((n=>+n))}})}var z={tw:{today:"今日",day:"日",addnew_onder:"新增訂單",continuous_display:"連續顯示",autoassign_room:"自動排房",whole_building:"包棟",stock_notset:"無庫存"},en:{today:"Today",day:"Day",addnew_onder:"New Order",continuous_display:"Continuous View",autoassign_room:"Automatic Room Assignment",whole_building:"Whole Building",stock_notset:"No Inventory Setup"},ja:{today:"今日",day:"日",addnew_onder:"注文の追加",continuous_display:"続けて表示する",autoassign_room:"自動で部屋を割り当て",whole_building:"建物全体",stock_notset:"在庫なし"}};const H={cookies:{get(n){const i=document.cookie.split(";"),a={};return i.map((n=>{const i=n.trim().split("=");a[i[0]]=i[1]})),void 0===n?a:void 0===a[n]?void 0:decodeURIComponent(a[n])},del(n){this.cookies.set(n,"",-1)},set(n){if(void 0!==n){void 0===n.days&&(n.days=15);let i="";const a=new Date;a.setDate(a.getDate()+n.days),i=`expires=${a.toUTCString()};`;let s="";void 0!==n.domain&&(s=`domain=${n.domain};`);let o="SameSite=Lax;";void 0!==n.SameSite&&(o=`SameSite=${n.SameSite};`),document.cookie=`${n.key}=${encodeURIComponent(n.val)};${o}path=/;${i};${s}`}}},formatLang(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=null==n?void 0:n.toLowerCase();switch(i){case"cn":case"zh_cn":case"zh-cn":i="cn";break;case"en":case"en_us":case"en-us":i="en";break;case"tw":case"zh_tw":case"zh-tw":i="tw"}return i}};var L,Y=void 0,A=void 0;function normalizeComponent(n,i,a,s,o,r,d,u,f,v){"boolean"!=typeof d&&(f=u,u=d,d=!1);const g="function"==typeof a?a.options:a;let b;if(n&&n.render&&(g.render=n.render,g.staticRenderFns=n.staticRenderFns,g._compiled=!0,o&&(g.functional=!0)),s&&(g._scopeId=s),r?(b=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),i&&i.call(this,f(n)),n&&n._registeredComponents&&n._registeredComponents.add(r)},g._ssrRegister=b):i&&(b=d?function(n){i.call(this,v(n,this.$root.$options.shadowRoot))}:function(n){i.call(this,u(n))}),b)if(g.functional){const n=g.render;g.render=function renderWithStyleInjection(i,a){return b.call(a),n(i,a)}}else{const n=g.beforeCreate;g.beforeCreate=n?[].concat(n,b):[b]}return a}const E={name:"ComponentsItem",components:{},props:{loading:{type:Boolean,default:!1},data:{type:Object,default:()=>({})},continuous:{type:Boolean,default:!1}},data:()=>({}),computed:{colSpan(){let n=null;if(this.continuous&&this.data.items.length>1){const i=this.data.items.indexOf(this.data.id);n=["colspan-"+(this.data.items.length-i)].join(" ")}return n}},mounted(){},methods:{clickHandler(){this.$emit("click",this.data)},assignClickHandler(n){n.stopPropagation(),this.$emit("assign",this.data)},paymentStatusIcon(n){let i="fa-regular fa-credit-card";switch(n){case"deposit_unpaid":i="fa-solid fa-circle-exclamation fa-fw";break;case"unpaid":i="fa-regular fa-calendar-check"}return i}}};var __vue_render__$3=function(){var n=this,i=n.$createElement,a=n._self._c||i;return a("div",{staticClass:"components-item",class:[n.data.checked_status,{assign:n.data.assign,unassign:!n.data.assign,continuous:n.continuous},n.colSpan],attrs:{"data-type":"item","data-item-id":n.data.id,"data-items":n.data.items,draggable:"true","data-order":n.data.order},on:{dragstart:function(i){return n.$emit("dragstart",i)},click:n.clickHandler}},[a("b-overlay",{attrs:{"spinner-variant":"primary",show:n.loading}},[a("span",[n.data.payment_status?a("span",{class:["pay_status_icon",n.data.payment_status,{black:!n.data.assign}]}):n._e(),n._v(" "),n.data.title?a("span",[n._v(n._s(n.data.title))]):a("span",[n._v(n._s(n.data.start))]),n._v(" "),a("br"),n._v(" "),a("span",[n._v(n._s(n.data.source)),n.data.order_from?a("span",[n._v(" ("+n._s(n.data.order_from)+")")]):n._e()])]),n._v(" "),a("div",{staticClass:"assign-button",on:{click:n.assignClickHandler}},[a("i",{staticClass:"fas fa-chevron-circle-right"})])])],1)},T=[];__vue_render__$3._withStripped=!0;const O=undefined,x=undefined,j=undefined,I=undefined,R=undefined;var N,F=void 0;const J={name:"ComponentsScheduler",components:{orderItem:normalizeComponent({render:__vue_render__$3,staticRenderFns:T},void 0,E,"data-v-157a144f",!1,void 0,!1,void 0,void 0,void 0)},props:{loading:{type:Boolean,default:!1},locale:{type:String,default:"en"},range:{type:Object,default:()=>({})},resource:{type:Array,default:()=>[]},stock:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},holiday:{type:Array,default:()=>[]},format:{type:String,default:"YYYY-MM-DD"},defaultHoliday:{type:Array,default:()=>[6,0]},allowChangeDate:{type:Boolean,default:!1},allowChangeType:{type:Boolean,default:!1},allowEdit:{type:Boolean,default:!1},allowContinuous:{type:Boolean,default:!1},allowAutoAssign:{type:Boolean,default:!1}},data:()=>({cname:"resource-item",grouping:{},mousePosition:0}),computed:{dict(){return z[this.lang]||z.en},lang(){return H.formatLang(this.locale)},now(){return i().format(this.format)},resourceList:{get(){return this.resource},set(n){this.$emit("update:resource",n)}},itemList:{get(){const n=this.deepCopy(this.items);return n.sort(((n,i)=>n.start===i.start?0:n.start>i.start?1:-1)),n},set(n){this.$emit("update:items",n)}},viewCount(){const n=i(this.range.start),a=undefined,s=undefined;return i(this.range.end).diff(n,"days")+1},dates(){const n=[...new Array(this.viewCount)].fill({}),a={};let s="";const o=n.map(((n,o)=>{const r=i(this.range.start).add(o,"days"),d=r.format(this.format),u=this.holiday.find((n=>n.date===d)),f=r.format("MM"),v=s!==f;return v&&(s=f),a[f]||(a[f]=0),a[f]++,{active:v,date:d,year:r.format("YYYY"),month:f,day:r.format("D"),week:r.format("dd"),...u?{holiday:u.display_name}:{}}}));return o.forEach((n=>{n.active&&(n.cols=a[n.month])})),o},dataResult(){const n={},i={};this.itemList.forEach((a=>{i[a.order_group]||(i[a.order_group]={});const s=this.grouping[a.id],o=this.allowAutoAssign||a.assign?a.room_number_id:null;let r=[a.room_type,o,s].join();const d=i[a.order_group][r];if(d){const s=d[d.length-1].end;d.length>0&&(d[0].start===a.start||s!==a.start)&&(n[r]||(n[r]=r+a.end),r=n[r]||r,i[a.order_group][r]||(i[a.order_group][r]=[]))}else i[a.order_group][r]=[];i[a.order_group][r].push(a)}));const a=this.deepCopy(this.itemList),s=this.checkOverwrite(a),o=[],r={};this.itemList.forEach((n=>{let a=this.allowAutoAssign||n.assign?n.room_number_id:null;if(s.length){const i=[n.start,n.room_type,n.room_number_id].join(),r=undefined;s.includes(i)&&(o.includes(i)?(a=null,n.room_number_id=null,n.title=`*${n.title}`):o.push(i))}const d=[n.start,n.room_type,a].join();r[d]||(r[d]=[]);let u=[];const f=Object.entries(i[n.order_group]).findIndex((i=>{let[a,s]=i;return s.find((i=>i.id===n.id))}));-1!==f&&(u=Object.entries(i[n.order_group])[f][1].map((n=>n.id))),r[d].push({...n,items:u})}));const d={};return Object.entries(r).forEach((n=>{let[i,a]=n;a.sort(((n,i)=>{const a=n.items.join(),s=i.items.join();switch(`${!!d[a]}${!!d[s]}`){case"truetrue":return 0;case"truefalse":return-1;case"falsetrue":return 1}return n.items.length===i.items.length?0:n.items.length>i.items.length?-1:1})),a.forEach(((n,i)=>{if(n.items.length){const i=n.items.join();d[i]||(d[i]=this.getMinOrder(a,d),Object.entries(r).forEach((n=>{let[a,s]=n;s.forEach(((n,a)=>{const s=undefined;n.items.join()===i&&(n.order=d[i])}))})))}}))})),r},dateOpenList(){const n={};return this.dates.forEach((i=>{n[i]=this.getStock(i.date).full})),n}},watch:{allowAutoAssign:{handler(){setTimeout((()=>{this.updateRowspan()}))},immediate:!1,deep:!0},range:{handler(){this.resourceList.forEach((n=>{delete n.layout})),setTimeout((()=>{this.updateRowspan()}))},immediate:!1,deep:!0}},mounted(){this.$nextTick((()=>{setTimeout((()=>{this.updateRowspan(),this.scrollEventSet()}))}))},methods:{updateItemPosition(){const n=this.deepCopy(this.itemList);n.forEach((n=>{const i=document.querySelector(`[data-item-id="${n.id}"]`);if(i){const{left:a,right:s}=i.getBoundingClientRect();n.left=a.toFixed(0),n.right=s.toFixed(0)}})),this.itemList=n},mousedownHandler(n){this.mousePosition=n.x},i18n(n){return this.dict[n]},scrollEventSet(){const n=document.querySelector(".components-scheduler .scheduler-header.stuck");n&&(this.offsetY=n.getBoundingClientRect().top,window.addEventListener("scroll",(()=>{const i=undefined,a=this.getScroll().top-this.offsetY;n.style.top=a>0?`${a}px`:0})))},getScroll(){const n=document.body,i=document.documentElement,a=parseFloat(window.pageYOffset||n.scrollTop||i.scrollTop);return{top:a,bottom:n.clientHeight-window.innerHeight-a}},getStock(n,i){var a;return(null===(a=this.stock[i])||void 0===a?void 0:a[n])||{}},checkStock(n,i){const a=undefined;return void 0!==this.getStock(n,i).stock},checkLock(n,i){const a=this.getStock(n,i);return void 0!==a.open&&!a.open},getAllStockFull(n){let i=!1;return Object.entries(this.stock).forEach((a=>{let[s,o]=a;var r;i||(i=!(null===(r=o[n])||void 0===r||!r.full))})),i},getMinOrder(n,i){let a=1;if(n.length>1){const s=n.map((n=>i[n.items.join()])).filter((n=>n));for(;s.includes(a);)a++}return a},waitDataResult(n){const i=this.dataResult[n]||[];return i.sort(((n,i)=>n.order===i.order?0:n.order>i.order?1:-1)),i},deepCopy:n=>JSON.parse(JSON.stringify(n)),isToday(n){return n===this.now},isWeekend(n){return this.defaultHoliday.includes(i(n).day())},isHoliday(n){const i=this.holiday.find((i=>i.date===n));return(null==i?void 0:i.display_name)||""},dateTooltip(n){const i=[n],a=this.isToday(n),s=this.isHoliday(n);return a&&i.push(`(${this.i18n("today")})`),s&&i.push(`(${s})`),i.join("")},dateClickHandler(n){this.$emit("click",{type:"date",value:n})},stockClickHandler(n){const{date:i,room:a,num:s}=n;this.$emit("click",{type:"stock",value:{...this.getStock(i,a)}})},orderClickHandler(n){this.$emit("click",{type:"order",value:n})},assignClickHandler(n){this.$emit("assign",{type:"assign",value:n})},itemClickHandler(n){const{date:i,room:a,num:s,full:o}=n;this.allowEdit&&!o&&this.$emit("click",{type:"item",value:n})},dragStartHandler(n){var i;const a=n.target.parentNode.dataset,s=null===(i=n.target)||void 0===i?void 0:i.dataset;if(null!=s&&s.itemId){const i={...a,itemId:s.itemId,items:s.items};this.dragTarget=i,n.dataTransfer.setData("text/plain",JSON.stringify(i)),n.dataTransfer.effectAllowed="move"}n.target.style.background="#f2f2f2"},dragOverHandler(n){n.preventDefault()},dragLeaveHandler(n){n.preventDefault(),n.target.style.background=""},dragEnterHandler(n){n.preventDefault();const i=n.target.dataset.type,a=n.target.dataset.id,s=n.target.querySelectorAll(".components-item").length;!a||"wait"!==i&&s||(n.target.style.background="#f2f2f2"),n.target.style.pointerEvents="","item"===i&&(n.target.style.pointerEvents="none"),setTimeout((()=>{this.clearPointerEvents()}),1e3)},dropHandler(n){if(n.preventDefault(),n.target.style.background="",!this.allowChangeType)try{const i=undefined,a=(JSON.parse(n.dataTransfer.getData("text/plain")).id||"").split(",")[0],s=undefined;if(a!==(n.target.dataset.id||"").split(",")[0])return void this.updateRowspan()}catch(n){return}const a=n.target.dataset.type,s=undefined;if(n.target.dataset.id){const s=n.target.querySelectorAll(".components-item").length,o="wait"!==a;try{const r=JSON.parse(n.dataTransfer.getData("text/plain")),{itemId:d,items:u}=r,{date:f,id:v}=n.target.dataset,[g,b]=v.split(",").map((n=>+n));if("wait"===a||!s||v===r.id){const a=this.deepCopy(this.itemList);if(this.allowContinuous){const n=u.split(",");let s=0;if(this.allowChangeDate){let o=-1,r=Number.MAX_SAFE_INTEGER;n.forEach(((n,i)=>{const s=a.findIndex((i=>i.id===+n)),d=+a[s].left,u=this.mousePosition-d;u>0&&u<r&&(r=u,o=i)}));const d=a.findIndex((i=>i.id===+n[o]));s=i(f).diff(i(a[d].start),"days")}n.forEach((n=>{const r=a.findIndex((i=>i.id===+n));a[r].assign=o,a[r].room_type=g,a[r].room_number_id=b||null,s&&(a[r].start=i(a[r].start).add(s,"days").format(this.format),a[r].end=i(a[r].end).add(s,"days").format(this.format))}))}else{const s=a.findIndex((n=>n.id===+d));a[s].assign=o,a[s].room_type=g,a[s].room_number_id=b||null;const r=i(f).diff(i(a[s].start),"days");if(!this.allowChangeDate)try{const i=JSON.parse(n.dataTransfer.getData("text/plain")),a=n.target.dataset.date;if(i.date&&i.date!==a)return void this.updateRowspan()}catch(n){return}r&&(a[s].start=f,a[s].end=i(a[s].end).add(r,"days").format(this.format))}const s=this.checkOverwrite(a);if(s.length){const n=s[0].split(","),i=document.querySelector(['[data-type="content"]',`[data-date="${n[0]}"]`,`[data-id="${[n[1],n[2]].join()}"]`].join(""));i&&(i.classList.add("easeInAnim"),setTimeout((()=>{i.classList.remove("easeInAnim")}),500))}else setTimeout((()=>{this.itemList=a,this.$emit("drop",{itemId:d,date:f,room:g,...b?{num:b}:null,items:u})}))}}catch(n){return}}setTimeout((()=>{this.grouping={},this.updateRowspan()}))},clearPointerEvents(){document.querySelectorAll(".components-item").forEach((n=>{n.style.pointerEvents=""}))},updateRowspan(){this.resourceList.forEach(((n,i)=>{delete this.resourceList[i].layout}));const n=[],i=[`.${this.cname} [data-type="wait"]`,`.${this.cname} [data-type="content"]`].join();document.querySelectorAll(i).forEach((i=>{const a=i.querySelectorAll(".components-item").length,s=i.dataset.id,o=s.split(",")[0],r=s.split(",")[1],d=this.resourceList.findIndex((n=>n.id===+o));if(-1!==d){const i=this.resourceList[d];i.layout||(i.layout={}),i.layout[r]||(i.layout[r]={rowspan:0}),"wait"===r&&(n[o]||(n[o]=0),n[o]+=a,i.layout[r].waitRowspan=n[o]),i.layout[r].rowspan=Math.max(i.layout[r].rowspan,a),this.allowAutoAssign&&(i.waitActive=!0),this.resourceList[d]=i}})),this.resourceList=[...this.resourceList],setTimeout((()=>{this.clearPointerEvents(),this.updateItemPosition()}))},checkOverwrite(n){const i=this.deepCopy(n),a={};return this.allowAutoAssign||i.forEach((n=>{n.assign||(n.room_number_id=null)})),i.filter((n=>n.room_number_id)).forEach((n=>{const i=[n.start,n.room_type,n.room_number_id].join();a[i]||(a[i]=[]),a[i].push(n)})),[...new Set(Object.entries(a).map((n=>n[1])).filter((n=>n.length>1)).flat().map((n=>[n.start,n.room_type,n.room_number_id].join())))]},parseLayoutInfo(n,i){var a,s;return(null==n||null===(a=n.layout)||void 0===a||null===(s=a[i])||void 0===s?void 0:s.rowspan)||0}}};var __vue_render__$2=function(){var n=this,i=n.$createElement,a=n._self._c||i;return a("div",{staticClass:"components-scheduler"},[a("b-overlay",{class:"view-"+n.viewCount,attrs:{"spinner-variant":"primary",show:n.loading}},[a("b-form-row",{staticClass:"scheduler-header stuck"},[a("b-col",{attrs:{cols:"12"}},[a("ul",{staticClass:"months"},n._l(n.dates,(function(i,s){return a("li",{key:"months_"+s,attrs:{title:i.year+"/"+i.month}},[a("div",{class:[{active:i.active},i.cols?"colspan-"+i.cols:""]},[n._v("\n              "+n._s(i.year)+"/"+n._s(i.month)+"\n            ")])])})),0)]),n._v(" "),a("b-col",{attrs:{cols:"12"}},[a("ul",{staticClass:"dates"},n._l(n.dates,(function(i,s){return a("li",{key:"dates_"+s,class:["cursor-pointer",{today:n.isToday(i.date),holiday:n.isHoliday(i.date),weekend:n.isWeekend(i.date)}],attrs:{id:"dates_"+s,boundary:"document"},on:{click:function(a){return n.dateClickHandler(i.date)}}},[a("div",[a("span",[n._v(n._s(i.week)+" "+n._s(i.day))]),n._v(" "),n.getAllStockFull(i.date)?a("small",{staticClass:"wb-icon"},[n._v("\n                "+n._s(n.i18n("whole_building"))+"\n              ")]):n._e()]),n._v(" "),a("b-tooltip",{attrs:{target:"dates_"+s,"custom-class":"b-tooltip-class",placement:"top",triggers:"hover",boundary:"document"}},[n._v("\n              "+n._s(n.dateTooltip(i.date))+"\n            ")])],1)})),0)])],1),n._v(" "),n._l(n.resourceList,(function(i,s){return[a("b-form-row",{key:"contents_"+s,staticClass:"contents-row stock"},[a("b-col",{class:n.cname,attrs:{cols:"12"}},[a("ul",{staticClass:"contents stock"},n._l(n.dates,(function(o,r){return a("li",{key:"contents_"+s+"_"+r,class:{full:n.getStock(o.date,i.id).full,"stock-notset":!n.checkStock(o.date,i.id)}},[a("div",{on:{click:function(a){return n.stockClickHandler({date:o.date,room:i.id})}}},[n.checkLock(o.date,i.id)?a("small",{staticClass:"lock-icon"},[a("i",{staticClass:"fa-solid fa-lock"})]):n._e(),n._v(" "),n.checkStock(o.date,i.id)?a("span",[n._v("\n                  "+n._s(n.getStock(o.date,i.id).stock)+"\n                ")]):a("small",[n._v("\n                  "+n._s(n.i18n("stock_notset"))+"\n                ")])])])})),0)])],1),n._v(" "),a("b-form-row",{key:"contents_wait_"+s,class:["contents-row collapse-wait",{active:i.active&&(void 0===i.waitActive||i.waitActive)}]},[a("b-col",{class:[n.cname,"rowspan-"+n.parseLayoutInfo(i,"wait")],attrs:{cols:"12"}},[a("ul",{staticClass:"contents wait"},n._l(n.dates,(function(o,r){return a("li",{key:"contents_wait_"+s+"_"+r,class:{full:n.getStock(o.date,i.id).full}},[a("div",{attrs:{"data-type":"wait",droppable:"true","data-date":o.date,"data-id":[i.id,"wait"].join()},on:{dragenter:n.dragEnterHandler,dragleave:n.dragLeaveHandler,dragover:n.dragOverHandler,drop:n.dropHandler,click:function(a){if(a.target!==a.currentTarget)return null;n.itemClickHandler({date:o.date,room:i.id,num:"wait",full:n.getStock(o.date,i.id).full})},mousedown:n.mousedownHandler}},[n._l(n.waitDataResult([o.date,i.id,""].join()),(function(i,s){return[a("order-item",{key:"order-item_"+s,class:"item-order-"+i.order,attrs:{data:i,continuous:n.allowContinuous},on:{dragstart:n.dragStartHandler,click:n.orderClickHandler,assign:n.assignClickHandler}})]}))],2)])})),0)])],1),n._v(" "),n._l(i.children,(function(o,r){return a("b-form-row",{key:"contents_"+s+"_"+r,staticClass:"contents-row collapse",class:{active:i.active}},[a("b-col",{class:n.cname,attrs:{cols:"12"}},[a("ul",{staticClass:"contents"},n._l(n.dates,(function(d,u){return a("li",{key:"contents_"+s+"_"+r+"_"+u,class:{full:n.getStock(d.date,i.id).full}},[a("div",{attrs:{"data-type":"content","data-date":d.date,"data-id":[i.id,o.id].join()},on:{dragenter:n.dragEnterHandler,dragleave:n.dragLeaveHandler,dragover:n.dragOverHandler,drop:n.dropHandler,click:function(a){if(a.target!==a.currentTarget)return null;n.itemClickHandler({date:d.date,room:i.id,num:o.id,full:n.getStock(d.date,i.id).full})},mousedown:n.mousedownHandler}},[n._l(n.dataResult[[d.date,i.id,o.id].join()]||[],(function(i,s){return[a("order-item",{key:"order-item_"+s,attrs:{data:i,continuous:n.allowContinuous},on:{dragstart:n.dragStartHandler,click:n.orderClickHandler,assign:n.assignClickHandler}})]}))],2)])})),0)])],1)}))]}))],2)],1)},W=[];__vue_render__$2._withStripped=!0;const P=undefined,U=undefined,B=undefined,q=undefined,V=normalizeComponent({render:__vue_render__$2,staticRenderFns:W},void 0,J,"data-v-60d08951",!1,void 0,!1,void 0,void 0,void 0);var X,Z=void 0,G=void 0;const K={name:"ComponentsResource",components:{},props:{debug:{type:Boolean,default:!1},headerTitle:{type:String,default:"Header Title"},waitTitle:{type:String,default:"Wait Title"},data:{type:Array,default:()=>[]}},data:()=>({pageLoad:!1,expandAll:!0}),computed:{dataList:{get(){const n=undefined;return[...this.data.map((n=>({...n,active:void 0===n.active||n.active,waitActive:void 0===n.waitActive||n.waitActive})))]},set(n){this.$emit("update:data",n)}},isAllExpand(){return!this.dataList.some((n=>!n.active))},isAllCollapse(){return!this.dataList.some((n=>n.active))}},mounted(){const n=this.dataList.map((n=>({...n,active:void 0===n.active||n.active})));this.pageLoad||(this.pageLoad=!0,this.dataList=n)},methods:{collapseAllClickHandler(){this.expandAll=!this.expandAll,this.dataList.forEach((n=>{n.active=this.expandAll})),this.dataList=[...this.dataList]},collapseWaitClickHandler(n){const i=this.dataList;i[n].waitActive=!i[n].waitActive,this.dataList=i},collapseClickHandler(n){const i=this.dataList;i[n].active=!i[n].active,this.dataList=i,this.isAllCollapse&&(this.expandAll=!1),this.isAllExpand&&(this.expandAll=!0)},parseLayoutInfo(n,i){var a,s;return(null==n||null===(a=n.layout)||void 0===a||null===(s=a[i])||void 0===s?void 0:s.rowspan)||0}}};var __vue_render__$1=function(){var n=this,i=n.$createElement,a=n._self._c||i;return a("div",{staticClass:"components-resource"},[a("div",{staticClass:"resource-header"},[a("span",{staticClass:"arrow-icon",class:{active:n.expandAll},on:{click:function(i){return n.collapseAllClickHandler()}}},[a("i",{staticClass:"fa-solid fa-angles-down"}),n._v(" "+n._s(n.headerTitle)+"\n    ")])]),n._v(" "),n._l(n.dataList,(function(i,s){return[a("b-form-row",{key:s,staticClass:"resource-type"},[a("b-col",{staticClass:"resource-item",attrs:{cols:"12"}},[a("b-form-row",{staticClass:"append-item"},[a("b-col",{staticClass:"label p-0",attrs:{"data-id":i.id}},[a("span",{staticClass:"arrow-icon",class:{active:i.active},on:{click:function(i){return n.collapseClickHandler(s)}}},[a("i",{staticClass:"fa-solid fa-angle-down"}),n._v(" "),a("span",{staticClass:"pl-1"},[n._v(n._s(i.name))])]),n._v(" "),n.parseLayoutInfo(i,"wait")>0?[a("b-badge",{staticClass:"b-badge-class",attrs:{id:"badge_"+s},on:{click:function(i){return n.collapseWaitClickHandler(s)}}},[n._v("\n                "+n._s(i.layout.wait.waitRowspan)+"\n              ")]),n._v(" "),a("b-tooltip",{attrs:{target:"badge_"+s,"custom-class":"b-tooltip-class",placement:"topright",triggers:"hover",boundary:"document"}},[n._v("\n                "+n._s(n.waitTitle)+"\n              ")])]:n._e()],2),n._v(" "),a("b-col",{attrs:{cols:"auto"}},[n._t("slot-resource-info",null,{scope:i})],2)],1)],1)],1),n._v(" "),a("b-form-row",{key:"contents_wait_"+s,staticClass:"contents-row collapse-wait",class:{active:i.active&&i.waitActive}},[a("b-col",{staticClass:"resource-children-item",class:["rowspan-"+n.parseLayoutInfo(i,"wait")],attrs:{cols:"12"}},[a("b-form-row",{staticClass:"append-item"},[a("b-col",{staticClass:"label"},[a("span",{staticClass:"pl-3"},[n._v(n._s(n.waitTitle))])])],1)],1)],1),n._v(" "),n._l(i.children,(function(o,r){return a("b-form-row",{key:"contents_"+s+"_"+r,staticClass:"contents-row collapse",class:{active:i.active}},[a("b-col",{staticClass:"resource-children-item",attrs:{cols:"12"}},[a("b-form-row",{staticClass:"append-item"},[a("b-col",{staticClass:"label",attrs:{"data-id":o.id,"data-rowspan":n.parseLayoutInfo(i,o.id)}},[a("span",{staticClass:"pl-3"},[n._v(n._s(o.name))])]),n._v(" "),a("b-col",{attrs:{cols:"auto"}},[n._t("slot-resource-info",null,{scope:o})],2)],1)],1)],1)}))]}))],2)},Q=[];__vue_render__$1._withStripped=!0;const tt=undefined,et=undefined,nt=undefined,it=undefined,at=normalizeComponent({render:__vue_render__$1,staticRenderFns:Q},void 0,K,"data-v-a7eaa2fe",!1,void 0,!1,void 0,void 0,void 0),st={};["allowEdit","allowContinuous","allowAutoAssign"].forEach((n=>{st[`options.${n}`]=function(i){H.cookies.set({key:n,val:i})}}));var ot,rt=void 0,lt=void 0;const dt={name:"ComponentsCalendar",components:{scheduler:V,resourceMenu:at},props:{loading:{type:Boolean,default:!1},resource:{type:Array,default:()=>[]},stock:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},data(){return{isMobile:window.innerWidth<992,defaultData:{hotkey:!0,defaultDate:this.now().format(this.format),defaultView:7,previewDay:1,locale:"en",views:[3,7,15,30],format:"YYYY-MM-DD"},selected:{startDate:this.now().format(this.format),count:7},vCalendarAttrs:[{key:"today",highlight:{fillMode:"light"},dates:this.now().format(this.format)}],updateViewEvent:null}},computed:{dict(){return z[this.lang]||z.en},holiday(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.holiday},stockData:{get(){return this.stock},set(n){this.$emit("update:stock",n)}},itemList:{get(){return this.items},set(n){this.$emit("update:items",n)}},resourceData:{get(){return this.resource},set(n){this.$emit("update:resource",n)}},optionsData:{get(){return{...this.defaultData,...this.options}},set(n){this.$emit("update:options",n)}},allowChangeDate(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowChangeDate)||!1)},allowChangeType(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowChangeType)||!1)},allowEdit(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowEdit)||!1)},allowContinuous(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowContinuous)||!1)},allowAutoAssign(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowAutoAssign)||!1)},allowHotkey(){var n;return!(null===(n=this.optionsData)||void 0===n||!n.hotkey)},headerText(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.headerTitle},waitText(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.waitTitle},format(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.format},views(){var n;const i=undefined;return((null===(n=this.optionsData)||void 0===n?void 0:n.views)||[]).map((n=>({active:this.selected.count===n,value:n})))},lang(){return H.formatLang(this.locale)},locale(){var n;return(null===(n=this.optionsData)||void 0===n?void 0:n.locale)||"en"},previewDay(){var n;return-1*((null===(n=this.optionsData)||void 0===n?void 0:n.previewDay)||0)},dateRange(){const n=this.selected.startDate,a=this.selected.count||1,s=undefined,o=undefined;return{start:i(n).format(this.format),end:i(n).add(a-1,"days").format(this.format)}},vCaleLocale(){let n=this.locale||"en-US";switch(n.toLowerCase()){case"ja_jp":case"ja-jp":case"jajp":case"ja":case"jp":n="ja";break;case"zh_tw":case"zh-tw":case"zhtw":case"tw":n="zh-TW";break;default:n="en-US"}return n},schedulerRef(){var n;return(null===(n=this.$refs)||void 0===n?void 0:n.scheduler)||{}}},watch:{...st,locale(){this.dayJsLocale(this.locale)},selected:{handler(){let{count:n,startDate:a}=this.selected;a=i(a).format(this.format);const s=undefined,o={start:a,end:i(a).add(n-1,"days").format(this.format),count:n};this.optionsData={...this.optionsData,view:o},this.debounceChangeEvent&&clearTimeout(this.debounceChangeEvent),this.debounceChangeEvent=setTimeout((()=>{this.$emit("change",o),delete this.debounceChangeEvent}),100)},immediate:!1,deep:!0},"selected.count":{handler(){H.cookies.set({key:"view-count",val:this.selected.count})},immediate:!1,deep:!0}},mounted(){this.globeEventbind(),this.getSettingCache(),this.$nextTick((()=>{this.init()}))},methods:{deepCopy:n=>JSON.parse(JSON.stringify(n)),init(){this.dayJsLocale(this.locale),splitInit({el:[".components-menu",".components-main"],minSize:[200,20]}),this.viewTodayClickHandler(this.optionsData.defaultDate)},globeEventbind(){window.onresize=()=>{this.isMobile=window.innerWidth<576},this.allowHotkey&&document.addEventListener("keydown",(n=>{const i=n.which||n.keyCode,a=n.ctrlKey?n.ctrlKey:17===i,s=undefined,o=undefined;switch([n.metaKey||a,i].join()){case"true,37":n.preventDefault(),null==this||this.viewShiftClickHandler();break;case"true,39":n.preventDefault(),null==this||this.viewShiftClickHandler(!0);break;case"true,38":case"true,40":n.preventDefault(),null==this||this.viewTodayClickHandler()}}))},getSettingCache(){var n,i;const a=this.deepCopy(this.optionsData);["allowEdit","allowContinuous","allowAutoAssign"].forEach((n=>{a[n]=JSON.parse(H.cookies.get(n)||!1)}));const s=+H.cookies.get("view-count")||+this.optionsData.view||+(null===(n=this.options)||void 0===n||null===(i=n.view)||void 0===i?void 0:i.count)||7;this.selected.count=s,this.optionsData=a},getSize(){return this.isMobile?"":"sm"},now:n=>i(n).isValid()?i(n):i(),dayJsLocale(n){let a=n||"en";switch(a.toLowerCase()){case"zh_tw":case"zh-tw":case"zhtw":case"tw":a="zh-tw"}i.locale(a)},i18n(n){return this.dict[n]},viewsClickHandler(n){n!==this.selected.view&&(this.selected.count=n)},viewShiftClickHandler(n){const a=undefined,s=(n?1:-1)*this.selected.count,o=this.dateRange;o.end=i(o.start).add(s,"days").format(this.format),this.selected.startDate=o.end},viewTodayClickHandler(n){const i=this.now(n).add(this.previewDay,"days").format(this.format);this.selected.startDate=i},itemClickHandler(n){this.$emit("click",n)},itemAssignClickHandler(n){this.$emit("assign",n)},dropHandler(n){this.$emit("drop",n)}}};var __vue_render__=function(){var n=this,i=n.$createElement,a=n._self._c||i;return a("div",{staticClass:"components-calendar container-fluid"},[a("b-overlay",{attrs:{"spinner-variant":"primary",show:n.loading}},[a("div",{staticClass:"header"},[n._t("slot-toolbar-top"),n._v(" "),a("b-form-row",{class:["pb-1",{small:!n.isMobile}]},[a("b-col",{attrs:{cols:"auto"}},[a("b-form-checkbox",{attrs:{switch:""},model:{value:n.options.allowEdit,callback:function(i){n.$set(n.options,"allowEdit",i)},expression:"options.allowEdit"}},[n._v("\n            "+n._s(n.i18n("addnew_onder"))+"\n          ")])],1),n._v(" "),a("b-col",{attrs:{cols:"auto"}},[a("b-form-checkbox",{attrs:{switch:""},model:{value:n.options.allowContinuous,callback:function(i){n.$set(n.options,"allowContinuous",i)},expression:"options.allowContinuous"}},[n._v("\n            "+n._s(n.i18n("continuous_display"))+"\n          ")])],1),n._v(" "),a("b-col",{attrs:{cols:"auto"}},[a("b-form-checkbox",{attrs:{switch:""},model:{value:n.options.allowAutoAssign,callback:function(i){n.$set(n.options,"allowAutoAssign",i)},expression:"options.allowAutoAssign"}},[n._v("\n            "+n._s(n.i18n("autoassign_room"))+"\n          ")])],1)],1),n._v(" "),a("b-form-row",[a("b-col",{staticClass:"pb-2",attrs:{cols:"12",md:"auto"}},[a("b-form-row",[a("b-col",{attrs:{cols:"auto"}},[a("b-button",{attrs:{size:n.getSize(),variant:"outline-light"},on:{click:n.viewTodayClickHandler}},[n._v("\n                "+n._s(n.i18n("today"))+"\n              ")])],1),n._v(" "),a("b-col",[a("b-button-group",{staticClass:"w-100"},[a("v-date-picker",{attrs:{locale:n.vCaleLocale,attributes:n.vCalendarAttrs,masks:{input:"YYYY-MM-DD"}},scopedSlots:n._u([{key:"default",fn:function(i){var s=i.inputValue,o=i.inputEvents;return[a("b-form-input",n._g({attrs:{size:n.getSize(),value:s}},o))]}}]),model:{value:n.selected.startDate,callback:function(i){n.$set(n.selected,"startDate",i)},expression:"selected.startDate"}}),n._v(" "),a("b-button",{staticClass:"mxw-60px",attrs:{size:n.getSize(),variant:"outline-light"},on:{click:function(i){return n.viewShiftClickHandler()}}},[a("i",{staticClass:"fa-solid fa-angle-left"})]),n._v(" "),a("b-button",{staticClass:"mxw-60px",attrs:{size:n.getSize(),variant:"outline-light"},on:{click:function(i){return n.viewShiftClickHandler(!0)}}},[a("i",{staticClass:"fa-solid fa-angle-right"})])],1)],1)],1)],1),n._v(" "),a("b-col",{staticClass:"pb-2",attrs:{cols:"auto"}},[a("b-button-group",n._l(n.views,(function(i,s){return a("b-button",{key:s,class:{active:i.active},attrs:{size:n.getSize(),variant:"outline-primary"},on:{click:function(a){return n.viewsClickHandler(i.value)}}},[n._v("\n              "+n._s(i.value)+n._s(n.i18n("day"))+"\n            ")])})),1)],1),n._v(" "),a("b-col",{staticClass:"right-middle pb-2"},[n._t("slot-toolbar-right")],2)],1)],2),n._v(" "),a("b-row",{staticClass:"main"},[a("div",{staticClass:"components-menu"},[a("resource-menu",{attrs:{"header-title":n.headerText,"wait-title":n.waitText,data:n.resourceData},on:{"update:data":function(i){n.resourceData=i}},scopedSlots:n._u([{key:"slot-resource-info",fn:function(i){var a=i.scope;return[n._t("slot-resource-info",null,{scope:a})]}}],null,!0)})],1),n._v(" "),a("div",{staticClass:"components-main"},[a("scheduler",{ref:"scheduler",attrs:{locale:n.locale,range:n.dateRange,holiday:n.options.holiday,resource:n.resourceData,stock:n.stockData,items:n.itemList,"allow-change-date":n.allowChangeDate,"allow-change-type":n.allowChangeType,"allow-edit":n.allowEdit,"allow-continuous":n.allowContinuous,"allow-auto-assign":n.allowAutoAssign},on:{"update:resource":function(i){n.resourceData=i},"update:stock":function(i){n.stockData=i},"update:items":function(i){n.itemList=i},click:n.itemClickHandler,assign:n.itemAssignClickHandler,drop:n.dropHandler}})],1)])],1)],1)},ct=[];__vue_render__._withStripped=!0;const ut=undefined,ht=undefined,ft=undefined,mt=undefined,pt=normalizeComponent({render:__vue_render__,staticRenderFns:ct},void 0,dt,"data-v-b786664a",!1,void 0,!1,void 0,void 0,void 0);var vt;const gt=undefined,yt=undefined,_t=undefined,wt=undefined,bt=undefined,kt=undefined;return normalizeComponent({},void 0,{install:function(n){n.component("calendar",pt)},calendar:pt},void 0,void 0,void 0,!1,void 0,void 0,void 0)}));
//# sourceMappingURL=calendar.umd.js.map
