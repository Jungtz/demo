!function(n,a){"object"==typeof exports&&"undefined"!=typeof module?module.exports=a(require("@/components/ContextMenu")):"function"==typeof define&&define.amd?define(["@/components/ContextMenu"],a):(n="undefined"!=typeof globalThis?globalThis:n||self).calendar=a(n.ContextMenu)}(this,(function(n){"use strict";function _interopDefaultLegacy(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var a=_interopDefaultLegacy(n),i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getDefaultExportFromNamespaceIfPresent(n){return n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getDefaultExportFromNamespaceIfNotNamed(n){return n&&Object.prototype.hasOwnProperty.call(n,"default")&&1===Object.keys(n).length?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var a=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach((function(i){var s=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(a,i,s.get?s:{enumerable:!0,get:function(){return n[i]}})})),a}function createCommonjsModule(n){var a={exports:{}};return n(a,a.exports),a.exports}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var s=createCommonjsModule((function(n,a){var s,o;s=i,o=function(){var n=1e3,a=6e4,i=36e5,s="millisecond",o="second",r="minute",u="hour",c="day",f="week",p="month",v="quarter",g="year",w="date",b="Invalid Date",k=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var a=["th","st","nd","rd"],i=n%100;return"["+n+(a[(i-20)%10]||a[i]||a[0])+"]"}},m=function(n,a,i){var s=String(n);return!s||s.length>=a?n:""+Array(a+1-s.length).join(i)+n},H={s:m,z:function(n){var a=-n.utcOffset(),i=Math.abs(a),s=Math.floor(i/60),o=i%60;return(a<=0?"+":"-")+m(s,2,"0")+":"+m(o,2,"0")},m:function t(n,a){if(n.date()<a.date())return-t(a,n);var i=12*(a.year()-n.year())+(a.month()-n.month()),s=n.clone().add(i,p),o=a-s<0,r=n.clone().add(i+(o?-1:1),p);return+(-(i+(a-s)/(o?s-r:r-s))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:p,y:g,w:f,d:c,D:w,h:u,m:r,s:o,ms:s,Q:v}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return void 0===n}},A="en",T={};T[A]=z;var L="$isDayjsObject",S=function(n){return n instanceof x||!(!n||!n[L])},E=function t(n,a,i){var s;if(!n)return A;if("string"==typeof n){var o=n.toLowerCase();T[o]&&(s=o),a&&(T[o]=a,s=o);var r=n.split("-");if(!s&&r.length>1)return t(r[0])}else{var u=n.name;T[u]=n,s=u}return!i&&s&&(A=s),s||!i&&A},O=function(n,a){if(S(n))return n.clone();var i="object"==typeof a?a:{};return i.date=n,i.args=arguments,new x(i)},Y=H;Y.l=E,Y.i=S,Y.w=function(n,a){return O(n,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var x=function(){function M(n){this.$L=E(n.locale,null,!0),this.parse(n),this.$x=this.$x||n.x||{},this[L]=!0}var z=M.prototype;return z.parse=function(n){this.$d=function(n){var a=n.date,i=n.utc;if(null===a)return new Date(NaN);if(Y.u(a))return new Date;if(a instanceof Date)return new Date(a);if("string"==typeof a&&!/Z$/i.test(a)){var s=a.match(k);if(s){var o=s[2]-1||0,r=(s[7]||"0").substring(0,3);return i?new Date(Date.UTC(s[1],o,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)):new Date(s[1],o,s[3]||1,s[4]||0,s[5]||0,s[6]||0,r)}}return new Date(a)}(n),this.init()},z.init=function(){var n=this.$d;this.$y=n.getFullYear(),this.$M=n.getMonth(),this.$D=n.getDate(),this.$W=n.getDay(),this.$H=n.getHours(),this.$m=n.getMinutes(),this.$s=n.getSeconds(),this.$ms=n.getMilliseconds()},z.$utils=function(){return Y},z.isValid=function(){return!(this.$d.toString()===b)},z.isSame=function(n,a){var i=O(n);return this.startOf(a)<=i&&i<=this.endOf(a)},z.isAfter=function(n,a){return O(n)<this.startOf(a)},z.isBefore=function(n,a){return this.endOf(a)<O(n)},z.$g=function(n,a,i){return Y.u(n)?this[a]:this.set(i,n)},z.unix=function(){return Math.floor(this.valueOf()/1e3)},z.valueOf=function(){return this.$d.getTime()},z.startOf=function(n,a){var i=this,s=!!Y.u(a)||a,v=Y.p(n),l=function(n,a){var o=Y.w(i.$u?Date.UTC(i.$y,a,n):new Date(i.$y,a,n),i);return s?o:o.endOf(c)},$=function(n,a){return Y.w(i.toDate()[n].apply(i.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(a)),i)},b=this.$W,k=this.$M,C=this.$D,z="set"+(this.$u?"UTC":"");switch(v){case g:return s?l(1,0):l(31,11);case p:return s?l(1,k):l(0,k+1);case f:var H=this.$locale().weekStart||0,A=(b<H?b+7:b)-H;return l(s?C-A:C+(6-A),k);case c:case w:return $(z+"Hours",0);case u:return $(z+"Minutes",1);case r:return $(z+"Seconds",2);case o:return $(z+"Milliseconds",3);default:return this.clone()}},z.endOf=function(n){return this.startOf(n,!1)},z.$set=function(n,a){var i,f=Y.p(n),v="set"+(this.$u?"UTC":""),b=(i={},i[c]=v+"Date",i[w]=v+"Date",i[p]=v+"Month",i[g]=v+"FullYear",i[u]=v+"Hours",i[r]=v+"Minutes",i[o]=v+"Seconds",i[s]=v+"Milliseconds",i)[f],k=f===c?this.$D+(a-this.$W):a;if(f===p||f===g){var C=this.clone().set(w,1);C.$d[b](k),C.init(),this.$d=C.set(w,Math.min(this.$D,C.daysInMonth())).$d}else b&&this.$d[b](k);return this.init(),this},z.set=function(n,a){return this.clone().$set(n,a)},z.get=function(n){return this[Y.p(n)]()},z.add=function(s,v){var w,b=this;s=Number(s);var k=Y.p(v),y=function(n){var a=O(b);return Y.w(a.date(a.date()+Math.round(n*s)),b)};if(k===p)return this.set(p,this.$M+s);if(k===g)return this.set(g,this.$y+s);if(k===c)return y(1);if(k===f)return y(7);var C=(w={},w[r]=a,w[u]=i,w[o]=n,w)[k]||1,z=this.$d.getTime()+s*C;return Y.w(z,this)},z.subtract=function(n,a){return this.add(-1*n,a)},z.format=function(n){var a=this,i=this.$locale();if(!this.isValid())return i.invalidDate||b;var s=n||"YYYY-MM-DDTHH:mm:ssZ",o=Y.z(this),r=this.$H,u=this.$m,c=this.$M,f=i.weekdays,p=i.months,v=i.meridiem,h=function(n,i,o,r){return n&&(n[i]||n(a,s))||o[i].slice(0,r)},d=function(n){return Y.s(r%12||12,n,"0")},g=v||function(n,a,i){var s=n<12?"AM":"PM";return i?s.toLowerCase():s};return s.replace(C,(function(n,s){return s||function(n){switch(n){case"YY":return String(a.$y).slice(-2);case"YYYY":return Y.s(a.$y,4,"0");case"M":return c+1;case"MM":return Y.s(c+1,2,"0");case"MMM":return h(i.monthsShort,c,p,3);case"MMMM":return h(p,c);case"D":return a.$D;case"DD":return Y.s(a.$D,2,"0");case"d":return String(a.$W);case"dd":return h(i.weekdaysMin,a.$W,f,2);case"ddd":return h(i.weekdaysShort,a.$W,f,3);case"dddd":return f[a.$W];case"H":return String(r);case"HH":return Y.s(r,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return g(r,u,!0);case"A":return g(r,u,!1);case"m":return String(u);case"mm":return Y.s(u,2,"0");case"s":return String(a.$s);case"ss":return Y.s(a.$s,2,"0");case"SSS":return Y.s(a.$ms,3,"0");case"Z":return o}return null}(n)||o.replace(":","")}))},z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},z.diff=function(s,w,b){var k,C=this,z=Y.p(w),H=O(s),A=(H.utcOffset()-this.utcOffset())*a,T=this-H,D=function(){return Y.m(C,H)};switch(z){case g:k=D()/12;break;case p:k=D();break;case v:k=D()/3;break;case f:k=(T-A)/6048e5;break;case c:k=(T-A)/864e5;break;case u:k=T/i;break;case r:k=T/a;break;case o:k=T/n;break;default:k=T}return b?k:Y.a(k)},z.daysInMonth=function(){return this.endOf(p).$D},z.$locale=function(){return T[this.$L]},z.locale=function(n,a){if(!n)return this.$L;var i=this.clone(),s=E(n,a,!0);return s&&(i.$L=s),i},z.clone=function(){return Y.w(this.$d,this)},z.toDate=function(){return new Date(this.valueOf())},z.toJSON=function(){return this.isValid()?this.toISOString():null},z.toISOString=function(){return this.$d.toISOString()},z.toString=function(){return this.$d.toUTCString()},M}(),j=x.prototype;return O.prototype=j,[["$ms",s],["$s",o],["$m",r],["$H",u],["$W",c],["$M",p],["$y",g],["$D",w]].forEach((function(n){j[n[1]]=function(a){return this.$g(a,n[0],n[1])}})),O.extend=function(n,a){return n.$i||(n(a,x,O),n.$i=!0),O},O.locale=E,O.isDayjs=S,O.unix=function(n){return O(1e3*n)},O.en=T[A],O.Ls=T,O.p={},O},n.exports=o()})),o=createCommonjsModule((function(n,a){var s,o;s=i,o=function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var a=["th","st","nd","rd"],i=n%100;return"["+n+(a[(i-20)%10]||a[i]||a[0])+"]"}}},n.exports=o()})),r=createCommonjsModule((function(n,a){var o,r;o=i,r=function(n){function e(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var a=e(n),i={name:"zh-tw",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(n,a){return"W"===a?n+"週":n+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"},meridiem:function(n,a){var i=100*n+a;return i<600?"凌晨":i<900?"早上":i<1100?"上午":i<1300?"中午":i<1800?"下午":"晚上"}};return a.default.locale(i,null,!0),i},n.exports=r(s)})),u=createCommonjsModule((function(n,a){var o,r;o=i,r=function(n){function _(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var a=_(n),i={name:"ja",weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(n){return n+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiem:function(n){return n<12?"午前":"午後"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}};return a.default.locale(i,null,!0),i},n.exports=r(s)})),c="undefined"!=typeof window?window:null,f=null===c,p=f?void 0:c.document,v="addEventListener",g="removeEventListener",w="getBoundingClientRect",b="_a",k="_b",C="_c",z="horizontal",NOOP=function(){return!1},H=f?"calc":["","-webkit-","-moz-","-o-"].filter((function(n){var a=p.createElement("div");return a.style.cssText="width:"+n+"calc(9px)",!!a.style.length})).shift()+"calc",isString=function(n){return"string"==typeof n||n instanceof String},elementOrSelector=function(n){if(isString(n)){var a=p.querySelector(n);if(!a)throw new Error("Selector "+n+" did not match a DOM element");return a}return n},getOption=function(n,a,i){var s=n[a];return void 0!==s?s:i},getGutterSize=function(n,a,i,s){if(a){if("end"===s)return 0;if("center"===s)return n/2}else if(i){if("start"===s)return 0;if("center"===s)return n/2}return n},defaultGutterFn=function(n,a){var i=p.createElement("div");return i.className="gutter gutter-"+a,i},defaultElementStyleFn=function(n,a,i){var s={};return isString(a)?s[n]=a:s[n]=H+"("+a+"% - "+i+"px)",s},defaultGutterStyleFn=function(n,a){var i;return(i={})[n]=a+"px",i},Split=function(n,a){if(void 0===a&&(a={}),f)return{};var i=n,s,o,r,u,H,A;Array.from&&(i=Array.from(i));var T,L=elementOrSelector(i[0]).parentNode,E=getComputedStyle?getComputedStyle(L):null,Y=E?E.flexDirection:null,x=getOption(a,"sizes")||i.map((function(){return 100/i.length})),j=getOption(a,"minSize",100),R=Array.isArray(j)?j:i.map((function(){return j})),I=getOption(a,"maxSize",1/0),N=Array.isArray(I)?I:i.map((function(){return I})),W=getOption(a,"expandToMin",!1),B=getOption(a,"gutterSize",10),F=getOption(a,"gutterAlign","center"),J=getOption(a,"snapOffset",30),U=Array.isArray(J)?J:i.map((function(){return J})),P=getOption(a,"dragInterval",1),q=getOption(a,"direction",z),V=getOption(a,"cursor",q===z?"col-resize":"row-resize"),X=getOption(a,"gutter",defaultGutterFn),Z=getOption(a,"elementStyle",defaultElementStyleFn),G=getOption(a,"gutterStyle",defaultGutterStyleFn);function setElementSize(n,a,i,o){var r=Z(s,a,i,o);Object.keys(r).forEach((function(a){n.style[a]=r[a]}))}function setGutterSize(n,a,i){var o=G(s,a,i);Object.keys(o).forEach((function(a){n.style[a]=o[a]}))}function getSizes(){return A.map((function(n){return n.size}))}function getMousePosition(n){return"touches"in n?n.touches[0][o]:n[o]}function adjust(n){var a=A[this.a],i=A[this.b],s=a.size+i.size;a.size=n/this.size*s,i.size=s-n/this.size*s,setElementSize(a.element,a.size,this[k],a.i),setElementSize(i.element,i.size,this[C],i.i)}function drag(n){var i,s=A[this.a],o=A[this.b];this.dragging&&(i=getMousePosition(n)-this.start+(this[k]-this.dragOffset),P>1&&(i=Math.round(i/P)*P),i<=s.minSize+s.snapOffset+this[k]?i=s.minSize+this[k]:i>=this.size-(o.minSize+o.snapOffset+this[C])&&(i=this.size-(o.minSize+this[C])),i>=s.maxSize-s.snapOffset+this[k]?i=s.maxSize+this[k]:i<=this.size-(o.maxSize-o.snapOffset+this[C])&&(i=this.size-(o.maxSize+this[C])),adjust.call(this,i),getOption(a,"onDrag",NOOP)(getSizes()))}function calculateSizes(){var n=A[this.a].element,a=A[this.b].element,i=n[w](),o=a[w]();this.size=i[s]+o[s]+this[k]+this[C],this.start=i[r],this.end=i[u]}function innerSize(n){if(!getComputedStyle)return null;var a=getComputedStyle(n);if(!a)return null;var i=n[H];return 0===i?null:i-=q===z?parseFloat(a.paddingLeft)+parseFloat(a.paddingRight):parseFloat(a.paddingTop)+parseFloat(a.paddingBottom)}function trimToMin(n){var a=innerSize(L);if(null===a)return n;if(R.reduce((function(n,a){return n+a}),0)>a)return n;var i=0,s=[],o=n.map((function(o,r){var u=a*o/100,c=getGutterSize(B,0===r,r===n.length-1,F),f=R[r]+c;return u<f?(i+=f-u,s.push(0),f):(s.push(u-f),u)}));return 0===i?n:o.map((function(n,o){var r=n;if(i>0&&s[o]-i>0){var u=Math.min(i,s[o]-i);i-=u,r=n-u}return r/a*100}))}function stopDragging(){var n=this,i=A[n.a].element,s=A[n.b].element;n.dragging&&getOption(a,"onDragEnd",NOOP)(getSizes()),n.dragging=!1,c[g]("mouseup",n.stop),c[g]("touchend",n.stop),c[g]("touchcancel",n.stop),c[g]("mousemove",n.move),c[g]("touchmove",n.move),n.stop=null,n.move=null,i[g]("selectstart",NOOP),i[g]("dragstart",NOOP),s[g]("selectstart",NOOP),s[g]("dragstart",NOOP),i.style.userSelect="",i.style.webkitUserSelect="",i.style.MozUserSelect="",i.style.pointerEvents="",s.style.userSelect="",s.style.webkitUserSelect="",s.style.MozUserSelect="",s.style.pointerEvents="",n.gutter.style.cursor="",n.parent.style.cursor="",p.body.style.cursor=""}function startDragging(n){if(!("button"in n)||0===n.button){var i=this,s=A[i.a].element,o=A[i.b].element;i.dragging||getOption(a,"onDragStart",NOOP)(getSizes()),n.preventDefault(),i.dragging=!0,i.move=drag.bind(i),i.stop=stopDragging.bind(i),c[v]("mouseup",i.stop),c[v]("touchend",i.stop),c[v]("touchcancel",i.stop),c[v]("mousemove",i.move),c[v]("touchmove",i.move),s[v]("selectstart",NOOP),s[v]("dragstart",NOOP),o[v]("selectstart",NOOP),o[v]("dragstart",NOOP),s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.MozUserSelect="none",s.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",i.gutter.style.cursor=V,i.parent.style.cursor=V,p.body.style.cursor=V,calculateSizes.call(i),i.dragOffset=getMousePosition(n)-i.end}}q===z?(s="width",o="clientX",r="left",u="right",H="clientWidth"):"vertical"===q&&(s="height",o="clientY",r="top",u="bottom",H="clientHeight"),x=trimToMin(x);var K=[];function adjustToMin(n){var a=n.i===K.length,i=a?K[n.i-1]:K[n.i];calculateSizes.call(i);var s=a?i.size-n.minSize-i[C]:n.minSize+i[k];adjust.call(i,s)}function setSizes(n){var a=trimToMin(n);a.forEach((function(n,i){if(i>0){var s=K[i-1],o=A[s.a],r=A[s.b];o.size=a[i-1],r.size=n,setElementSize(o.element,o.size,s[k],o.i),setElementSize(r.element,r.size,s[C],r.i)}}))}function destroy(n,a){K.forEach((function(i){if(!0!==a?i.parent.removeChild(i.gutter):(i.gutter[g]("mousedown",i[b]),i.gutter[g]("touchstart",i[b])),!0!==n){var o=Z(s,i.a.size,i[k]);Object.keys(o).forEach((function(n){A[i.a].element.style[n]="",A[i.b].element.style[n]=""}))}}))}return(A=i.map((function(n,a){var s={element:elementOrSelector(n),size:x[a],minSize:R[a],maxSize:N[a],snapOffset:U[a],i:a},o;if(a>0&&((o={a:a-1,b:a,dragging:!1,direction:q,parent:L})[k]=getGutterSize(B,a-1==0,!1,F),o[C]=getGutterSize(B,!1,a===i.length-1,F),"row-reverse"===Y||"column-reverse"===Y)){var r=o.a;o.a=o.b,o.b=r}if(a>0){var u=X(a,q,s.element);setGutterSize(u,B,a),o[b]=startDragging.bind(o),u[v]("mousedown",o[b]),u[v]("touchstart",o[b]),L.insertBefore(u,s.element),o.gutter=u}return setElementSize(s.element,s.size,getGutterSize(B,0===a,a===i.length-1,F),a),a>0&&K.push(o),s}))).forEach((function(n){var a=n.element[w]()[s];a<n.minSize&&(W?adjustToMin(n):n.minSize=a)})),{setSizes:setSizes,getSizes:getSizes,collapse:function collapse(n){adjustToMin(A[n])},destroy:destroy,parent:L,pairs:K}};function splitInit({el:n,sizes:a=[20,80],minSize:i=350,gutterSize:s=2}){const o=Split(n,{sizes:a,minSize:i,expandToMin:!0,gutterSize:s,onDragEnd(n){n=n.filter((n=>isNaN(+n))).length?[20,80]:n.map((n=>+n))}});return o.setSizes(a),o}var A={tw:{today:"今日",day:"日",month:"月",addnew_onder:"新增訂單",continuous_display:"連續顯示",autoassign_room:"自動排房",whole_building:"包棟",stock_notset:"無庫存",note:"註"},en:{today:"Today",day:"Day",month:"Month",addnew_onder:"New Order",continuous_display:"Continuous View",autoassign_room:"Automatic Room Assignment",whole_building:"Whole Building",stock_notset:"No Inventory Setup",note:"※"},ja:{today:"今日",day:"日",month:"月",addnew_onder:"注文の追加",continuous_display:"続けて表示する",autoassign_room:"自動で部屋を割り当て",whole_building:"建物全体",stock_notset:"在庫なし",note:"※"}};const T={guid(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return[s4()+s4(),s4(),s4(),s4(),s4(),s4()+s4()].join("-")},cookies:{get(n){const a=document.cookie.split(";"),i={};return a.map((n=>{const a=n.trim().split("=");i[a[0]]=a[1]})),void 0===n?i:void 0===i[n]?void 0:decodeURIComponent(i[n])},del(n){this.cookies.set(n,"",-1)},set(n){if(void 0!==n){void 0===n.days&&(n.days=15);let a="";const i=new Date;i.setDate(i.getDate()+n.days),a=`expires=${i.toUTCString()};`;let s="";void 0!==n.domain&&(s=`domain=${n.domain};`);let o="SameSite=Lax;";void 0!==n.SameSite&&(o=`SameSite=${n.SameSite};`),document.cookie=`${n.key}=${encodeURIComponent(n.val)};${o}path=/;${a};${s}`}}},formatLang(n=""){let a=null==n?void 0:n.toLowerCase();switch(a){case"cn":case"zh_cn":case"zh-cn":a="cn";break;case"en":case"en_us":case"en-us":a="en";break;case"tw":case"zh_tw":case"zh-tw":a="tw"}return a}};var L,E=void 0,Y=void 0;function normalizeComponent(n,a,i,s,o,r,u,c,f,p){"boolean"!=typeof u&&(f=c,c=u,u=!1);const v="function"==typeof i?i.options:i;let g;if(n&&n.render&&(v.render=n.render,v.staticRenderFns=n.staticRenderFns,v._compiled=!0,o&&(v.functional=!0)),s&&(v._scopeId=s),r?(g=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),a&&a.call(this,f(n)),n&&n._registeredComponents&&n._registeredComponents.add(r)},v._ssrRegister=g):a&&(g=u?function(n){a.call(this,p(n,this.$root.$options.shadowRoot))}:function(n){a.call(this,c(n))}),g)if(v.functional){const n=v.render;v.render=function renderWithStyleInjection(a,i){return g.call(i),n(a,i)}}else{const n=v.beforeCreate;v.beforeCreate=n?[].concat(n,g):[g]}return i}const x={name:"ComponentsItem",components:{ContextMenu:a.default},props:{loading:{type:Boolean,default:!1},data:{type:Object,default:()=>({})},continuous:{type:Boolean,default:!1}},data:()=>({}),computed:{colSpan(){let n=null;if(this.continuous&&this.data._uids.length>1){const a=this.data._uids.indexOf(this.data._uid);n=["colspan-"+(this.data._uids.length-a)].join(" ")}return n}},mounted(){},methods:{dragStartHandler(n){n.rawData=this.data,this.$emit("dragstart",n)},hasSlot(n="default"){return!!this.$slots[n]||!!this.$scopedSlots[n]},clickHandler(){this.$emit("click",this.data)},assignClickHandler(n){n.stopPropagation(),this.$emit("assign",{value:this.data,e:n})},paymentStatusIcon(n){let a="fa-regular fa-credit-card";switch(n){case"deposit_unpaid":a="fa-solid fa-circle-exclamation fa-fw";break;case"unpaid":a="fa-regular fa-calendar-check"}return a}}};var __vue_render__$4=function(){var n=this,a=n.$createElement,i=n._self._c||a;return i("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"components-item",class:[n.data.checked_status,{assign:n.data.assign,unassign:!n.data.assign,continuous:n.continuous},n.colSpan],attrs:{id:n.data._uid,title:n.data.tooltip,"data-type":"item","data-_uid":n.data._uid,"data-_uids":n.data._uids,draggable:"true","data-order":n.data.order},on:{dragstart:n.dragStartHandler,click:n.clickHandler}},[i("b-overlay",{attrs:{"spinner-variant":"primary",show:n.loading}},[n.hasSlot("slot-item-info")?[n._t("slot-item-info",null,{scope:n.data})]:[n._v("\n      "+n._s(n.data.title)+",\n      "+n._s(n.data.start)+"-"+n._s(n.data.end)+",\n      "+n._s(n.data.assign)+"\n    ")],n._v(" "),i("div",{staticClass:"assign-button",on:{click:n.assignClickHandler}},[i("i",{staticClass:"fas fa-chevron-circle-right"})])],2)],1)},j=[];__vue_render__$4._withStripped=!0;const R=undefined,I=undefined,N=undefined,W=undefined,B=undefined;var F,J=void 0;const U={name:"ComponentsScheduler",components:{orderItem:normalizeComponent({render:__vue_render__$4,staticRenderFns:j},void 0,x,"data-v-00d02a57",!1,void 0,!1,void 0,void 0,void 0)},props:{loading:{type:Boolean,default:!1},showWait:{type:Boolean,default:!0},locale:{type:String,default:"en"},range:{type:Object,default:()=>({})},resource:{type:Array,default:()=>[]},stock:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},holiday:{type:Array,default:()=>[]},format:{type:String,default:"YYYY-MM-DD"},defaultHoliday:{type:Array,default:()=>[6,0]},allowChangeDate:{type:Boolean,default:!1},allowChangeType:{type:Boolean,default:!1},allowEdit:{type:Boolean,default:!1},allowContinuous:{type:Boolean,default:!1},allowAutoAssign:{type:Boolean,default:!1},marginTop:{type:Number,default:0}},data:()=>({cname:"resource-item",grouping:{},mousePosition:0,currentChildId:{}}),computed:{dict(){return A[this.lang]||A.en},lang(){return T.formatLang(this.locale)},now(){return s().format(this.format)},resourceList:{get(){return this.resource},set(n){this.$emit("update:resource",n)}},itemList:{get(){const n=this.deepCopy(this.items);return n.sort(((n,a)=>n.start===a.start?0:n.start>a.start?1:-1)),n},set(n){this.$emit("update:items",n)}},viewCount(){const n=s(this.range.start),a=undefined,i=undefined;return s(this.range.end).diff(n,"days")+1},dates(){const n=[...new Array(this.viewCount)].fill({}),a={};let i="";const o=n.map(((n,o)=>{const r=s(this.range.start).add(o,"days"),u=r.format(this.format),c=this.holiday.find((n=>n.date===u)),f=r.format("MM"),p=i!==f;return p&&(i=f),a[f]||(a[f]=0),a[f]++,{active:p,date:u,year:r.format("YYYY"),month:f,day:r.format("D"),week:r.format("dd"),...c?{holiday:c.display_name}:{}}}));return o.forEach((n=>{n.active&&(n.cols=a[n.month])})),o},dataResult(){const n={},a={};this.itemList.forEach((i=>{i.order_group=i.order_group||Math.random(),a[i.order_group]||(a[i.order_group]={});const s=this.resourceList.find((n=>n.id===i.room_type));s&&Array.isArray(s.children)&&s.children.find((n=>n.id===i.room_number_id))||(i.room_number_id=null,i.nan||(i.nan=1));const o=this.allowAutoAssign||i.assign?i.room_number_id:null;void 0===i._uid&&(i._uid=T.guid());const r=this.grouping[i._uid];let u=[i.room_type,o,r].join();const c=a[i.order_group][u];if(c){const s=c[c.length-1].end;c.length>0&&(c[0].start===i.start||s!==i.start)&&(n[u]||(n[u]=u+i.end),u=n[u]||u,a[i.order_group][u]||(a[i.order_group][u]=[]))}else a[i.order_group][u]=[];a[i.order_group][u].push(i)}));const i=this.deepCopy(this.itemList),s=this.checkOverwrite(i),o=[],r={};this.itemList.forEach((n=>{let i=this.allowAutoAssign||n.assign?n.room_number_id:null;if(s.length){const a=[n.start,n.room_type,n.room_number_id].join(),r=undefined;s.includes(a)&&(o.includes(a)?(i=null,n.room_number_id=null,n.nan=2):o.push(a))}const u=[n.start,n.room_type,i].join();r[u]||(r[u]=[]);let c=[],f=[];const p=Object.entries(a[n.order_group]).findIndex((([a,i])=>i.find((a=>a._uid===n._uid))));-1!==p&&(c=Object.entries(a[n.order_group])[p][1].map((n=>n._uid)),f=Object.entries(a[n.order_group])[p][1].map((n=>n.item_id))),r[u].push({...n,_uids:c,items:f})}));const u={};return Object.entries(r).forEach((([n,a])=>{a.sort(((n,a)=>{const i=n._uids.join(),s=a._uids.join();switch(`${!!u[i]}${!!u[s]}`){case"truetrue":return 0;case"truefalse":return-1;case"falsetrue":return 1}return n._uids.length===a._uids.length?0:n._uids.length>a._uids.length?-1:1})),a.forEach(((n,i)=>{if(n._uids.length){const i=n._uids.join();u[i]||(u[i]=this.getMinOrder(a,u),Object.entries(r).forEach((([n,a])=>{a.forEach(((n,a)=>{const s=undefined;(n._uids.join()||"")===i&&(n.order=u[i])}))})))}}))})),r},dateOpenList(){const n={};return this.dates.forEach((a=>{n[a]=this.getStock(a.date).full})),n}},watch:{items:{handler(){setTimeout((()=>{this.updateRowspan()}))},immediate:!0,deep:!0},allowAutoAssign:{handler(){setTimeout((()=>{this.updateRowspan()}))},immediate:!1,deep:!0},range:{handler(){this.resourceList.forEach((n=>{delete n.layout})),setTimeout((()=>{this.updateRowspan()}))},immediate:!1,deep:!0}},mounted(){setTimeout((()=>{this.updateRowspan(),this.scrollEventSet()}))},methods:{hasSlot(n="default"){return!!this.$slots[n]||!!this.$scopedSlots[n]},isActive:n=>void 0===n.active||n.active,isAllActive(n){return this.isActive(n)&&(void 0===n.waitActive||n.waitActive)},updateItemPosition(){const n=this.deepCopy(this.itemList);n.forEach((n=>{const a=document.querySelector(`[data-_uid="${n._uid}"]`);if(a){const{left:i,right:s}=a.getBoundingClientRect();n.left=i.toFixed(0),n.right=s.toFixed(0)}})),this.itemList=n},mousedownHandler(n){this.mousePosition=n.x},i18n(n){return this.dict[n]},scrollEventSet(){const n=document.querySelector(".components-resource .resource-header.stuck"),a=document.querySelector(".components-scheduler .scheduler-header.stuck");n&&a&&(window.addEventListener("scroll",(()=>{this.offsetY=a.getBoundingClientRect().top+1-this.marginTop}),{once:!0}),window.addEventListener("scroll",(()=>{const i=undefined,s=this.getScroll().top-this.offsetY;a.style.top=s>0?`${s}px`:0,n.style.top=a.style.top})))},getScroll(){const n=document.body,a=document.documentElement,i=parseFloat(window.pageYOffset||n.scrollTop||a.scrollTop);return{top:i,bottom:n.clientHeight-window.innerHeight-i}},getStock(n,a){var i;return(null===(i=this.stock[a])||void 0===i?void 0:i[n])||{}},checkStock(n,a){const i=undefined;return void 0!==this.getStock(n,a).stock},checkLock(n,a){const i=this.getStock(n,a);return void 0!==i.open&&!i.open},getAllStockFull(n){let a=!1;return Object.entries(this.stock).forEach((([i,s])=>{var o;a||(a=!(null===(o=s[n])||void 0===o||!o.full))})),a},getMinOrder(n,a){let i=1;if(n.length>1){const s=n.map((n=>a[n._uids.join()])).filter((n=>n));for(;s.includes(i);)i++}return i},waitDataResult(n){const a=this.dataResult[n]||[];return a.sort(((n,a)=>n.order===a.order?0:n.order>a.order?1:-1)),a},deepCopy:n=>JSON.parse(JSON.stringify(n)),isToday(n){return n===this.now},isWeekend(n){return this.defaultHoliday.includes(s(n).day())},isHoliday(n){const a=this.holiday.find((a=>a.date===n));return(null==a?void 0:a.display_name)||""},dateTooltip(n){const a=[n],i=this.isToday(n),s=this.isHoliday(n);return i&&a.push(`(${this.i18n("today")})`),s&&a.push(`(${s})`),a.join("")},dateClickHandler(n,a){this.$emit("click",{type:"date",value:n,e:a})},stockClickHandler(n,a){const{date:i,room:s,num:o}=n;this.$emit("click",{type:"stock",value:n,data:this.getStock(i,s),e:a})},orderClickHandler(n){this.$emit("click",{type:"order",value:n})},assignClickHandler(n){const{value:a,e:i}=n;this.$emit("assign",{type:"assign",value:a,e:i})},itemClickHandler(n){const{date:a,room:i,num:s,full:o}=n;this.allowEdit&&!o&&this.$emit("click",{type:"item",value:n})},dragStartHandler(n){var a;this.currentChildId=n.target.parentNode.dataset;const i=null===(a=n.target)||void 0===a?void 0:a.dataset;if(null!=i&&i._uid){const a={...this.currentChildId,_uid:i._uid,_uids:i._uids,rawData:n.rawData};this.dragTarget=a,n.dataTransfer.setData("text/plain",JSON.stringify(a)),n.dataTransfer.effectAllowed="move"}n.target.style.opacity=.5,this.$emit("drop-start",n)},dragOverHandler(n){document.body.style.cursor="";const{type:a,id:i,date:s,disabled:o}=n.target.dataset;if("true"===o)document.body.style.cursor="not-allowed",n.target.style.background="#f2f2f2";else{n.preventDefault();const o=n.target.querySelectorAll(".components-item").length;if(!i||"wait"!==a&&o||(n.target.style.background="#f2f2f2"),this.allowChangeDate||s!==this.currentChildId.date&&(document.body.style.cursor="not-allowed"),!this.allowChangeType)try{const n=(i||"").split(",")[0],a=undefined;n!==(this.currentChildId.id||"").split(",")[0]&&(document.body.style.cursor="not-allowed")}catch(n){}}n.target.style.pointerEvents="","item"===a&&(n.target.style.pointerEvents="none"),this.$emit("drop-over",n)},dragLeaveHandler(n){n.preventDefault(),n.target.style.background="",this.$emit("drop-leave",n)},dragEnterHandler(n){n.preventDefault(),this.$emit("drop-enter",n)},dragEndHandler(n){n.preventDefault(),this.clearDragStyle(),this.$emit("drop-end",n)},dropHandler(n){if(n.preventDefault(),this.clearDragStyle(n),!this.allowChangeType)try{const a=undefined,i=(JSON.parse(n.dataTransfer.getData("text/plain")).id||"").split(",")[0],s=undefined;if(i!==(n.target.dataset.id||"").split(",")[0])return void this.updateRowspan()}catch(n){return}const{type:a,id:i}=n.target.dataset;if(i){const i=n.target.querySelectorAll(".components-item").length,o="wait"!==a;try{const r=JSON.parse(n.dataTransfer.getData("text/plain")),{_uid:u,_uids:c,rawData:f}=r,{date:p,id:v}=n.target.dataset,[g,w]=v.split(",").map((n=>+n));if("wait"===a||!i||v===r.id){const a=this.deepCopy(this.itemList);if(this.allowContinuous){const n=c.split(",");let i=0;if(this.allowChangeDate){let o=-1,r=Number.MAX_SAFE_INTEGER;n.forEach(((n,i)=>{const s=a.findIndex((a=>a._uid===n)),u=+a[s].left,c=this.mousePosition-u;c>0&&c<r&&(r=c,o=i)}));const u=a.findIndex((a=>a._uid===n[o]));i=s(p).diff(s(a[u].start),"days")}else if(p!==r.date)return;n.forEach((n=>{const r=a.findIndex((a=>a._uid===n));a[r].assign=o,a[r].room_type=g,a[r].room_number_id=w||null,i&&(a[r].start=s(a[r].start).add(i,"days").format(this.format),a[r].end=s(a[r].end).add(i,"days").format(this.format))}))}else{const i=a.findIndex((n=>n._uid===u));a[i].assign=o,a[i].room_type=g,a[i].room_number_id=w||null;const r=s(p).diff(s(a[i].start),"days");if(!this.allowChangeDate)try{const a=JSON.parse(n.dataTransfer.getData("text/plain")),i=n.target.dataset.date;if(a.date&&a.date!==i)return void this.updateRowspan()}catch(n){return}r&&(a[i].start=p,a[i].end=s(a[i].end).add(r,"days").format(this.format))}const i=this.checkOverwrite(a);if(i.length){const n=i[0].split(","),a=document.querySelector(['[data-type="content"]',`[data-date="${n[0]}"]`,`[data-id="${[n[1],n[2]].join()}"]`].join(""));a&&(a.classList.add("easeInAnim"),setTimeout((()=>{a.classList.remove("easeInAnim")}),500))}else setTimeout((()=>{this.itemList=a,this.$emit("drop",{_uid:u,date:p,room:g,...w?{num:w}:null,rawData:f})}))}}catch(n){return}}setTimeout((()=>{this.grouping={},this.updateRowspan()}))},clearDragStyle(){this.currentChildId={},document.body.style.cursor="",document.querySelectorAll(".components-item").forEach((n=>{n.style.pointerEvents="",n.style.background="",n.style.opacity=""})),document.querySelectorAll(".resource-item li > div[data-type]").forEach((n=>{n.style.background=""}))},updateRowspan(){if(this.debounceSettimeoutUpdateRowspan)return;clearTimeout(this.debounceSettimeoutUpdateRowspan),this.debounceSettimeoutUpdateRowspan=setTimeout((()=>{delete this.debounceSettimeoutUpdateRowspan}),100);const n=this.deepCopy(this.resourceList);n.forEach(((a,i)=>{delete n[i].layout}));const a=[],i=[`.${this.cname} [data-type="wait"]`,`.${this.cname} [data-type="content"]`].join();document.querySelectorAll(i).forEach((i=>{const s=i.querySelectorAll(".components-item").length,o=i.dataset.id,r=o.split(",")[0],u=o.split(",")[1],c=n.findIndex((n=>n.id===+r));if(-1!==c){const i=n[c];i.layout||(i.layout={}),i.layout[u]||(i.layout[u]={rowspan:0}),"wait"===u&&(a[r]||(a[r]=0),a[r]+=s,i.layout[u].waitRowspan=a[r]),i.layout[u].rowspan=Math.max(i.layout[u].rowspan,s),this.allowAutoAssign&&(i.waitActive=!0),n[c]=i}})),this.resourceList=n,setTimeout((()=>{this.clearDragStyle(),this.updateItemPosition()}))},checkOverwrite(n){const a=this.deepCopy(n),i={};return this.allowAutoAssign||a.forEach((n=>{n.assign||(n.room_number_id=null)})),a.filter((n=>n.room_number_id)).forEach((n=>{const a=[n.start,n.room_type,n.room_number_id].join();i[a]||(i[a]=[]),i[a].push(n)})),[...new Set(Object.entries(i).map((n=>n[1])).filter((n=>n.length>1)).flat().map((n=>[n.start,n.room_type,n.room_number_id].join())))]},parseLayoutInfo(n,a){var i,s;return(null==n||null===(i=n.layout)||void 0===i||null===(s=i[a])||void 0===s?void 0:s.rowspan)||1}}};var __vue_render__$3=function(){var n=this,a=n.$createElement,i=n._self._c||a;return i("div",{staticClass:"components-scheduler"},[i("b-overlay",{class:"view-"+n.viewCount,attrs:{"spinner-variant":"primary",show:n.loading}},[i("b-form-row",{staticClass:"scheduler-header stuck"},[i("b-col",{attrs:{cols:"12"}},[i("ul",{staticClass:"months"},n._l(n.dates,(function(a,s){return i("li",{key:"months_"+s,attrs:{title:a.year+"/"+a.month}},[i("div",{class:[{active:a.active},a.cols?"colspan-"+a.cols:""]},[n._v("\n              "+n._s(a.year)+"/"+n._s(a.month)+"\n            ")])])})),0)]),n._v(" "),i("b-col",{attrs:{cols:"12"}},[i("ul",{staticClass:"dates"},n._l(n.dates,(function(a,s){return i("li",{key:"dates_"+s,class:["cursor-pointer",{today:n.isToday(a.date),holiday:n.isHoliday(a.date),weekend:n.isWeekend(a.date)}],attrs:{id:"dates_"+s,boundary:"document"},on:{click:function(i){return n.dateClickHandler(a.date,i)}}},[i("div",[i("span",[n._v(n._s(a.week)+" "+n._s(a.day))]),n._v(" "),n.getAllStockFull(a.date)?i("small",{staticClass:"wb-icon"},[n._v("\n                "+n._s(n.i18n("whole_building"))+"\n              ")]):n._e()]),n._v(" "),i("b-tooltip",{attrs:{target:"dates_"+s,"custom-class":"b-tooltip-class",placement:"top",triggers:"hover",boundary:"document"}},[n._v("\n              "+n._s(n.dateTooltip(a.date))+"\n            ")])],1)})),0)])],1),n._v(" "),n._l(n.resourceList,(function(a,s){return[i("b-form-row",{key:"contents_"+s,staticClass:"contents-row stock"},[i("b-col",{class:n.cname,attrs:{cols:"12"}},[i("ul",{staticClass:"contents stock"},n._l(n.dates,(function(o,r){return i("li",{key:"contents_"+s+"_"+r,class:{full:n.getStock(o.date,a.id).full,"stock-notset":!n.checkStock(o.date,a.id)}},[i("div",{on:{click:function(i){return n.stockClickHandler({date:o.date,room:a.id},i)}}},[n.hasSlot("slot-item-stock")?[n._t("slot-item-stock",null,{scope:n.getStock(o.date,a.id)})]:[n.checkLock(o.date,a.id)?i("small",{staticClass:"lock-icon"},[i("i",{staticClass:"fa-solid fa-lock"})]):n._e(),n._v(" "),n.checkStock(o.date,a.id)?i("span",[n._v("\n                    "+n._s(n.getStock(o.date,a.id).stock)+"\n                  ")]):i("small",[n._v("\n                    "+n._s(n.i18n("stock_notset"))+"\n                  ")])]],2)])})),0)])],1),n._v(" "),n.showWait?i("b-form-row",{key:"contents_wait_"+s,class:["contents-row collapse-wait",{active:n.isAllActive(a)}]},[i("b-col",{class:[n.cname,"rowspan-1","rowspan-"+n.parseLayoutInfo(a,"wait")],attrs:{cols:"12"}},[i("ul",{staticClass:"contents wait"},n._l(n.dates,(function(o,r){return i("li",{key:"contents_wait_"+s+"_"+r,class:{full:n.getStock(o.date,a.id).full}},[i("div",{attrs:{"data-type":"wait",droppable:"true","data-date":o.date,"data-id":[a.id,"wait"].join()},on:{dragenter:n.dragEnterHandler,dragleave:n.dragLeaveHandler,dragover:n.dragOverHandler,dragend:n.dragEndHandler,drop:n.dropHandler,click:function(i){if(i.target!==i.currentTarget)return null;n.itemClickHandler({date:o.date,room:a.id,num:"wait",full:n.getStock(o.date,a.id).full})},mousedown:n.mousedownHandler}},[n._l(n.waitDataResult([o.date,a.id,""].join()),(function(a,s){return[i("order-item",{key:"order-item_"+s,class:"item-order-"+a.order,attrs:{data:a,continuous:n.allowContinuous},on:{dragstart:n.dragStartHandler,click:n.orderClickHandler,assign:n.assignClickHandler},scopedSlots:n._u([n.hasSlot("slot-item-info")?{key:"slot-item-info",fn:function(a){var i=a.scope;return[n._t("slot-item-info",null,{scope:i})]}}:null],null,!0)})]}))],2)])})),0)])],1):n._e(),n._v(" "),n._l(a.children,(function(o,r){return i("b-form-row",{key:"contents_"+s+"_"+r,class:["contents-row collapse",{active:n.isActive(a)}]},[i("b-col",{class:n.cname,attrs:{cols:"12"}},[i("ul",{staticClass:"contents"},n._l(n.dates,(function(u,c){return i("li",{key:"contents_"+s+"_"+r+"_"+c,class:{full:n.getStock(u.date,a.id).full}},[i("div",{attrs:{"data-type":"content","data-date":u.date,"data-id":[a.id,o.id].join(),"data-disabled":o.disabled},on:{dragenter:n.dragEnterHandler,dragleave:n.dragLeaveHandler,dragover:n.dragOverHandler,dragend:n.dragEndHandler,drop:n.dropHandler,click:function(i){if(i.target!==i.currentTarget)return null;n.itemClickHandler({date:u.date,room:a.id,num:o.id,full:n.getStock(u.date,a.id).full})},mousedown:n.mousedownHandler}},[n._l(n.dataResult[[u.date,a.id,o.id].join()]||[],(function(a,s){return[i("order-item",{key:"order-item_"+s,attrs:{data:a,continuous:n.allowContinuous},on:{dragstart:n.dragStartHandler,click:n.orderClickHandler,assign:n.assignClickHandler},scopedSlots:n._u([n.hasSlot("slot-item-info")?{key:"slot-item-info",fn:function(a){var i=a.scope;return[n._t("slot-item-info",null,{scope:i})]}}:null],null,!0)})]}))],2)])})),0)])],1)}))]}))],2)],1)},P=[];__vue_render__$3._withStripped=!0;const q=undefined,V=undefined,X=undefined,Z=undefined,G=normalizeComponent({render:__vue_render__$3,staticRenderFns:P},void 0,U,"data-v-b2695a8c",!1,void 0,!1,void 0,void 0,void 0);var K,Q=void 0,tt=void 0;const et={name:"ComponentsResource",components:{},props:{debug:{type:Boolean,default:!1},headerTitle:{type:String,default:"Header Title"},showWait:{type:Boolean,default:!0},waitTitle:{type:String,default:"Wait Title"},data:{type:Array,default:()=>[]}},data:()=>({pageLoad:!1,expandAll:!0}),computed:{checkHasSomeChild(){return this.dataList.map((n=>n.children&&n.children.length)).filter((n=>n)).reduce(((n,a)=>n+a),0)},dataList:{get(){const n=undefined;return[...this.data.map((n=>({...n,active:void 0===n.active||n.active,waitActive:void 0===n.waitActive||n.waitActive})))]},set(n){this.$emit("update:data",n)}},isAllExpand(){return!this.dataList.some((n=>!n.active))},isAllCollapse(){return!this.dataList.some((n=>n.active))}},mounted(){const n=this.dataList.map((n=>({...n,active:void 0===n.active||n.active})));this.pageLoad||(this.pageLoad=!0,this.dataList=n)},methods:{hasChild:n=>n&&Array.isArray(n.children)&&n.children.length,hasSlot(n="default"){return!!this.$slots[n]||!!this.$scopedSlots[n]},collapseAllClickHandler(){this.expandAll=!this.expandAll,this.dataList.forEach((n=>{n.active=this.expandAll})),this.dataList=[...this.dataList]},collapseWaitClickHandler(n){const a=this.dataList;a[n].waitActive=!a[n].waitActive,this.dataList=a},collapseClickHandler(n){const a=this.dataList;a[n].active=!a[n].active,this.hasChild(a[n])&&(this.dataList=a,this.isAllCollapse&&(this.expandAll=!1),this.isAllExpand&&(this.expandAll=!0))},parseLayoutInfo(n,a){var i,s;return(null==n||null===(i=n.layout)||void 0===i||null===(s=i[a])||void 0===s?void 0:s.rowspan)||1}}};var __vue_render__$2=function(){var n=this,a=n.$createElement,i=n._self._c||a;return i("div",{staticClass:"components-resource"},[i("div",{staticClass:"resource-header stuck"},[i("span",{staticClass:"arrow-icon ellipsis-1",class:{active:n.expandAll},on:{click:function(a){return n.collapseAllClickHandler()}}},[n.checkHasSomeChild?i("i",{staticClass:"fa-solid fa-angles-down"}):n._e(),n._v(" "+n._s(n.headerTitle)+"\n    ")])]),n._v(" "),n._l(n.dataList,(function(a,s){return[i("b-form-row",{key:s,staticClass:"resource-type"},[i("b-col",{staticClass:"resource-item",attrs:{cols:"12"}},[i("b-form-row",{staticClass:"append-item"},[i("b-col",{staticClass:"label p-0",attrs:{"data-id":a.id}},[i("span",{staticClass:"arrow-icon ellipsis-1",class:{active:a.active},on:{click:function(a){return n.collapseClickHandler(s)}}},[n.hasChild(a)?i("i",{staticClass:"fa-solid fa-angle-down"}):n._e(),n._v(" "),i("span",{staticClass:"pl-1"},[n._v(n._s(a.name))])]),n._v(" "),n.parseLayoutInfo(a,"wait")>1?[i("b-badge",{staticClass:"b-badge-class",attrs:{id:"badge_"+s},on:{click:function(a){return n.collapseWaitClickHandler(s)}}},[n._v("\n                "+n._s(a.layout.wait.waitRowspan)+"\n              ")]),n._v(" "),i("b-tooltip",{attrs:{target:"badge_"+s,"custom-class":"b-tooltip-class",placement:"topright",triggers:"hover",boundary:"document"}},[n._v("\n                "+n._s(n.waitTitle)+"\n              ")])]:n._e()],2),n._v(" "),a.extend?[i("b-col",{attrs:{cols:"auto"}},[i("small",[n._v(n._s(a.extend))])])]:n._e()],2)],1)],1),n._v(" "),n.showWait?i("b-form-row",{key:"contents_wait_"+s,staticClass:"contents-row collapse-wait",class:{active:a.active&&a.waitActive}},[i("b-col",{staticClass:"resource-children-item",class:["rowspan-1","rowspan-"+n.parseLayoutInfo(a,"wait")],attrs:{cols:"12"}},[i("b-form-row",{staticClass:"append-item"},[i("b-col",{staticClass:"label"},[i("span",{staticClass:"pl-3"},[n._v(n._s(n.waitTitle))])])],1)],1)],1):n._e(),n._v(" "),n._l(a.children,(function(o,r){return i("b-form-row",{key:"contents_"+s+"_"+r,staticClass:"contents-row collapse",class:{active:a.active}},[i("b-col",{staticClass:"resource-children-item",attrs:{cols:"12"}},[i("b-form-row",{staticClass:"append-item"},[i("b-col",{staticClass:"label",attrs:{"data-id":o.id,"data-rowspan":n.parseLayoutInfo(a,o.id)}},[i("span",{staticClass:"pl-3"},[n._v(n._s(o.name))])]),n._v(" "),o.disabled?i("b-col",{staticClass:"pr-0",attrs:{cols:"auto"}},[i("i",{staticClass:"fa-solid fa-ban"})]):n._e(),n._v(" "),n.hasSlot("slot-resource-info")?[i("b-col",{attrs:{cols:"auto"}},[n._t("slot-resource-info",null,{scope:o})],2)]:n._e()],2)],1)],1)}))]}))],2)},nt=[];__vue_render__$2._withStripped=!0;const at=undefined,it=undefined,st=undefined,ot=undefined,rt=normalizeComponent({render:__vue_render__$2,staticRenderFns:nt},void 0,et,"data-v-40cfc928",!1,void 0,!1,void 0,void 0,void 0);var lt,dt=void 0,ut=void 0;const ct={name:"ComponentSwitchButton",props:{value:{type:Boolean,default:!1},size:{type:String,default:"lg"},loading:{type:Boolean,default:!1}},computed:{result:{get(){return this.value},set(n){this.$emit("input",n)}}}};var __vue_render__$1=function(){var n=this,a=n.$createElement,i=n._self._c||a;return i("div",{staticClass:"component-switch-button"},[i("b-overlay",{staticClass:"d-inline-block w-100",attrs:{show:n.loading,"spinner-small":"","spinner-variant":"primary"}},[i("b-form-checkbox",{attrs:{switch:"",size:n.size},scopedSlots:n._u([{key:"default",fn:function(){return[n._t("default")]},proxy:!0}],null,!0),model:{value:n.result,callback:function(a){n.result=a},expression:"result"}})],1)],1)},ht=[];__vue_render__$1._withStripped=!0;const ft=undefined,pt=undefined,mt=undefined,vt=undefined,_t=normalizeComponent({render:__vue_render__$1,staticRenderFns:ht},void 0,ct,"data-v-a09e5890",!1,void 0,!1,void 0,void 0,void 0),gt={};["allowEdit","allowContinuous","allowAutoAssign"].forEach((n=>{gt[`options.${n}`]=function(a){T.cookies.set({key:n,val:a})}}));var yt,wt=void 0,bt=void 0;const St={name:"ComponentsCalendar",components:{scheduler:G,resourceMenu:rt,SwitchButton:_t},props:{loading:{type:Boolean,default:!1},resource:{type:Array,default:()=>[]},stock:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},holiday:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},data(){return{isMobile:window.innerWidth<992,defaultData:{hotkey:!0,defaultDate:this.now().format(this.format),defaultView:7,previewDay:1,locale:"en",views:[3,7,15,"month"],format:"YYYY-MM-DD"},selected:{startDate:this.now().format(this.format),count:7},vCalendarAttrs:[{key:"today",highlight:{fillMode:"light"},dates:this.now().format(this.format)}],updateViewEvent:null}},computed:{dict(){return A[this.lang]||A.en},stockData:{get(){return this.stock},set(n){this.$emit("update:stock",n)}},itemList:{get(){return this.items},set(n){this.$emit("update:items",n)}},resourceData:{get(){return this.resource},set(n){this.$emit("update:resource",n)}},optionsData:{get(){return{...this.defaultData,...this.options}},set(n){this.$emit("update:options",n)}},viewCountDefault(){var n,a;const i=this.defaultData.views,s=null===(n=this.optionsData)||void 0===n||null===(a=n.view)||void 0===a?void 0:a.count;return void 0!==s&&i.includes(s)?s:i[1]},isViewMonth(){return"month"===this.selected.count},currentMonth(){return s(this.selected.startDate).format("MMM")},showWait(){var n;return void 0===(null===(n=this.optionsData)||void 0===n?void 0:n.showWait)||this.optionsData.showWait},showToolbar(){var n;return void 0===(null===(n=this.optionsData)||void 0===n?void 0:n.showToolbar)||this.optionsData.showToolbar},marginTop(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.marginTop)||0)},allowChangeDate(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowChangeDate)||!1)},allowChangeType(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowChangeType)||!1)},allowEdit(){var n;return!this.showToolbar||JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowEdit)||!1)},allowContinuous(){var n;return!this.showToolbar||JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowContinuous)||!1)},allowAutoAssign(){var n;return!this.showToolbar||JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowAutoAssign)||!1)},allowHotkey(){var n;return!(null===(n=this.optionsData)||void 0===n||!n.hotkey)},headerText(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.headerTitle},waitText(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.waitTitle},format(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.format},views(){var n;const a=undefined;return((null===(n=this.optionsData)||void 0===n?void 0:n.views)||[]).map((n=>({active:this.selected.count===n,value:n})))},lang(){return T.formatLang(this.locale)},locale(){var n;return(null===(n=this.optionsData)||void 0===n?void 0:n.locale)||"en"},previewDay(){var n;return-1*((null===(n=this.optionsData)||void 0===n?void 0:n.previewDay)||0)},dateRange(){const n=this.selected.startDate,a=this.selected.count||1,i=undefined,o=undefined;return{start:this.isViewMonth?s(this.selected.startDate).startOf("month").format(this.format):s(n).format(this.format),end:this.isViewMonth?s(this.selected.startDate).endOf("month").format(this.format):s(n).add(a-1,"days").format(this.format)}},vCaleLocale(){let n=this.locale||"en-US";switch(n.toLowerCase()){case"ja_jp":case"ja-jp":case"jajp":case"ja":case"jp":n="ja";break;case"zh_tw":case"zh-tw":case"zhtw":case"tw":n="zh-TW";break;default:n="en-US"}return n},schedulerRef(){var n;return(null===(n=this.$refs)||void 0===n?void 0:n.scheduler)||{}}},watch:{...gt,locale(){this.dayJsLocale(this.locale)},selected:{handler(){let{count:n,startDate:a,end:i}=this.selected;this.isViewMonth?(a=s(a).startOf("month").format(this.format),i=s(a).endOf("month").format(this.format),n=s(i).diff(s(a),"days")+1):(a=s(a).format(this.format),i=s(a).add(n-1,"days").format(this.format));const o={start:a,end:i,count:n};this.optionsData={...this.optionsData,view:o},this.debounceChangeEvent&&clearTimeout(this.debounceChangeEvent),this.debounceChangeEvent=setTimeout((()=>{this.$emit("change",o),delete this.debounceChangeEvent}),100)},immediate:!1,deep:!0},"selected.count":{handler(){T.cookies.set({key:"view-count",val:this.selected.count})},immediate:!1,deep:!0}},mounted(){this.globeEventbind(),this.getSettingCache(),this.$nextTick((()=>{this.init()}))},methods:{hasSlot(n="default"){return!!this.$slots[n]||!!this.$scopedSlots[n]},deepCopy:n=>JSON.parse(JSON.stringify(n)),init(){this.selected.count=this.viewCountDefault,this.dayJsLocale(this.locale),splitInit({el:[".components-calendar-menu",".components-calendar-main"],minSize:[200,20]}),this.viewTodayClickHandler(this.optionsData.defaultDate)},globeEventbind(){window.onresize=()=>{this.isMobile=window.innerWidth<576},this.allowHotkey&&document.addEventListener("keydown",(n=>{const a=n.which||n.keyCode,i=n.ctrlKey?n.ctrlKey:17===a,s=undefined,o=undefined;switch([n.metaKey||i,a].join()){case"true,37":n.preventDefault(),null==this||this.viewShiftClickHandler();break;case"true,39":n.preventDefault(),null==this||this.viewShiftClickHandler(!0);break;case"true,38":case"true,40":n.preventDefault(),null==this||this.viewTodayClickHandler()}}))},getSettingCache(){var n,a;const i=this.deepCopy(this.optionsData);["allowEdit","allowContinuous","allowAutoAssign"].forEach((n=>{i[n]=JSON.parse(T.cookies.get(n)||!1)}));const s=+T.cookies.get("view-count")||+this.optionsData.view||+(null===(n=this.options)||void 0===n||null===(a=n.view)||void 0===a?void 0:a.count)||7;this.selected.count=s,this.optionsData=i},getSize(){return this.isMobile?"":"sm"},now:n=>s(n).isValid()?s(n):s(),dayJsLocale(n){let a=n||"en";switch(a.toLowerCase()){case"zh_tw":case"zh-tw":case"zhtw":case"tw":a="zh-tw"}s.locale(a)},i18n(n){return this.dict[n]},viewsClickHandler(n){n!==this.selected.view&&(this.selected.count=n)},viewShiftClickHandler(n){if(this.isViewMonth){const a=n?1:-1;this.selected.startDate=s(this.selected.startDate).add(a,"month").startOf("month").format(this.format)}else{const a=undefined,i=(n?1:-1)*this.selected.count,o=this.dateRange;o.end=s(o.start).add(i,"days").format(this.format),this.selected.startDate=o.end}},viewTodayClickHandler(n){const a=this.now(n).add(this.previewDay,"days").format(this.format);this.selected.startDate=a},itemClickHandler(n){this.$emit("click",n)},itemAssignClickHandler(n){this.$emit("assign",n)},dropHandler(n){this.$emit("drop",n)}}};var __vue_render__=function(){var n=this,a=n.$createElement,i=n._self._c||a;return i("div",{staticClass:"components-calendar container-fluid"},[i("b-overlay",{attrs:{"spinner-variant":"primary",show:n.loading}},[i("div",{staticClass:"header"},[n._t("slot-toolbar-top"),n._v(" "),n.showToolbar?i("b-form-row",{class:["calendar-header-toolbar-top","pb-1",{small:!n.isMobile}]},[i("b-col",{attrs:{cols:"auto"}},[i("SwitchButton",{attrs:{size:"md"},model:{value:n.options.allowEdit,callback:function(a){n.$set(n.options,"allowEdit",a)},expression:"options.allowEdit"}},[n._v("\n            "+n._s(n.i18n("addnew_onder"))+"\n          ")])],1),n._v(" "),i("b-col",{attrs:{cols:"auto"}},[i("SwitchButton",{attrs:{size:"md"},model:{value:n.options.allowContinuous,callback:function(a){n.$set(n.options,"allowContinuous",a)},expression:"options.allowContinuous"}},[n._v("\n            "+n._s(n.i18n("continuous_display"))+"\n          ")])],1),n._v(" "),i("b-col",{attrs:{cols:"auto"}},[i("SwitchButton",{attrs:{size:"md"},model:{value:n.options.allowAutoAssign,callback:function(a){n.$set(n.options,"allowAutoAssign",a)},expression:"options.allowAutoAssign"}},[n._v("\n            "+n._s(n.i18n("autoassign_room"))+"\n          ")])],1)],1):n._e(),n._v(" "),i("b-form-row",[i("b-col",{staticClass:"pb-2",attrs:{cols:"12",md:"auto"}},[i("b-form-row",[i("b-col",{attrs:{cols:"auto"}},[i("b-button",{attrs:{size:n.getSize(),variant:"outline-light"},on:{click:n.viewTodayClickHandler}},[n._v("\n                "+n._s(n.i18n("today"))+"\n              ")])],1),n._v(" "),i("b-col",{staticClass:"ml-auto",attrs:{cols:"auto"}},[i("b-button-group",{staticClass:"w-100"},[n.isViewMonth?i("span",{class:["btn","btn-outline-light","btn-"+n.getSize()]},[n._v("\n                  "+n._s(n.currentMonth)+"\n                ")]):i("v-date-picker",{attrs:{locale:n.vCaleLocale,attributes:n.vCalendarAttrs,masks:{input:"YYYY-MM-DD"},popover:{visibility:"click"}},scopedSlots:n._u([{key:"default",fn:function(a){var s=a.inputValue,o=a.inputEvents;return[i("b-form-input",n._g({attrs:{size:n.getSize(),value:s}},o))]}}]),model:{value:n.selected.startDate,callback:function(a){n.$set(n.selected,"startDate",a)},expression:"selected.startDate"}}),n._v(" "),i("b-button",{staticClass:"mxw-60px",attrs:{size:n.getSize(),variant:"outline-light"},on:{click:function(a){return n.viewShiftClickHandler()}}},[i("i",{staticClass:"fa-solid fa-angle-left"})]),n._v(" "),i("b-button",{staticClass:"mxw-60px",attrs:{size:n.getSize(),variant:"outline-light"},on:{click:function(a){return n.viewShiftClickHandler(!0)}}},[i("i",{staticClass:"fa-solid fa-angle-right"})])],1)],1)],1)],1),n._v(" "),i("b-col",{staticClass:"pb-2",attrs:{cols:"auto"}},[i("b-button-group",n._l(n.views,(function(a,s){return i("b-button",{key:s,class:{active:a.active},attrs:{size:n.getSize(),variant:"outline-primary"},on:{click:function(i){return n.viewsClickHandler(a.value)}}},["month"===a.value?[n._v("\n                "+n._s(n.i18n(a.value))+"\n              ")]:[n._v("\n                "+n._s(a.value)+n._s(n.i18n("day"))+"\n              ")]],2)})),1)],1),n._v(" "),i("b-col",{staticClass:"right-middle pb-2"},[n._t("slot-toolbar-right")],2)],1)],2),n._v(" "),i("b-row",{staticClass:"main"},[i("div",{staticClass:"components-calendar-menu"},[i("resource-menu",{attrs:{"header-title":n.headerText,"show-wait":n.showWait,"wait-title":n.waitText,data:n.resourceData},on:{"update:data":function(a){n.resourceData=a}},scopedSlots:n._u([n.hasSlot("slot-resource-info")?{key:"slot-resource-info",fn:function(a){var i=a.scope;return[n._t("slot-resource-info",null,{scope:i})]}}:null],null,!0)})],1),n._v(" "),i("div",{staticClass:"components-calendar-main"},[i("scheduler",{ref:"scheduler",attrs:{"show-wait":n.showWait,"margin-top":n.marginTop,locale:n.locale,range:n.dateRange,holiday:n.holiday,resource:n.resourceData,stock:n.stockData,items:n.itemList,"allow-change-date":n.allowChangeDate,"allow-change-type":n.allowChangeType,"allow-edit":n.allowEdit,"allow-continuous":n.allowContinuous,"allow-auto-assign":n.allowAutoAssign},on:{"update:resource":function(a){n.resourceData=a},"update:stock":function(a){n.stockData=a},"update:items":function(a){n.itemList=a},click:n.itemClickHandler,assign:n.itemAssignClickHandler,drop:n.dropHandler},scopedSlots:n._u([n.hasSlot("slot-item-info")?{key:"slot-item-info",fn:function(a){var i=a.scope;return[n._t("slot-item-info",null,{scope:i})]}}:{key:"slot-item-info",fn:function(a){var s=a.scope;return[i("div",{staticClass:"p-1"},[s.payment_status?i("span",{class:["pay_status_icon",s.payment_status,{black:!s.assign}]}):n._e(),n._v(" "),s.title?i("span",[n._v("\n                "+n._s(s.title)+"\n                "),s.nan?[i("sup",[n._v(n._s(n.i18n("note"))+n._s(s.nan))])]:n._e()],2):i("span",[n._v(n._s(s.start))]),n._v(" "),i("br"),n._v(" "),i("span",[n._v(n._s(s.source)),s.order_from?i("span",[n._v(" ("+n._s(s.order_from)+")")]):n._e()])])]}},n.hasSlot("slot-item-stock")?{key:"slot-item-stock",fn:function(a){var i=a.scope;return[n._t("slot-item-stock",null,{scope:i})]}}:null],null,!0)})],1)])],1)],1)},kt=[];__vue_render__._withStripped=!0;const Ct=undefined,Dt=undefined,$t=undefined,Mt=undefined,zt=normalizeComponent({render:__vue_render__,staticRenderFns:kt},void 0,St,"data-v-f9851970",!1,void 0,!1,void 0,void 0,void 0);var Ht;const At=undefined,Tt=undefined,Lt=undefined,Et=undefined,Yt=undefined,Ot=undefined;return normalizeComponent({},void 0,{install:function(n){n.component("calendar",zt)},calendar:zt},void 0,void 0,void 0,!1,void 0,void 0,void 0)}));
//# sourceMappingURL=calendar.umd.js.map
