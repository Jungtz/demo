!function(n,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(n="undefined"!=typeof globalThis?globalThis:n||self).calendar=i()}(this,(function(){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getDefaultExportFromNamespaceIfPresent(n){return n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getDefaultExportFromNamespaceIfNotNamed(n){return n&&Object.prototype.hasOwnProperty.call(n,"default")&&1===Object.keys(n).length?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var i=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach((function(s){var a=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(i,s,a.get?a:{enumerable:!0,get:function(){return n[s]}})})),i}function createCommonjsModule(n){var i={exports:{}};return n(i,i.exports),i.exports}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets option of @rollup/plugin-commonjs appropriately for this require call to behave properly.')}var i=createCommonjsModule((function(i,s){var a,o;a=n,o=function(){var n=1e3,i=6e4,s=36e5,a="millisecond",o="second",r="minute",d="hour",u="day",f="week",v="month",g="quarter",S="year",b="date",k="Invalid Date",C=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,D=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var i=["th","st","nd","rd"],s=n%100;return"["+n+(i[(s-20)%10]||i[s]||i[0])+"]"}},m=function(n,i,s){var a=String(n);return!a||a.length>=i?n:""+Array(i+1-a.length).join(s)+n},H={s:m,z:function(n){var i=-n.utcOffset(),s=Math.abs(i),a=Math.floor(s/60),o=s%60;return(i<=0?"+":"-")+m(a,2,"0")+":"+m(o,2,"0")},m:function t(n,i){if(n.date()<i.date())return-t(i,n);var s=12*(i.year()-n.year())+(i.month()-n.month()),a=n.clone().add(s,v),o=i-a<0,r=n.clone().add(s+(o?-1:1),v);return+(-(s+(i-a)/(o?a-r:r-a))||0)},a:function(n){return n<0?Math.ceil(n)||0:Math.floor(n)},p:function(n){return{M:v,y:S,w:f,d:u,D:b,h:d,m:r,s:o,ms:a,Q:g}[n]||String(n||"").toLowerCase().replace(/s$/,"")},u:function(n){return void 0===n}},A="en",L={};L[A]=z;var p=function(n){return n instanceof T},Y=function t(n,i,s){var a;if(!n)return A;if("string"==typeof n){var o=n.toLowerCase();L[o]&&(a=o),i&&(L[o]=i,a=o);var r=n.split("-");if(!a&&r.length>1)return t(r[0])}else{var d=n.name;L[d]=n,a=d}return!s&&a&&(A=a),a||!s&&A},w=function(n,i){if(p(n))return n.clone();var s="object"==typeof i?i:{};return s.date=n,s.args=arguments,new T(s)},E=H;E.l=Y,E.i=p,E.w=function(n,i){return w(n,{locale:i.$L,utc:i.$u,x:i.$x,$offset:i.$offset})};var T=function(){function M(n){this.$L=Y(n.locale,null,!0),this.parse(n)}var z=M.prototype;return z.parse=function(n){this.$d=function(n){var i=n.date,s=n.utc;if(null===i)return new Date(NaN);if(E.u(i))return new Date;if(i instanceof Date)return new Date(i);if("string"==typeof i&&!/Z$/i.test(i)){var a=i.match(C);if(a){var o=a[2]-1||0,r=(a[7]||"0").substring(0,3);return s?new Date(Date.UTC(a[1],o,a[3]||1,a[4]||0,a[5]||0,a[6]||0,r)):new Date(a[1],o,a[3]||1,a[4]||0,a[5]||0,a[6]||0,r)}}return new Date(i)}(n),this.$x=n.x||{},this.init()},z.init=function(){var n=this.$d;this.$y=n.getFullYear(),this.$M=n.getMonth(),this.$D=n.getDate(),this.$W=n.getDay(),this.$H=n.getHours(),this.$m=n.getMinutes(),this.$s=n.getSeconds(),this.$ms=n.getMilliseconds()},z.$utils=function(){return E},z.isValid=function(){return!(this.$d.toString()===k)},z.isSame=function(n,i){var s=w(n);return this.startOf(i)<=s&&s<=this.endOf(i)},z.isAfter=function(n,i){return w(n)<this.startOf(i)},z.isBefore=function(n,i){return this.endOf(i)<w(n)},z.$g=function(n,i,s){return E.u(n)?this[i]:this.set(s,n)},z.unix=function(){return Math.floor(this.valueOf()/1e3)},z.valueOf=function(){return this.$d.getTime()},z.startOf=function(n,i){var s=this,a=!!E.u(i)||i,g=E.p(n),l=function(n,i){var o=E.w(s.$u?Date.UTC(s.$y,i,n):new Date(s.$y,i,n),s);return a?o:o.endOf(u)},$=function(n,i){return E.w(s.toDate()[n].apply(s.toDate("s"),(a?[0,0,0,0]:[23,59,59,999]).slice(i)),s)},k=this.$W,C=this.$M,D=this.$D,z="set"+(this.$u?"UTC":"");switch(g){case S:return a?l(1,0):l(31,11);case v:return a?l(1,C):l(0,C+1);case f:var H=this.$locale().weekStart||0,A=(k<H?k+7:k)-H;return l(a?D-A:D+(6-A),C);case u:case b:return $(z+"Hours",0);case d:return $(z+"Minutes",1);case r:return $(z+"Seconds",2);case o:return $(z+"Milliseconds",3);default:return this.clone()}},z.endOf=function(n){return this.startOf(n,!1)},z.$set=function(n,i){var s,f=E.p(n),g="set"+(this.$u?"UTC":""),k=(s={},s[u]=g+"Date",s[b]=g+"Date",s[v]=g+"Month",s[S]=g+"FullYear",s[d]=g+"Hours",s[r]=g+"Minutes",s[o]=g+"Seconds",s[a]=g+"Milliseconds",s)[f],C=f===u?this.$D+(i-this.$W):i;if(f===v||f===S){var D=this.clone().set(b,1);D.$d[k](C),D.init(),this.$d=D.set(b,Math.min(this.$D,D.daysInMonth())).$d}else k&&this.$d[k](C);return this.init(),this},z.set=function(n,i){return this.clone().$set(n,i)},z.get=function(n){return this[E.p(n)]()},z.add=function(a,g){var b,k=this;a=Number(a);var C=E.p(g),y=function(n){var i=w(k);return E.w(i.date(i.date()+Math.round(n*a)),k)};if(C===v)return this.set(v,this.$M+a);if(C===S)return this.set(S,this.$y+a);if(C===u)return y(1);if(C===f)return y(7);var D=(b={},b[r]=i,b[d]=s,b[o]=n,b)[C]||1,z=this.$d.getTime()+a*D;return E.w(z,this)},z.subtract=function(n,i){return this.add(-1*n,i)},z.format=function(n){var i=this,s=this.$locale();if(!this.isValid())return s.invalidDate||k;var a=n||"YYYY-MM-DDTHH:mm:ssZ",o=E.z(this),r=this.$H,d=this.$m,u=this.$M,f=s.weekdays,v=s.months,h=function(n,s,o,r){return n&&(n[s]||n(i,a))||o[s].slice(0,r)},c=function(n){return E.s(r%12||12,n,"0")},g=s.meridiem||function(n,i,s){var a=n<12?"AM":"PM";return s?a.toLowerCase():a},S={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:E.s(u+1,2,"0"),MMM:h(s.monthsShort,u,v,3),MMMM:h(v,u),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:h(s.weekdaysMin,this.$W,f,2),ddd:h(s.weekdaysShort,this.$W,f,3),dddd:f[this.$W],H:String(r),HH:E.s(r,2,"0"),h:c(1),hh:c(2),a:g(r,d,!0),A:g(r,d,!1),m:String(d),mm:E.s(d,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:o};return a.replace(D,(function(n,i){return i||S[n]||o.replace(":","")}))},z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},z.diff=function(a,b,k){var C,D=E.p(b),z=w(a),H=(z.utcOffset()-this.utcOffset())*i,A=this-z,L=E.m(this,z);return L=(C={},C[S]=L/12,C[v]=L,C[g]=L/3,C[f]=(A-H)/6048e5,C[u]=(A-H)/864e5,C[d]=A/s,C[r]=A/i,C[o]=A/n,C)[D]||A,k?L:E.a(L)},z.daysInMonth=function(){return this.endOf(v).$D},z.$locale=function(){return L[this.$L]},z.locale=function(n,i){if(!n)return this.$L;var s=this.clone(),a=Y(n,i,!0);return a&&(s.$L=a),s},z.clone=function(){return E.w(this.$d,this)},z.toDate=function(){return new Date(this.valueOf())},z.toJSON=function(){return this.isValid()?this.toISOString():null},z.toISOString=function(){return this.$d.toISOString()},z.toString=function(){return this.$d.toUTCString()},M}(),O=T.prototype;return w.prototype=O,[["$ms",a],["$s",o],["$m",r],["$H",d],["$W",u],["$M",v],["$y",S],["$D",b]].forEach((function(n){O[n[1]]=function(i){return this.$g(i,n[0],n[1])}})),w.extend=function(n,i){return n.$i||(n(i,T,w),n.$i=!0),w},w.locale=Y,w.isDayjs=p,w.unix=function(n){return w(1e3*n)},w.en=L[A],w.Ls=L,w.p={},w},i.exports=o()})),s=createCommonjsModule((function(i,s){var a,o;a=n,o=function(){return{name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(n){var i=["th","st","nd","rd"],s=n%100;return"["+n+(i[(s-20)%10]||i[s]||i[0])+"]"}}},i.exports=o()})),a=createCommonjsModule((function(s,a){var o,r;o=n,r=function(n){function e(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var i=e(n),s={name:"zh-tw",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(n,i){return"W"===i?n+"週":n+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日dddd HH:mm",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"1 分鐘",mm:"%d 分鐘",h:"1 小時",hh:"%d 小時",d:"1 天",dd:"%d 天",M:"1 個月",MM:"%d 個月",y:"1 年",yy:"%d 年"},meridiem:function(n,i){var s=100*n+i;return s<600?"凌晨":s<900?"早上":s<1100?"上午":s<1300?"中午":s<1800?"下午":"晚上"}};return i.default.locale(s,null,!0),s},s.exports=r(i)})),o=createCommonjsModule((function(s,a){var o,r;o=n,r=function(n){function _(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var i=_(n),s={name:"ja",weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(n){return n+"日"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日 HH:mm",LLLL:"YYYY年M月D日 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日(ddd) HH:mm"},meridiem:function(n){return n<12?"午前":"午後"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}};return i.default.locale(s,null,!0),s},s.exports=r(i)})),r="undefined"!=typeof window?window:null,d=null===r,u=d?void 0:r.document,f="addEventListener",v="removeEventListener",g="getBoundingClientRect",S="_a",b="_b",k="_c",C="horizontal",NOOP=function(){return!1},D=d?"calc":["","-webkit-","-moz-","-o-"].filter((function(n){var i=u.createElement("div");return i.style.cssText="width:"+n+"calc(9px)",!!i.style.length})).shift()+"calc",isString=function(n){return"string"==typeof n||n instanceof String},elementOrSelector=function(n){if(isString(n)){var i=u.querySelector(n);if(!i)throw new Error("Selector "+n+" did not match a DOM element");return i}return n},getOption=function(n,i,s){var a=n[i];return void 0!==a?a:s},getGutterSize=function(n,i,s,a){if(i){if("end"===a)return 0;if("center"===a)return n/2}else if(s){if("start"===a)return 0;if("center"===a)return n/2}return n},defaultGutterFn=function(n,i){var s=u.createElement("div");return s.className="gutter gutter-"+i,s},defaultElementStyleFn=function(n,i,s){var a={};return isString(i)?a[n]=i:a[n]=D+"("+i+"% - "+s+"px)",a},defaultGutterStyleFn=function(n,i){var s;return(s={})[n]=i+"px",s},Split=function(n,i){if(void 0===i&&(i={}),d)return{};var s=n,a,o,D,z,H,A;Array.from&&(s=Array.from(s));var L,Y=elementOrSelector(s[0]).parentNode,E=getComputedStyle?getComputedStyle(Y):null,T=E?E.flexDirection:null,O=getOption(i,"sizes")||s.map((function(){return 100/s.length})),x=getOption(i,"minSize",100),j=Array.isArray(x)?x:s.map((function(){return x})),R=getOption(i,"maxSize",1/0),N=Array.isArray(R)?R:s.map((function(){return R})),I=getOption(i,"expandToMin",!1),F=getOption(i,"gutterSize",10),J=getOption(i,"gutterAlign","center"),U=getOption(i,"snapOffset",30),W=Array.isArray(U)?U:s.map((function(){return U})),P=getOption(i,"dragInterval",1),B=getOption(i,"direction",C),q=getOption(i,"cursor",B===C?"col-resize":"row-resize"),V=getOption(i,"gutter",defaultGutterFn),X=getOption(i,"elementStyle",defaultElementStyleFn),Z=getOption(i,"gutterStyle",defaultGutterStyleFn);function setElementSize(n,i,s,o){var r=X(a,i,s,o);Object.keys(r).forEach((function(i){n.style[i]=r[i]}))}function setGutterSize(n,i,s){var o=Z(a,i,s);Object.keys(o).forEach((function(i){n.style[i]=o[i]}))}function getSizes(){return A.map((function(n){return n.size}))}function getMousePosition(n){return"touches"in n?n.touches[0][o]:n[o]}function adjust(n){var i=A[this.a],s=A[this.b],a=i.size+s.size;i.size=n/this.size*a,s.size=a-n/this.size*a,setElementSize(i.element,i.size,this[b],i.i),setElementSize(s.element,s.size,this[k],s.i)}function drag(n){var s,a=A[this.a],o=A[this.b];this.dragging&&(s=getMousePosition(n)-this.start+(this[b]-this.dragOffset),P>1&&(s=Math.round(s/P)*P),s<=a.minSize+a.snapOffset+this[b]?s=a.minSize+this[b]:s>=this.size-(o.minSize+o.snapOffset+this[k])&&(s=this.size-(o.minSize+this[k])),s>=a.maxSize-a.snapOffset+this[b]?s=a.maxSize+this[b]:s<=this.size-(o.maxSize-o.snapOffset+this[k])&&(s=this.size-(o.maxSize+this[k])),adjust.call(this,s),getOption(i,"onDrag",NOOP)(getSizes()))}function calculateSizes(){var n=A[this.a].element,i=A[this.b].element,s=n[g](),o=i[g]();this.size=s[a]+o[a]+this[b]+this[k],this.start=s[D],this.end=s[z]}function innerSize(n){if(!getComputedStyle)return null;var i=getComputedStyle(n);if(!i)return null;var s=n[H];return 0===s?null:s-=B===C?parseFloat(i.paddingLeft)+parseFloat(i.paddingRight):parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)}function trimToMin(n){var i=innerSize(Y);if(null===i)return n;if(j.reduce((function(n,i){return n+i}),0)>i)return n;var s=0,a=[],o=n.map((function(o,r){var d=i*o/100,u=getGutterSize(F,0===r,r===n.length-1,J),f=j[r]+u;return d<f?(s+=f-d,a.push(0),f):(a.push(d-f),d)}));return 0===s?n:o.map((function(n,o){var r=n;if(s>0&&a[o]-s>0){var d=Math.min(s,a[o]-s);s-=d,r=n-d}return r/i*100}))}function stopDragging(){var n=this,s=A[n.a].element,a=A[n.b].element;n.dragging&&getOption(i,"onDragEnd",NOOP)(getSizes()),n.dragging=!1,r[v]("mouseup",n.stop),r[v]("touchend",n.stop),r[v]("touchcancel",n.stop),r[v]("mousemove",n.move),r[v]("touchmove",n.move),n.stop=null,n.move=null,s[v]("selectstart",NOOP),s[v]("dragstart",NOOP),a[v]("selectstart",NOOP),a[v]("dragstart",NOOP),s.style.userSelect="",s.style.webkitUserSelect="",s.style.MozUserSelect="",s.style.pointerEvents="",a.style.userSelect="",a.style.webkitUserSelect="",a.style.MozUserSelect="",a.style.pointerEvents="",n.gutter.style.cursor="",n.parent.style.cursor="",u.body.style.cursor=""}function startDragging(n){if(!("button"in n)||0===n.button){var s=this,a=A[s.a].element,o=A[s.b].element;s.dragging||getOption(i,"onDragStart",NOOP)(getSizes()),n.preventDefault(),s.dragging=!0,s.move=drag.bind(s),s.stop=stopDragging.bind(s),r[f]("mouseup",s.stop),r[f]("touchend",s.stop),r[f]("touchcancel",s.stop),r[f]("mousemove",s.move),r[f]("touchmove",s.move),a[f]("selectstart",NOOP),a[f]("dragstart",NOOP),o[f]("selectstart",NOOP),o[f]("dragstart",NOOP),a.style.userSelect="none",a.style.webkitUserSelect="none",a.style.MozUserSelect="none",a.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",s.gutter.style.cursor=q,s.parent.style.cursor=q,u.body.style.cursor=q,calculateSizes.call(s),s.dragOffset=getMousePosition(n)-s.end}}B===C?(a="width",o="clientX",D="left",z="right",H="clientWidth"):"vertical"===B&&(a="height",o="clientY",D="top",z="bottom",H="clientHeight"),O=trimToMin(O);var G=[];function adjustToMin(n){var i=n.i===G.length,s=i?G[n.i-1]:G[n.i];calculateSizes.call(s);var a=i?s.size-n.minSize-s[k]:n.minSize+s[b];adjust.call(s,a)}function setSizes(n){var i=trimToMin(n);i.forEach((function(n,s){if(s>0){var a=G[s-1],o=A[a.a],r=A[a.b];o.size=i[s-1],r.size=n,setElementSize(o.element,o.size,a[b],o.i),setElementSize(r.element,r.size,a[k],r.i)}}))}function destroy(n,i){G.forEach((function(s){if(!0!==i?s.parent.removeChild(s.gutter):(s.gutter[v]("mousedown",s[S]),s.gutter[v]("touchstart",s[S])),!0!==n){var o=X(a,s.a.size,s[b]);Object.keys(o).forEach((function(n){A[s.a].element.style[n]="",A[s.b].element.style[n]=""}))}}))}return(A=s.map((function(n,i){var a={element:elementOrSelector(n),size:O[i],minSize:j[i],maxSize:N[i],snapOffset:W[i],i:i},o;if(i>0&&((o={a:i-1,b:i,dragging:!1,direction:B,parent:Y})[b]=getGutterSize(F,i-1==0,!1,J),o[k]=getGutterSize(F,!1,i===s.length-1,J),"row-reverse"===T||"column-reverse"===T)){var r=o.a;o.a=o.b,o.b=r}if(i>0){var d=V(i,B,a.element);setGutterSize(d,F,i),o[S]=startDragging.bind(o),d[f]("mousedown",o[S]),d[f]("touchstart",o[S]),Y.insertBefore(d,a.element),o.gutter=d}return setElementSize(a.element,a.size,getGutterSize(F,0===i,i===s.length-1,J),i),i>0&&G.push(o),a}))).forEach((function(n){var i=n.element[g]()[a];i<n.minSize&&(I?adjustToMin(n):n.minSize=i)})),{setSizes:setSizes,getSizes:getSizes,collapse:function collapse(n){adjustToMin(A[n])},destroy:destroy,parent:Y,pairs:G}};function splitInit(n){let{el:i,sizes:s=[20,80],minSize:a=350,gutterSize:o=2}=n;const r=Split(i,{sizes:s,minSize:a,expandToMin:!0,gutterSize:o,onDragEnd(n){n=n.filter((n=>isNaN(+n))).length?[20,80]:n.map((n=>+n))}});return r.setSizes(s),r}var z={tw:{today:"今日",day:"日",addnew_onder:"新增訂單",continuous_display:"連續顯示",autoassign_room:"自動排房",whole_building:"包棟",stock_notset:"無庫存"},en:{today:"Today",day:"Day",addnew_onder:"New Order",continuous_display:"Continuous View",autoassign_room:"Automatic Room Assignment",whole_building:"Whole Building",stock_notset:"No Inventory Setup"},ja:{today:"今日",day:"日",addnew_onder:"注文の追加",continuous_display:"続けて表示する",autoassign_room:"自動で部屋を割り当て",whole_building:"建物全体",stock_notset:"在庫なし"}};const H={guid(){function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return[s4()+s4(),s4(),s4(),s4(),s4(),s4()+s4()].join("-")},cookies:{get(n){const i=document.cookie.split(";"),s={};return i.map((n=>{const i=n.trim().split("=");s[i[0]]=i[1]})),void 0===n?s:void 0===s[n]?void 0:decodeURIComponent(s[n])},del(n){this.cookies.set(n,"",-1)},set(n){if(void 0!==n){void 0===n.days&&(n.days=15);let i="";const s=new Date;s.setDate(s.getDate()+n.days),i=`expires=${s.toUTCString()};`;let a="";void 0!==n.domain&&(a=`domain=${n.domain};`);let o="SameSite=Lax;";void 0!==n.SameSite&&(o=`SameSite=${n.SameSite};`),document.cookie=`${n.key}=${encodeURIComponent(n.val)};${o}path=/;${i};${a}`}}},formatLang(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=null==n?void 0:n.toLowerCase();switch(i){case"cn":case"zh_cn":case"zh-cn":i="cn";break;case"en":case"en_us":case"en-us":i="en";break;case"tw":case"zh_tw":case"zh-tw":i="tw"}return i}};var A={name:"ComponentsItem",components:{},props:{loading:{type:Boolean,default:!1},data:{type:Object,default:()=>({})},continuous:{type:Boolean,default:!1}},data:()=>({}),computed:{colSpan(){let n=null;if(this.continuous&&this.data.items.length>1){const i=this.data.items.indexOf(this.data._uid);n=["colspan-"+(this.data.items.length-i)].join(" ")}return n}},mounted(){},methods:{hasSlot(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return!!this.$slots[n]||!!this.$scopedSlots[n]},clickHandler(){this.$emit("click",this.data)},assignClickHandler(n){n.stopPropagation(),this.$emit("assign",this.data)},paymentStatusIcon(n){let i="fa-regular fa-credit-card";switch(n){case"deposit_unpaid":i="fa-solid fa-circle-exclamation fa-fw";break;case"unpaid":i="fa-regular fa-calendar-check"}return i}}},L=void 0,Y=void 0;function normalizeComponent(n,i,s,a,o,r,d,u,f,v){"boolean"!=typeof d&&(f=u,u=d,d=!1);const g="function"==typeof s?s.options:s;let S;if(n&&n.render&&(g.render=n.render,g.staticRenderFns=n.staticRenderFns,g._compiled=!0,o&&(g.functional=!0)),a&&(g._scopeId=a),r?(S=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),i&&i.call(this,f(n)),n&&n._registeredComponents&&n._registeredComponents.add(r)},g._ssrRegister=S):i&&(S=d?function(n){i.call(this,v(n,this.$root.$options.shadowRoot))}:function(n){i.call(this,u(n))}),S)if(g.functional){const n=g.render;g.render=function renderWithStyleInjection(i,s){return S.call(s),n(i,s)}}else{const n=g.beforeCreate;g.beforeCreate=n?[].concat(n,S):[S]}return s}const E=A;var __vue_render__$3=function(){var n=this,i=n.$createElement,s=n._self._c||i;return s("div",{staticClass:"components-item",class:[n.data.checked_status,{assign:n.data.assign,unassign:!n.data.assign,continuous:n.continuous},n.colSpan],attrs:{"data-type":"item","data-item-uid":n.data._uid,"data-items":n.data.items,draggable:"true","data-order":n.data.order},on:{dragstart:function(i){return n.$emit("dragstart",i)},click:n.clickHandler}},[s("b-overlay",{attrs:{"spinner-variant":"primary",show:n.loading}},[n.hasSlot("slot-item-info")?[n._t("slot-item-info",null,{scope:n.data})]:[n._v("\n      "+n._s(n.data.title)+",\n      "+n._s(n.data.start)+"-"+n._s(n.data.end)+",\n      "+n._s(n.data.assign)+"\n    ")],n._v(" "),s("div",{staticClass:"assign-button",on:{click:n.assignClickHandler}},[s("i",{staticClass:"fas fa-chevron-circle-right"})])],2)],1)},T=[];__vue_render__$3._withStripped=!0;const O=undefined,x=undefined,j=undefined,R=undefined,N=undefined;var I={name:"ComponentsScheduler",components:{orderItem:normalizeComponent({render:__vue_render__$3,staticRenderFns:T},void 0,E,"data-v-c359a138",!1,void 0,!1,void 0,void 0,void 0)},props:{loading:{type:Boolean,default:!1},locale:{type:String,default:"en"},range:{type:Object,default:()=>({})},resource:{type:Array,default:()=>[]},stock:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},holiday:{type:Array,default:()=>[]},format:{type:String,default:"YYYY-MM-DD"},defaultHoliday:{type:Array,default:()=>[6,0]},allowChangeDate:{type:Boolean,default:!1},allowChangeType:{type:Boolean,default:!1},allowEdit:{type:Boolean,default:!1},allowContinuous:{type:Boolean,default:!1},allowAutoAssign:{type:Boolean,default:!1},marginTop:{type:Number,default:0}},data:()=>({cname:"resource-item",grouping:{},mousePosition:0}),computed:{dict(){return z[this.lang]||z.en},lang(){return H.formatLang(this.locale)},now(){return i().format(this.format)},resourceList:{get(){return this.resource},set(n){this.$emit("update:resource",n)}},itemList:{get(){const n=this.deepCopy(this.items);return n.sort(((n,i)=>n.start===i.start?0:n.start>i.start?1:-1)),n},set(n){this.$emit("update:items",n)}},viewCount(){const n=i(this.range.start),s=undefined,a=undefined;return i(this.range.end).diff(n,"days")+1},dates(){const n=[...new Array(this.viewCount)].fill({}),s={};let a="";const o=n.map(((n,o)=>{const r=i(this.range.start).add(o,"days"),d=r.format(this.format),u=this.holiday.find((n=>n.date===d)),f=r.format("MM"),v=a!==f;return v&&(a=f),s[f]||(s[f]=0),s[f]++,{active:v,date:d,year:r.format("YYYY"),month:f,day:r.format("D"),week:r.format("dd"),...u?{holiday:u.display_name}:{}}}));return o.forEach((n=>{n.active&&(n.cols=s[n.month])})),o},dataResult(){const n={},i={};this.itemList.forEach((s=>{i[s.order_group]||(i[s.order_group]={}),void 0===s._uid&&(s._uid=H.guid());const a=this.grouping[s._uid],o=this.allowAutoAssign||s.assign?s.room_number_id:null;let r=[s.room_type,o,a].join();const d=i[s.order_group][r];if(d){const a=d[d.length-1].end;d.length>0&&(d[0].start===s.start||a!==s.start)&&(n[r]||(n[r]=r+s.end),r=n[r]||r,i[s.order_group][r]||(i[s.order_group][r]=[]))}else i[s.order_group][r]=[];i[s.order_group][r].push(s)}));const s=this.deepCopy(this.itemList),a=this.checkOverwrite(s),o=[],r={};this.itemList.forEach((n=>{let s=this.allowAutoAssign||n.assign?n.room_number_id:null;if(a.length){const i=[n.start,n.room_type,n.room_number_id].join(),r=undefined;a.includes(i)&&(o.includes(i)?(s=null,n.room_number_id=null,n.title=`*${n.title}`):o.push(i))}const d=[n.start,n.room_type,s].join();r[d]||(r[d]=[]);let u=[];const f=Object.entries(i[n.order_group]).findIndex((i=>{let[s,a]=i;return a.find((i=>i._uid===n._uid))}));-1!==f&&(u=Object.entries(i[n.order_group])[f][1].map((n=>n._uid))),r[d].push({...n,items:u})}));const d={};return Object.entries(r).forEach((n=>{let[i,s]=n;s.sort(((n,i)=>{const s=n.items.join(),a=i.items.join();switch(`${!!d[s]}${!!d[a]}`){case"truetrue":return 0;case"truefalse":return-1;case"falsetrue":return 1}return n.items.length===i.items.length?0:n.items.length>i.items.length?-1:1})),s.forEach(((n,i)=>{if(n.items.length){const i=n.items.join();d[i]||(d[i]=this.getMinOrder(s,d),Object.entries(r).forEach((n=>{let[s,a]=n;a.forEach(((n,s)=>{const a=undefined;n.items.join()===i&&(n.order=d[i])}))})))}}))})),r},dateOpenList(){const n={};return this.dates.forEach((i=>{n[i]=this.getStock(i.date).full})),n}},watch:{allowAutoAssign:{handler(){setTimeout((()=>{this.updateRowspan()}))},immediate:!1,deep:!0},range:{handler(){this.resourceList.forEach((n=>{delete n.layout})),setTimeout((()=>{this.updateRowspan()}))},immediate:!1,deep:!0}},mounted(){setTimeout((()=>{this.updateRowspan(),this.scrollEventSet()}))},methods:{hasSlot(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return!!this.$slots[n]||!!this.$scopedSlots[n]},isActive:n=>void 0===n.active||n.active,isAllActive(n){return this.isActive(n)&&(void 0===n.waitActive||n.waitActive)},updateItemPosition(){const n=this.deepCopy(this.itemList);n.forEach((n=>{const i=document.querySelector(`[data-item-uid="${n._uid}"]`);if(i){const{left:s,right:a}=i.getBoundingClientRect();n.left=s.toFixed(0),n.right=a.toFixed(0)}})),this.itemList=n},mousedownHandler(n){this.mousePosition=n.x},i18n(n){return this.dict[n]},scrollEventSet(){const n=document.querySelector(".components-resource .resource-header.stuck"),i=document.querySelector(".components-scheduler .scheduler-header.stuck");n&&i&&(window.addEventListener("scroll",(()=>{this.offsetY=i.getBoundingClientRect().top+1-this.marginTop}),{once:!0}),window.addEventListener("scroll",(()=>{const s=undefined,a=this.getScroll().top-this.offsetY;i.style.top=a>0?`${a}px`:0,n.style.top=i.style.top})))},getScroll(){const n=document.body,i=document.documentElement,s=parseFloat(window.pageYOffset||n.scrollTop||i.scrollTop);return{top:s,bottom:n.clientHeight-window.innerHeight-s}},getStock(n,i){var s;return(null===(s=this.stock[i])||void 0===s?void 0:s[n])||{}},checkStock(n,i){const s=undefined;return void 0!==this.getStock(n,i).stock},checkLock(n,i){const s=this.getStock(n,i);return void 0!==s.open&&!s.open},getAllStockFull(n){let i=!1;return Object.entries(this.stock).forEach((s=>{let[a,o]=s;var r;i||(i=!(null===(r=o[n])||void 0===r||!r.full))})),i},getMinOrder(n,i){let s=1;if(n.length>1){const a=n.map((n=>i[n.items.join()])).filter((n=>n));for(;a.includes(s);)s++}return s},waitDataResult(n){const i=this.dataResult[n]||[];return i.sort(((n,i)=>n.order===i.order?0:n.order>i.order?1:-1)),i},deepCopy:n=>JSON.parse(JSON.stringify(n)),isToday(n){return n===this.now},isWeekend(n){return this.defaultHoliday.includes(i(n).day())},isHoliday(n){const i=this.holiday.find((i=>i.date===n));return(null==i?void 0:i.display_name)||""},dateTooltip(n){const i=[n],s=this.isToday(n),a=this.isHoliday(n);return s&&i.push(`(${this.i18n("today")})`),a&&i.push(`(${a})`),i.join("")},dateClickHandler(n){this.$emit("click",{type:"date",value:n})},stockClickHandler(n){const{date:i,room:s,num:a}=n;this.$emit("click",{type:"stock",value:{...this.getStock(i,s)}})},orderClickHandler(n){this.$emit("click",{type:"order",value:n})},assignClickHandler(n){this.$emit("assign",{type:"assign",value:n})},itemClickHandler(n){const{date:i,room:s,num:a,full:o}=n;this.allowEdit&&!o&&this.$emit("click",{type:"item",value:n})},dragStartHandler(n){var i;const s=n.target.parentNode.dataset,a=null===(i=n.target)||void 0===i?void 0:i.dataset;if(null!=a&&a.itemUid){const i={...s,itemUid:a.itemUid,items:a.items};this.dragTarget=i,n.dataTransfer.setData("text/plain",JSON.stringify(i)),n.dataTransfer.effectAllowed="move"}n.target.style.background="#f2f2f2"},dragOverHandler(n){n.preventDefault()},dragLeaveHandler(n){n.preventDefault(),n.target.style.background=""},dragEnterHandler(n){n.preventDefault();const i=n.target.dataset.type,s=n.target.dataset.id,a=n.target.querySelectorAll(".components-item").length;!s||"wait"!==i&&a||(n.target.style.background="#f2f2f2"),n.target.style.pointerEvents="","item"===i&&(n.target.style.pointerEvents="none"),setTimeout((()=>{this.clearPointerEvents()}),1e3)},dropHandler(n){if(n.preventDefault(),n.target.style.background="",!this.allowChangeType)try{const i=undefined,s=(JSON.parse(n.dataTransfer.getData("text/plain")).id||"").split(",")[0],a=undefined;if(s!==(n.target.dataset.id||"").split(",")[0])return void this.updateRowspan()}catch(n){return}const s=n.target.dataset.type,a=undefined;if(n.target.dataset.id){const a=n.target.querySelectorAll(".components-item").length,o="wait"!==s;try{const r=JSON.parse(n.dataTransfer.getData("text/plain")),{itemUid:d,items:u}=r,{date:f,id:v}=n.target.dataset,[g,S]=v.split(",").map((n=>+n));if("wait"===s||!a||v===r.id){const s=this.deepCopy(this.itemList);if(this.allowContinuous){const n=u.split(",");let a=0;if(this.allowChangeDate){let o=-1,r=Number.MAX_SAFE_INTEGER;n.forEach(((n,i)=>{const a=s.findIndex((i=>i._uid===n)),d=+s[a].left,u=this.mousePosition-d;u>0&&u<r&&(r=u,o=i)}));const d=s.findIndex((i=>i._uid===n[o]));a=i(f).diff(i(s[d].start),"days")}n.forEach((n=>{const r=s.findIndex((i=>i._uid===n));s[r].assign=o,s[r].room_type=g,s[r].room_number_id=S||null,a&&(s[r].start=i(s[r].start).add(a,"days").format(this.format),s[r].end=i(s[r].end).add(a,"days").format(this.format))}))}else{const a=s.findIndex((n=>n._uid===d));s[a].assign=o,s[a].room_type=g,s[a].room_number_id=S||null;const r=i(f).diff(i(s[a].start),"days");if(!this.allowChangeDate)try{const i=JSON.parse(n.dataTransfer.getData("text/plain")),s=n.target.dataset.date;if(i.date&&i.date!==s)return void this.updateRowspan()}catch(n){return}r&&(s[a].start=f,s[a].end=i(s[a].end).add(r,"days").format(this.format))}const a=this.checkOverwrite(s);if(a.length){const n=a[0].split(","),i=document.querySelector(['[data-type="content"]',`[data-date="${n[0]}"]`,`[data-id="${[n[1],n[2]].join()}"]`].join(""));i&&(i.classList.add("easeInAnim"),setTimeout((()=>{i.classList.remove("easeInAnim")}),500))}else setTimeout((()=>{this.itemList=s,this.$emit("drop",{itemUid:d,date:f,room:g,...S?{num:S}:null,items:u})}))}}catch(n){return}}setTimeout((()=>{this.grouping={},this.updateRowspan()}))},clearPointerEvents(){document.querySelectorAll(".components-item").forEach((n=>{n.style.pointerEvents=""}))},updateRowspan(){this.resourceList.forEach(((n,i)=>{delete this.resourceList[i].layout}));const n=[],i=[`.${this.cname} [data-type="wait"]`,`.${this.cname} [data-type="content"]`].join();document.querySelectorAll(i).forEach((i=>{const s=i.querySelectorAll(".components-item").length,a=i.dataset.id,o=a.split(",")[0],r=a.split(",")[1],d=this.resourceList.findIndex((n=>n.id===+o));if(-1!==d){const i=this.resourceList[d];i.layout||(i.layout={}),i.layout[r]||(i.layout[r]={rowspan:0}),"wait"===r&&(n[o]||(n[o]=0),n[o]+=s,i.layout[r].waitRowspan=n[o]),i.layout[r].rowspan=Math.max(i.layout[r].rowspan,s),this.allowAutoAssign&&(i.waitActive=!0),this.resourceList[d]=i}})),this.resourceList=[...this.resourceList],setTimeout((()=>{this.clearPointerEvents(),this.updateItemPosition()}))},checkOverwrite(n){const i=this.deepCopy(n),s={};return this.allowAutoAssign||i.forEach((n=>{n.assign||(n.room_number_id=null)})),i.filter((n=>n.room_number_id)).forEach((n=>{const i=[n.start,n.room_type,n.room_number_id].join();s[i]||(s[i]=[]),s[i].push(n)})),[...new Set(Object.entries(s).map((n=>n[1])).filter((n=>n.length>1)).flat().map((n=>[n.start,n.room_type,n.room_number_id].join())))]},parseLayoutInfo(n,i){var s,a;return(null==n||null===(s=n.layout)||void 0===s||null===(a=s[i])||void 0===a?void 0:a.rowspan)||0}}},F=void 0;const J=I;var __vue_render__$2=function(){var n=this,i=n.$createElement,s=n._self._c||i;return s("div",{staticClass:"components-scheduler"},[s("b-overlay",{class:"view-"+n.viewCount,attrs:{"spinner-variant":"primary",show:n.loading}},[s("b-form-row",{staticClass:"scheduler-header stuck"},[s("b-col",{attrs:{cols:"12"}},[s("ul",{staticClass:"months"},n._l(n.dates,(function(i,a){return s("li",{key:"months_"+a,attrs:{title:i.year+"/"+i.month}},[s("div",{class:[{active:i.active},i.cols?"colspan-"+i.cols:""]},[n._v("\n              "+n._s(i.year)+"/"+n._s(i.month)+"\n            ")])])})),0)]),n._v(" "),s("b-col",{attrs:{cols:"12"}},[s("ul",{staticClass:"dates"},n._l(n.dates,(function(i,a){return s("li",{key:"dates_"+a,class:["cursor-pointer",{today:n.isToday(i.date),holiday:n.isHoliday(i.date),weekend:n.isWeekend(i.date)}],attrs:{id:"dates_"+a,boundary:"document"},on:{click:function(s){return n.dateClickHandler(i.date)}}},[s("div",[s("span",[n._v(n._s(i.week)+" "+n._s(i.day))]),n._v(" "),n.getAllStockFull(i.date)?s("small",{staticClass:"wb-icon"},[n._v("\n                "+n._s(n.i18n("whole_building"))+"\n              ")]):n._e()]),n._v(" "),s("b-tooltip",{attrs:{target:"dates_"+a,"custom-class":"b-tooltip-class",placement:"top",triggers:"hover",boundary:"document"}},[n._v("\n              "+n._s(n.dateTooltip(i.date))+"\n            ")])],1)})),0)])],1),n._v(" "),n._l(n.resourceList,(function(i,a){return[s("b-form-row",{key:"contents_"+a,staticClass:"contents-row stock"},[s("b-col",{class:n.cname,attrs:{cols:"12"}},[s("ul",{staticClass:"contents stock"},n._l(n.dates,(function(o,r){return s("li",{key:"contents_"+a+"_"+r,class:{full:n.getStock(o.date,i.id).full,"stock-notset":!n.checkStock(o.date,i.id)}},[s("div",{on:{click:function(s){return n.stockClickHandler({date:o.date,room:i.id})}}},[n.checkLock(o.date,i.id)?s("small",{staticClass:"lock-icon"},[s("i",{staticClass:"fa-solid fa-lock"})]):n._e(),n._v(" "),n.checkStock(o.date,i.id)?s("span",[n._v("\n                  "+n._s(n.getStock(o.date,i.id).stock)+"\n                ")]):s("small",[n._v("\n                  "+n._s(n.i18n("stock_notset"))+"\n                ")])])])})),0)])],1),n._v(" "),s("b-form-row",{key:"contents_wait_"+a,class:["contents-row collapse-wait",{active:n.isAllActive(i)}]},[s("b-col",{class:[n.cname,"rowspan-"+n.parseLayoutInfo(i,"wait")],attrs:{cols:"12"}},[s("ul",{staticClass:"contents wait"},n._l(n.dates,(function(o,r){return s("li",{key:"contents_wait_"+a+"_"+r,class:{full:n.getStock(o.date,i.id).full}},[s("div",{attrs:{"data-type":"wait",droppable:"true","data-date":o.date,"data-id":[i.id,"wait"].join()},on:{dragenter:n.dragEnterHandler,dragleave:n.dragLeaveHandler,dragover:n.dragOverHandler,drop:n.dropHandler,click:function(s){if(s.target!==s.currentTarget)return null;n.itemClickHandler({date:o.date,room:i.id,num:"wait",full:n.getStock(o.date,i.id).full})},mousedown:n.mousedownHandler}},[n._l(n.waitDataResult([o.date,i.id,""].join()),(function(i,a){return[s("order-item",{key:"order-item_"+a,class:"item-order-"+i.order,attrs:{data:i,continuous:n.allowContinuous},on:{dragstart:n.dragStartHandler,click:n.orderClickHandler,assign:n.assignClickHandler},scopedSlots:n._u([n.hasSlot("slot-item-info")?{key:"slot-item-info",fn:function(i){var s=i.scope;return[n._t("slot-item-info",null,{scope:s})]}}:null],null,!0)})]}))],2)])})),0)])],1),n._v(" "),n._l(i.children,(function(o,r){return s("b-form-row",{key:"contents_"+a+"_"+r,class:["contents-row collapse",{active:n.isActive(i)}]},[s("b-col",{class:n.cname,attrs:{cols:"12"}},[s("ul",{staticClass:"contents"},n._l(n.dates,(function(d,u){return s("li",{key:"contents_"+a+"_"+r+"_"+u,class:{full:n.getStock(d.date,i.id).full}},[s("div",{attrs:{"data-type":"content","data-date":d.date,"data-id":[i.id,o.id].join()},on:{dragenter:n.dragEnterHandler,dragleave:n.dragLeaveHandler,dragover:n.dragOverHandler,drop:n.dropHandler,click:function(s){if(s.target!==s.currentTarget)return null;n.itemClickHandler({date:d.date,room:i.id,num:o.id,full:n.getStock(d.date,i.id).full})},mousedown:n.mousedownHandler}},[n._l(n.dataResult[[d.date,i.id,o.id].join()]||[],(function(i,a){return[s("order-item",{key:"order-item_"+a,attrs:{data:i,continuous:n.allowContinuous},on:{dragstart:n.dragStartHandler,click:n.orderClickHandler,assign:n.assignClickHandler},scopedSlots:n._u([n.hasSlot("slot-item-info")?{key:"slot-item-info",fn:function(i){var s=i.scope;return[n._t("slot-item-info",null,{scope:s})]}}:null],null,!0)})]}))],2)])})),0)])],1)}))]}))],2)],1)},U=[];__vue_render__$2._withStripped=!0;const W=undefined,P=undefined,B=undefined,q=undefined,V=normalizeComponent({render:__vue_render__$2,staticRenderFns:U},void 0,J,"data-v-fa499736",!1,void 0,!1,void 0,void 0,void 0);var X={name:"ComponentsResource",components:{},props:{debug:{type:Boolean,default:!1},headerTitle:{type:String,default:"Header Title"},waitTitle:{type:String,default:"Wait Title"},data:{type:Array,default:()=>[]}},data:()=>({pageLoad:!1,expandAll:!0}),computed:{dataList:{get(){const n=undefined;return[...this.data.map((n=>({...n,active:void 0===n.active||n.active,waitActive:void 0===n.waitActive||n.waitActive})))]},set(n){this.$emit("update:data",n)}},isAllExpand(){return!this.dataList.some((n=>!n.active))},isAllCollapse(){return!this.dataList.some((n=>n.active))}},mounted(){const n=this.dataList.map((n=>({...n,active:void 0===n.active||n.active})));this.pageLoad||(this.pageLoad=!0,this.dataList=n)},methods:{hasSlot(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return!!this.$slots[n]||!!this.$scopedSlots[n]},collapseAllClickHandler(){this.expandAll=!this.expandAll,this.dataList.forEach((n=>{n.active=this.expandAll})),this.dataList=[...this.dataList]},collapseWaitClickHandler(n){const i=this.dataList;i[n].waitActive=!i[n].waitActive,this.dataList=i},collapseClickHandler(n){const i=this.dataList;i[n].active=!i[n].active,this.dataList=i,this.isAllCollapse&&(this.expandAll=!1),this.isAllExpand&&(this.expandAll=!0)},parseLayoutInfo(n,i){var s,a;return(null==n||null===(s=n.layout)||void 0===s||null===(a=s[i])||void 0===a?void 0:a.rowspan)||0}}},Z=void 0,G=void 0;const K=X;var __vue_render__$1=function(){var n=this,i=n.$createElement,s=n._self._c||i;return s("div",{staticClass:"components-resource"},[s("div",{staticClass:"resource-header stuck"},[s("span",{staticClass:"arrow-icon",class:{active:n.expandAll},on:{click:function(i){return n.collapseAllClickHandler()}}},[s("i",{staticClass:"fa-solid fa-angles-down"}),n._v(" "+n._s(n.headerTitle)+"\n    ")])]),n._v(" "),n._l(n.dataList,(function(i,a){return[s("b-form-row",{key:a,staticClass:"resource-type"},[s("b-col",{staticClass:"resource-item",attrs:{cols:"12"}},[s("b-form-row",{staticClass:"append-item"},[s("b-col",{staticClass:"label p-0",attrs:{"data-id":i.id}},[s("span",{staticClass:"arrow-icon",class:{active:i.active},on:{click:function(i){return n.collapseClickHandler(a)}}},[s("i",{staticClass:"fa-solid fa-angle-down"}),n._v(" "),s("span",{staticClass:"pl-1"},[n._v(n._s(i.name))])]),n._v(" "),n.parseLayoutInfo(i,"wait")>0?[s("b-badge",{staticClass:"b-badge-class",attrs:{id:"badge_"+a},on:{click:function(i){return n.collapseWaitClickHandler(a)}}},[n._v("\n                "+n._s(i.layout.wait.waitRowspan)+"\n              ")]),n._v(" "),s("b-tooltip",{attrs:{target:"badge_"+a,"custom-class":"b-tooltip-class",placement:"topright",triggers:"hover",boundary:"document"}},[n._v("\n                "+n._s(n.waitTitle)+"\n              ")])]:n._e()],2),n._v(" "),n.hasSlot("slot-resource-info")?[s("b-col",{attrs:{cols:"auto"}},[n._t("slot-resource-info",null,{scope:i})],2)]:n._e()],2)],1)],1),n._v(" "),s("b-form-row",{key:"contents_wait_"+a,staticClass:"contents-row collapse-wait",class:{active:i.active&&i.waitActive}},[s("b-col",{staticClass:"resource-children-item",class:["rowspan-"+n.parseLayoutInfo(i,"wait")],attrs:{cols:"12"}},[s("b-form-row",{staticClass:"append-item"},[s("b-col",{staticClass:"label"},[s("span",{staticClass:"pl-3"},[n._v(n._s(n.waitTitle))])])],1)],1)],1),n._v(" "),n._l(i.children,(function(o,r){return s("b-form-row",{key:"contents_"+a+"_"+r,staticClass:"contents-row collapse",class:{active:i.active}},[s("b-col",{staticClass:"resource-children-item",attrs:{cols:"12"}},[s("b-form-row",{staticClass:"append-item"},[s("b-col",{staticClass:"label",attrs:{"data-id":o.id,"data-rowspan":n.parseLayoutInfo(i,o.id)}},[s("span",{staticClass:"pl-3"},[n._v(n._s(o.name))])]),n._v(" "),s("b-col",{attrs:{cols:"auto"}},[n._t("slot-resource-info",null,{scope:o})],2)],1)],1)],1)}))]}))],2)},Q=[];__vue_render__$1._withStripped=!0;const tt=undefined,et=undefined,nt=undefined,it=undefined,st=normalizeComponent({render:__vue_render__$1,staticRenderFns:Q},void 0,K,"data-v-2bdd6a78",!1,void 0,!1,void 0,void 0,void 0),at={};["allowEdit","allowContinuous","allowAutoAssign"].forEach((n=>{at[`options.${n}`]=function(i){H.cookies.set({key:n,val:i})}}));var ot={name:"ComponentsCalendar",components:{scheduler:V,resourceMenu:st},props:{loading:{type:Boolean,default:!1},resource:{type:Array,default:()=>[]},stock:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},data(){return{isMobile:window.innerWidth<992,defaultData:{hotkey:!0,defaultDate:this.now().format(this.format),defaultView:7,previewDay:1,locale:"en",views:[3,7,15,30],format:"YYYY-MM-DD"},selected:{startDate:this.now().format(this.format),count:7},vCalendarAttrs:[{key:"today",highlight:{fillMode:"light"},dates:this.now().format(this.format)}],updateViewEvent:null}},computed:{dict(){return z[this.lang]||z.en},holiday(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.holiday},stockData:{get(){return this.stock},set(n){this.$emit("update:stock",n)}},itemList:{get(){return this.items},set(n){this.$emit("update:items",n)}},resourceData:{get(){return this.resource},set(n){this.$emit("update:resource",n)}},optionsData:{get(){return{...this.defaultData,...this.options}},set(n){this.$emit("update:options",n)}},marginTop(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.marginTop)||0)},allowChangeDate(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowChangeDate)||!1)},allowChangeType(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowChangeType)||!1)},allowEdit(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowEdit)||!1)},allowContinuous(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowContinuous)||!1)},allowAutoAssign(){var n;return JSON.parse((null===(n=this.optionsData)||void 0===n?void 0:n.allowAutoAssign)||!1)},allowHotkey(){var n;return!(null===(n=this.optionsData)||void 0===n||!n.hotkey)},headerText(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.headerTitle},waitText(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.waitTitle},format(){var n;return null===(n=this.optionsData)||void 0===n?void 0:n.format},views(){var n;const i=undefined;return((null===(n=this.optionsData)||void 0===n?void 0:n.views)||[]).map((n=>({active:this.selected.count===n,value:n})))},lang(){return H.formatLang(this.locale)},locale(){var n;return(null===(n=this.optionsData)||void 0===n?void 0:n.locale)||"en"},previewDay(){var n;return-1*((null===(n=this.optionsData)||void 0===n?void 0:n.previewDay)||0)},dateRange(){const n=this.selected.startDate,s=this.selected.count||1,a=undefined,o=undefined;return{start:i(n).format(this.format),end:i(n).add(s-1,"days").format(this.format)}},vCaleLocale(){let n=this.locale||"en-US";switch(n.toLowerCase()){case"ja_jp":case"ja-jp":case"jajp":case"ja":case"jp":n="ja";break;case"zh_tw":case"zh-tw":case"zhtw":case"tw":n="zh-TW";break;default:n="en-US"}return n},schedulerRef(){var n;return(null===(n=this.$refs)||void 0===n?void 0:n.scheduler)||{}}},watch:{...at,locale(){this.dayJsLocale(this.locale)},selected:{handler(){let{count:n,startDate:s}=this.selected;s=i(s).format(this.format);const a=undefined,o={start:s,end:i(s).add(n-1,"days").format(this.format),count:n};this.optionsData={...this.optionsData,view:o},this.debounceChangeEvent&&clearTimeout(this.debounceChangeEvent),this.debounceChangeEvent=setTimeout((()=>{this.$emit("change",o),delete this.debounceChangeEvent}),100)},immediate:!1,deep:!0},"selected.count":{handler(){H.cookies.set({key:"view-count",val:this.selected.count})},immediate:!1,deep:!0}},mounted(){this.globeEventbind(),this.getSettingCache(),this.$nextTick((()=>{this.init()}))},methods:{hasSlot(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return!!this.$slots[n]||!!this.$scopedSlots[n]},deepCopy:n=>JSON.parse(JSON.stringify(n)),init(){this.dayJsLocale(this.locale),splitInit({el:[".components-calendar-menu",".components-calendar-main"],minSize:[200,20]}),this.viewTodayClickHandler(this.optionsData.defaultDate)},globeEventbind(){window.onresize=()=>{this.isMobile=window.innerWidth<576},this.allowHotkey&&document.addEventListener("keydown",(n=>{const i=n.which||n.keyCode,s=n.ctrlKey?n.ctrlKey:17===i,a=undefined,o=undefined;switch([n.metaKey||s,i].join()){case"true,37":n.preventDefault(),null==this||this.viewShiftClickHandler();break;case"true,39":n.preventDefault(),null==this||this.viewShiftClickHandler(!0);break;case"true,38":case"true,40":n.preventDefault(),null==this||this.viewTodayClickHandler()}}))},getSettingCache(){var n,i;const s=this.deepCopy(this.optionsData);["allowEdit","allowContinuous","allowAutoAssign"].forEach((n=>{s[n]=JSON.parse(H.cookies.get(n)||!1)}));const a=+H.cookies.get("view-count")||+this.optionsData.view||+(null===(n=this.options)||void 0===n||null===(i=n.view)||void 0===i?void 0:i.count)||7;this.selected.count=a,this.optionsData=s},getSize(){return this.isMobile?"":"sm"},now:n=>i(n).isValid()?i(n):i(),dayJsLocale(n){let s=n||"en";switch(s.toLowerCase()){case"zh_tw":case"zh-tw":case"zhtw":case"tw":s="zh-tw"}i.locale(s)},i18n(n){return this.dict[n]},viewsClickHandler(n){n!==this.selected.view&&(this.selected.count=n)},viewShiftClickHandler(n){const s=undefined,a=(n?1:-1)*this.selected.count,o=this.dateRange;o.end=i(o.start).add(a,"days").format(this.format),this.selected.startDate=o.end},viewTodayClickHandler(n){const i=this.now(n).add(this.previewDay,"days").format(this.format);this.selected.startDate=i},itemClickHandler(n){this.$emit("click",n)},itemAssignClickHandler(n){this.$emit("assign",n)},dropHandler(n){this.$emit("drop",n)}}},rt=void 0,lt=void 0;const dt=ot;var __vue_render__=function(){var n=this,i=n.$createElement,s=n._self._c||i;return s("div",{staticClass:"components-calendar container-fluid"},[s("b-overlay",{attrs:{"spinner-variant":"primary",show:n.loading}},[s("div",{staticClass:"header"},[n._t("slot-toolbar-top"),n._v(" "),s("b-form-row",{class:["pb-1",{small:!n.isMobile}]},[s("b-col",{attrs:{cols:"auto"}},[s("b-form-checkbox",{attrs:{switch:""},model:{value:n.options.allowEdit,callback:function(i){n.$set(n.options,"allowEdit",i)},expression:"options.allowEdit"}},[n._v("\n            "+n._s(n.i18n("addnew_onder"))+"\n          ")])],1),n._v(" "),s("b-col",{attrs:{cols:"auto"}},[s("b-form-checkbox",{attrs:{switch:""},model:{value:n.options.allowContinuous,callback:function(i){n.$set(n.options,"allowContinuous",i)},expression:"options.allowContinuous"}},[n._v("\n            "+n._s(n.i18n("continuous_display"))+"\n          ")])],1),n._v(" "),s("b-col",{attrs:{cols:"auto"}},[s("b-form-checkbox",{attrs:{switch:""},model:{value:n.options.allowAutoAssign,callback:function(i){n.$set(n.options,"allowAutoAssign",i)},expression:"options.allowAutoAssign"}},[n._v("\n            "+n._s(n.i18n("autoassign_room"))+"\n          ")])],1)],1),n._v(" "),s("b-form-row",[s("b-col",{staticClass:"pb-2",attrs:{cols:"12",md:"auto"}},[s("b-form-row",[s("b-col",{attrs:{cols:"auto"}},[s("b-button",{attrs:{size:n.getSize(),variant:"outline-light"},on:{click:n.viewTodayClickHandler}},[n._v("\n                "+n._s(n.i18n("today"))+"\n              ")])],1),n._v(" "),s("b-col",[s("b-button-group",{staticClass:"w-100"},[s("v-date-picker",{attrs:{locale:n.vCaleLocale,attributes:n.vCalendarAttrs,masks:{input:"YYYY-MM-DD"}},scopedSlots:n._u([{key:"default",fn:function(i){var a=i.inputValue,o=i.inputEvents;return[s("b-form-input",n._g({attrs:{size:n.getSize(),value:a}},o))]}}]),model:{value:n.selected.startDate,callback:function(i){n.$set(n.selected,"startDate",i)},expression:"selected.startDate"}}),n._v(" "),s("b-button",{staticClass:"mxw-60px",attrs:{size:n.getSize(),variant:"outline-light"},on:{click:function(i){return n.viewShiftClickHandler()}}},[s("i",{staticClass:"fa-solid fa-angle-left"})]),n._v(" "),s("b-button",{staticClass:"mxw-60px",attrs:{size:n.getSize(),variant:"outline-light"},on:{click:function(i){return n.viewShiftClickHandler(!0)}}},[s("i",{staticClass:"fa-solid fa-angle-right"})])],1)],1)],1)],1),n._v(" "),s("b-col",{staticClass:"pb-2",attrs:{cols:"auto"}},[s("b-button-group",n._l(n.views,(function(i,a){return s("b-button",{key:a,class:{active:i.active},attrs:{size:n.getSize(),variant:"outline-primary"},on:{click:function(s){return n.viewsClickHandler(i.value)}}},[n._v("\n              "+n._s(i.value)+n._s(n.i18n("day"))+"\n            ")])})),1)],1),n._v(" "),s("b-col",{staticClass:"right-middle pb-2"},[n._t("slot-toolbar-right")],2)],1)],2),n._v(" "),s("b-row",{staticClass:"main"},[s("div",{staticClass:"components-calendar-menu"},[s("resource-menu",{attrs:{"header-title":n.headerText,"wait-title":n.waitText,data:n.resourceData},on:{"update:data":function(i){n.resourceData=i}},scopedSlots:n._u([n.hasSlot("slot-resource-info")?{key:"slot-resource-info",fn:function(i){var s=i.scope;return[n._t("slot-resource-info",null,{scope:s})]}}:null],null,!0)})],1),n._v(" "),s("div",{staticClass:"components-calendar-main"},[s("scheduler",{ref:"scheduler",attrs:{"margin-top":n.marginTop,locale:n.locale,range:n.dateRange,holiday:n.options.holiday,resource:n.resourceData,stock:n.stockData,items:n.itemList,"allow-change-date":n.allowChangeDate,"allow-change-type":n.allowChangeType,"allow-edit":n.allowEdit,"allow-continuous":n.allowContinuous,"allow-auto-assign":n.allowAutoAssign},on:{"update:resource":function(i){n.resourceData=i},"update:stock":function(i){n.stockData=i},"update:items":function(i){n.itemList=i},click:n.itemClickHandler,assign:n.itemAssignClickHandler,drop:n.dropHandler},scopedSlots:n._u([n.hasSlot("slot-item-info")?{key:"slot-item-info",fn:function(i){var s=i.scope;return[n._t("slot-item-info",null,{scope:s})]}}:null],null,!0)})],1)])],1)],1)},ct=[];__vue_render__._withStripped=!0;const ut=undefined,ht=undefined,ft=undefined,mt=undefined,pt=normalizeComponent({render:__vue_render__,staticRenderFns:ct},void 0,dt,"data-v-111897ff",!1,void 0,!1,void 0,void 0,void 0);var vt;const gt=undefined,_t=undefined,yt=undefined,wt=undefined,St=undefined,bt=undefined;return normalizeComponent({},void 0,{install:function(n){n.component("calendar",pt)},calendar:pt},void 0,void 0,void 0,!1,void 0,void 0,void 0)}));
//# sourceMappingURL=calendar.umd.js.map
